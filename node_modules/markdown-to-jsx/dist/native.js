var OZ=Object.defineProperty,HZ=($,J)=>{for(var Z in J)OZ($,Z,{get:J[Z],enumerable:!0,configurable:!0,set:Q=>J[Z]=()=>Q})};import*as U9 from"react";import{Image as DJ,Linking as C6,Text as f0,View as S0}from"react-native";var P=32,N=9,Y9=13,g=10,e=96,_0=126,z0=91,r0=94,u=62,K9=35,q6=36,a9=37,p=45,d0=61,A0=92,O0=42,H0=95,V0=60,n9=64,c0=93,g0=33,D$=38,x0=58,h$=70,b9=102,s9=104,R9=119,j$=116,m$=112,W6=115,z6=160,U6=12,C$=44,B$=59,d9=63,s0=46,j0=47,D9=39,W9=34,j9=43,P0=124,B9=123,V$=125,t0=40,e0=41,t9=30,u$=31,n=48,s=57,c=65,a=90,U0=97,D0=122,l0=128,G9=32,DZ={blockQuote:0,breakLine:1,breakThematic:2,codeBlock:3,codeInline:4,footnote:5,footnoteReference:6,frontmatter:7,gfmTask:8,heading:9,htmlBlock:10,htmlComment:11,htmlSelfClosing:12,image:13,link:14,orderedList:15,paragraph:16,ref:17,refCollection:18,table:19,text:20,textFormatted:21,unorderedList:22},_=DZ,s$={};HZ(s$,{startsWith:()=>c$,slugify:()=>i0,skipWhitespace:()=>fZ,shouldFilterTag:()=>I$,sanitizer:()=>k9,parseFrontmatterBounds:()=>r$,normalizeInput:()=>_$,isVoidElement:()=>e9,isUnicodeWhitespace:()=>EZ,isUnicodePunctuation:()=>gZ,isSpaceOrTabCode:()=>wZ,isDigitCode:()=>SZ,isAlphaCode:()=>yZ,isAlnumCode:()=>j6,isASCIIWhitespace:()=>RZ,isASCIIPunctuation:()=>bZ,inlineCharTypeTable:()=>NZ,htmlAttrsToJSXProps:()=>S9,hasKeys:()=>TZ,getTag:()=>mZ,getOverrideProps:()=>CZ,get:()=>l9,findLineEnd:()=>xZ,extractPlainText:()=>M6,endsWith:()=>AZ,encodeUrlTarget:()=>n$,decodeEntityReferences:()=>a$,cx:()=>hZ,containsTagfilterTag:()=>pZ,charClassTable:()=>z9,applyTagFilterToText:()=>P$,VOID_ELEMENTS:()=>l$,SHOULD_RENDER_AS_BLOCK_R:()=>i$,SANITIZE_R:()=>d$,NAMED_CODES_TO_UNICODE:()=>MZ,HTML_TO_JSX_MAP:()=>D6,HTML_CHAR_CODE_R:()=>H6,CC_WHITESPACE:()=>w9,CC_SPACE_TAB:()=>M$,CC_PUNCTUATION:()=>y9,CC_NEWLINE:()=>o$,CC_DIGIT:()=>v$,CC_ALPHA_UPPER:()=>B6,CC_ALPHA:()=>F$,ATTRIBUTES_TO_SANITIZE:()=>vZ});import{NAMED_CODES_TO_UNICODE as jZ,decodeEntity as BZ}from"#entities";function r$($){if(!c$($,"---"))return null;let J=3;for(;J<$.length&&($[J]===" "||$[J]==="	");)J++;if(J<$.length&&$[J]==="\r"&&J++,J>=$.length||$[J]!==`
`)return null;J++;let Z=!1;for(;J<$.length;){let Q=J;for(;J<$.length&&$[J]!==`
`&&$[J]!=="\r";)J++;if(J>=$.length)break;let X=J;if($[J]==="\r"&&J++,J<$.length&&$[J]===`
`&&J++,c$($,"---",Q))return{endPos:J,hasValidYaml:Z};let Y=$.indexOf(":",Q);Y!==-1&&Y<X&&(Z=!0)}return null}var MZ=jZ,H6=/&([a-zA-Z0-9]+|#[0-9]{1,7}|#x[0-9a-fA-F]{1,6});/gi,D6={class:"className",for:"htmlFor",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",classid:"classId",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",crossorigin:"crossOrigin",enctype:"encType",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",inputmode:"inputMode",keyparams:"keyParams",keytype:"keyType",marginheight:"marginHeight",marginwidth:"marginWidth",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",novalidate:"noValidate",radiogroup:"radioGroup",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",usemap:"useMap",viewbox:"viewBox"};function S9($){var J={};for(var Z in $){var Q=Z.toLowerCase(),X=D6[Q];if(X)J[X]=$[Z];else{var Y=Z.indexOf(":");Y!==-1?J[Z.slice(0,Y)+Z[Y+1].toUpperCase()+Z.slice(Y+2)]=$[Z]:J[Z]=$[Z]}}return J}var i$=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s|^<(div|p|h[1-6]|ul|ol|li|blockquote|pre|table|thead|tbody|tr|td|th|dl|dt|dd|hr|address|article|aside|details|dialog|figure|figcaption|footer|form|header|main|menu|nav|section|summary|textarea|fieldset|legend|center|dir|hgroup|marquee|search|output|template)\b)/i;function a$($){return $.indexOf("&")===-1?$:$.replace(H6,(J,Z)=>{var Q=BZ(Z);if(Q)return Q;if(Z[0]==="#"){var X=Z[1]==="x"||Z[1]==="X"?parseInt(Z.slice(2),16):parseInt(Z.slice(1),10);return X===0||X>=55296&&X<=57343||X>1114111?"\uFFFD":X<=65535?String.fromCharCode(X):String.fromCharCode(55296+(X-65536>>10),56320+(X-65536&1023))}return J})}var d$=/(javascript|vbscript|data(?!:image)):/i;function k9($){if(d$.test($))return null;if($.indexOf("%")===-1)return $;try{let J=decodeURIComponent($).replace(/[^A-Za-z0-9/:]/g,"");if(d$.test(J))return null}catch{return null}return $}var C0={},o0,b0;for(o0=[192,193,194,195,196,197,224,225,226,227,228,229,230,198],b0=0;b0<o0.length;b0++)C0[o0[b0]]="a";for(C0[231]=C0[199]="c",C0[240]=C0[208]="d",o0=[200,201,202,203,233,232,234,235],b0=0;b0<o0.length;b0++)C0[o0[b0]]="e";for(o0=[207,239,206,238,205,237,204,236],b0=0;b0<o0.length;b0++)C0[o0[b0]]="i";for(C0[209]=C0[241]="n",o0=[248,216,339,338,213,245,212,244,211,243,210,242],b0=0;b0<o0.length;b0++)C0[o0[b0]]="o";for(o0=[220,252,219,251,218,250,217,249],b0=0;b0<o0.length;b0++)C0[o0[b0]]="u";C0[376]=C0[255]=C0[221]=C0[253]="y";function j6($){return $<l0&&(z9[$]&(F$|v$))!==0}function i0($){for(var J=[],Z=0;Z<$.length;Z++){var Q=$.charCodeAt(Z);if(j6(Q))Q>=c&&Q<=a?J.push(String.fromCharCode(Q+G9)):J.push($[Z]);else if(Q===P||Q===p)J.push("-");else{var X=C0[Q];X&&J.push(X)}}return J.join("")}function c$($,J,Z){return $.startsWith(J,Z)}function AZ($,J,Z){return $.startsWith(J,(Z===void 0?$.length:Z)-J.length)}var l$=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","circle","ellipse","line","path","polygon","polyline","rect","use","stop","animate","set"]);function e9($){let J=$.toLowerCase();if(l$.has(J))return!0;let Z=J.indexOf(":");return Z!==-1?(J=J.slice(Z+1),l$.has(J)):!1}var vZ=["src","href","data","formAction","srcDoc","action"],w9=1,y9=2,F$=4,v$=8,o$=16,M$=32,B6=64,O6=1,_Z=2,IZ=3,PZ=4,z9=(function(){let $=new Uint8Array(128),J;for($[N]=w9|M$,$[g]=w9|o$,$[U6]=w9,$[Y9]=w9|o$,$[P]=w9|M$,J=g0;J<=j0;J++)$[J]=y9;for(J=x0;J<=n9;J++)$[J]=y9;for(J=z0;J<=e;J++)$[J]=y9;for(J=B9;J<=_0;J++)$[J]=y9;for(J=n;J<=s;J++)$[J]=v$;for(J=c;J<=a;J++)$[J]=F$|B6;for(J=U0;J<=D0;J++)$[J]=F$;return $})(),NZ=(function(){let $=new Uint8Array(128);return $[A0]=_Z,$[z0]=PZ,$[O0]=$[H0]=$[_0]=$[d0]=IZ,$[e]=$[V0]=$[n9]=$[c0]=$[g]=$[P]=$[g0]=O6,$[b9]=$[s9]=$[R9]=O6,$})();function bZ($){return $<l0&&(z9[$]&y9)!==0}function RZ($){return $<l0&&(z9[$]&w9)!==0}function wZ($){return $<l0&&(z9[$]&M$)!==0}function yZ($){return $<l0&&(z9[$]&F$)!==0}function SZ($){return $<l0&&(z9[$]&v$)!==0}var kZ=/[\p{P}\p{S}]/u,LZ=/\p{Zs}/u;function EZ($){if(!$)return!0;let J=$.charCodeAt(0);return J<l0?(z9[J]&w9)!==0:LZ.test($)}function gZ($){if(typeof $=="number")return $<l0&&(z9[$]&y9)!==0;if(!$)return!1;let J=$.charCodeAt(0);return J<l0?(z9[J]&y9)!==0:kZ.test($)}function xZ($,J){let Z=$.indexOf(`
`,J);return Z===-1?$.length:Z>0&&$.charCodeAt(Z-1)===Y9?Z-1:Z}var c9=[];function _$($){var J=$.indexOf("\r"),Z=$.indexOf("\0");if(J===-1&&Z===-1)return $;var Q=$.length;c9.length=0;var X=0,Y=0;for(J===-1?Y=Z:Z===-1?Y=J:Y=J<Z?J:Z;Y<Q;Y++){var G=$.charCodeAt(Y);G===Y9?(X<Y&&c9.push($.slice(X,Y)),Y+1<Q&&$.charCodeAt(Y+1)===g&&Y++,c9.push(`
`),X=Y+1):G===0&&(X<Y&&c9.push($.slice(X,Y)),c9.push("\uFFFD"),X=Y+1)}return X<Q&&c9.push($.slice(X)),c9.join("")}function fZ($,J,Z){let Q=Z??$.length;for(;J<Q&&($[J]===" "||$[J]==="	");)J++;return J}function TZ($){if(!$)return!1;for(var J in $)return!0;return!1}function l9($,J,Z){for(var Q=$,X=J.split("."),Y=0;Y<X.length&&(Q=Q?.[X[Y]],Q!==void 0);)Y++;return Q||Z}function n$($){for(var J=!1,Z=0;Z<$.length;Z++){var Q=$.charCodeAt(Z);if(Q<=P||Q===W9||Q===a9||Q===V0||Q===u||Q===z0||Q===A0||Q===c0||Q===r0||Q===e||Q>=123){J=!0;break}}if(!J)return $;for(var X="",Z=0;Z<$.length;Z++){var Q=$.charCodeAt(Z);if(Q===a9&&Z+2<$.length){var Y=$.charCodeAt(Z+1),G=$.charCodeAt(Z+2);if((Y>=n&&Y<=s||Y>=c&&Y<=h$||Y>=U0&&Y<=b9)&&(G>=n&&G<=s||G>=c&&G<=h$||G>=U0&&G<=b9)){X+=$[Z]+$[Z+1]+$[Z+2],Z+=2;continue}}X+=encodeURI($[Z])}return X}function hZ(...$){return $.filter(Boolean).join(" ")}function mZ($,J){if(!J)return $;let Z=l9(J,$,void 0);return typeof Z=="string"?Z:typeof Z=="object"&&Z.component?Z.component:$}function CZ($,J){if(!J)return{};let Z=l9(J,$,void 0);return typeof Z=="object"&&Z.props?Z.props:{}}function M6($,J){for(var Z="",Q=0,X=$.length;Q<X;Q++){var Y=$[Q],G=Y.type;if(G===J.text||G===J.codeInline){var F=Y.text;F&&(Z+=F)}else G===J.textFormatted||G===J.link?Y.children&&(Z+=M6(Y.children,J)):G===J.image&&Y.alt&&(Z+=Y.alt)}return Z}var uZ=new Set(["title","textarea","style","xmp","iframe","noembed","noframes","script","plaintext"]),A$=/<(\/?)(title|textarea|style|xmp|iframe|noembed|noframes|script|plaintext)(\s|>|\/)/gi;function I$($){return uZ.has($.toLowerCase())}function pZ($){return A$.lastIndex=0,A$.test($)}function P$($){return A$.lastIndex=0,$.replace(A$,function(J,Z,Q,X){return"&lt;"+Z+Q+X})}var SJ=/^<([a-zA-Z][a-zA-Z0-9-]*)\s[^>]*>/,kJ=/^<[A-Z]/,t$=["script","pre","style","textarea"],W$=new Set(t$),dZ=/<(?:pre|script|style|textarea)\b/i,cZ=new Set(["table","thead","tbody","tfoot","tr","td","th"]),y6=new Uint8Array(128);(function(){for(var $=[e,O0,H0,_0,d0,z0,g0,V0,A0,u$,s9,R9,b9],J=0;J<$.length;J++)y6[$[J]]=1})();var A6=/([a-zA-Z_][a-zA-Z0-9_-]*)=(?:"([^"]*)"|'([^']*)')/g;function Z6($){return W$.has($)}function LJ($){return dZ.test($)}function S6($,J,Z){for(var Q=J,X=Z;Q<X&&($.charCodeAt(Q)===P||$.charCodeAt(Q)===N);)Q++;if(Q>=X)return!1;$.charCodeAt(Q)===P0&&Q++;for(var Y=0;Q<X;){for(;Q<X&&($.charCodeAt(Q)===P||$.charCodeAt(Q)===N);)Q++;if(Q>=X)break;if($.charCodeAt(Q)===P0&&Y>0){for(var G=Q+1;G<X&&($.charCodeAt(G)===P||$.charCodeAt(G)===N);)G++;if(G>=X)return!0}if($.charCodeAt(Q)===x0&&Q++,Q>=X||$.charCodeAt(Q)!==p)return!1;for(;Q<X&&$.charCodeAt(Q)===p;)Q++;for(Q<X&&$.charCodeAt(Q)===x0&&Q++,Y++;Q<X&&($.charCodeAt(Q)===P||$.charCodeAt(Q)===N);)Q++;if(Q<X)if($.charCodeAt(Q)===P0)Q++;else return!1}return Y>0}function M9($,J){if($.charCodeAt(J)!==V0)return null;let Z=J+1,Q=$.length,X=!1;$.charCodeAt(Z)===j0&&(Z++,X=!0);let Y=Z,G=$.charCodeAt(Z);if(!(G>=U0&&G<=D0||G>=c&&G<=a))return null;for(;Z<Q&&($.charCodeAt(Z)>=U0&&$.charCodeAt(Z)<=D0||$.charCodeAt(Z)>=c&&$.charCodeAt(Z)<=a||$.charCodeAt(Z)>=n&&$.charCodeAt(Z)<=s||$.charCodeAt(Z)===p);)Z++;let F=$.slice(Y,Z);if(!F)return null;let V=Z;for(;Z<Q&&($.charCodeAt(Z)===P||$.charCodeAt(Z)===N||$.charCodeAt(Z)===g);)Z++;let K=$.slice(V,Z);if(Z===V&&Z<Q){var q=$.charCodeAt(Z);if(q!==u&&q!==j0)return null}let W=Z,H={},z=!1;for(;Z<Q;){let S=$.charCodeAt(Z);if(S===u){let y=$.slice(W,Z);return{tag:F,attrs:H,selfClosing:!1,end:Z+1,rawAttrs:y,whitespaceBeforeAttrs:K,isClosing:X,hasSpaceBeforeSlash:z}}if(S===P||S===N||S===g){Z++;continue}if(S===j0&&Z+1<Q&&$.charCodeAt(Z+1)===u){let y=$.slice(W,Z);return z=Z>W&&$.charCodeAt(Z-1)===P,{tag:F,attrs:H,selfClosing:!0,end:Z+2,rawAttrs:y,whitespaceBeforeAttrs:K,isClosing:X,hasSpaceBeforeSlash:z}}var j=Z,O=$.charCodeAt(Z);if(!(O>=U0&&O<=D0||O>=c&&O<=a||O===H0||O===x0))return null;for(Z++;Z<Q;){var U=$.charCodeAt(Z);if(U>=U0&&U<=D0||U>=c&&U<=a||U>=n&&U<=s||U===H0||U===s0||U===x0||U===p)Z++;else break}for(var D=$.slice(j,Z);Z<Q&&($.charCodeAt(Z)===P||$.charCodeAt(Z)===N);)Z++;if($.charCodeAt(Z)!==d0){H[D]="";continue}for(Z++;Z<Q&&($.charCodeAt(Z)===P||$.charCodeAt(Z)===N);)Z++;var A=$.charCodeAt(Z);if(A===W9||A===D9){Z++;for(var B=Z;Z<Q&&$.charCodeAt(Z)!==A;)Z++;if(Z>=Q)return null;if(H[D]=$.slice(B,Z),Z++,Z<Q){var k=$.charCodeAt(Z);if(k!==P&&k!==N&&k!==g&&k!==u&&k!==j0)return null}}else if(A===B9){var I=1,B=Z;for(Z++;Z<Q&&I>0;){var U=$.charCodeAt(Z);U===B9?I++:U===V$&&I--,Z++}H[D]=$.slice(B,Z)}else{for(var B=Z;Z<Q;){var v=$.charCodeAt(Z);if(v===P||v===N||v===u||v===g||v===W9||v===D9||v===d0||v===V0||v===e)break;Z++}if(Z===B)return null;H[D]=$.slice(B,Z)}}return null}function y$($,J,Z){for(var Q=0,X=$.length,Y=!1;Q<X;){for(var G=$.indexOf(`
`,Q),F=G<0?X:G,V=Q,K=0;V<F&&K<4;)if($.charCodeAt(V)===P)K++,V++;else if($.charCodeAt(V)===N)K+=4,V++;else break;if(V>=F){Y=!1,Q=G<0?X:G+1;continue}if(K<4){var q=$.charCodeAt(V);if(q===e||q===_0){for(var W=q,H=0,z=V;z<F&&$.charCodeAt(z)===W;)H++,z++;if(H>=3){Y=!1;for(var j=G<0?X:G+1;j<X;){for(var O=j,U=0;O<X&&U<4;){var D=$.charCodeAt(O);if(D===P)U++,O++;else if(D===N)U+=4,O++;else break}if(U<4&&O<X&&$.charCodeAt(O)===W){for(var A=0;O<X&&$.charCodeAt(O)===W;)A++,O++;if(A>=H){for(;O<X&&($.charCodeAt(O)===P||$.charCodeAt(O)===N);)O++;if(O>=X||$.charCodeAt(O)===g){Q=O>=X?X:O+1;break}}}for(;j<X&&$.charCodeAt(j)!==g;)j++;j<X&&j++}j>=X&&(Q=X);continue}}}for(var B=V;B<F&&$.charCodeAt(B)===u;){B++,B<F&&$.charCodeAt(B)===P&&B++;for(var k=0;B<F&&k<4;)if($.charCodeAt(B)===P)k++,B++;else if($.charCodeAt(B)===N)k+=4,B++;else break;if(k>=4)break;Y=!1}if(!Y&&K<4&&B<F&&$.charCodeAt(B)===z0&&!(B+1<X&&$.charCodeAt(B+1)===r0)){var I=k6($,B,J);if(I){Q=I,Y=!1;continue}}var v=$.charCodeAt(V);if(v===K9&&K<4)Y=!1;else if(K<4&&(v===p||v===O0||v===H0)){for(var S=V,y=0;S<F;){var R=$.charCodeAt(S);if(R===v)y++;else if(R!==P&&R!==N)break;S++}Y=!(y>=3&&S>=F)}else Y=!0;Q=G<0?X:G+1}}function k6($,J,Z){let Q=$.length;if($.charCodeAt(J)!==z0)return null;let X=J+1<Q&&$.charCodeAt(J+1)===r0,Y=J+1;for(;Y<Q;){var G=$.charCodeAt(Y);if(G===c0){Y++;break}if(G===z0)return null;G===A0&&Y+1<Q&&Y++,Y++}if(Y>Q||$.charCodeAt(Y-1)!==c0)return null;let F=$.slice(J+1,Y-1);if(F.length>999)return null;let V=N$(F);if(!V||Y>=Q||$.charCodeAt(Y)!==x0)return null;Y++;let K=!1;for(;Y<Q;){let E=$.charCodeAt(Y);if(E===P||E===N)Y++;else if(E===g&&!K)K=!0,Y++;else break}if(X){let E=$.indexOf(`
`,Y),x=E<0?Q:E,T=$.slice(Y,x).trim();return Z[V]={target:T,title:void 0},E<0?Q:E+1}var q;if(Y<Q&&$.charCodeAt(Y)===V0){Y++;for(var W=Y;Y<Q&&$.charCodeAt(Y)!==u&&$.charCodeAt(Y)!==g;)$.charCodeAt(Y)===A0&&Y+1<Q&&Y++,Y++;if(Y>=Q||$.charCodeAt(Y)!==u)return null;q=$.slice(W,Y),Y++;for(var H=$.indexOf(`
`,Y),z=H<0?Q:H,j=Y;j<z&&($.charCodeAt(j)===P||$.charCodeAt(j)===N);)j++;if(j<z){if(j===Y)return null;var O=$.charCodeAt(j);if(O!==W9&&O!==D9&&O!==t0)return null}}else{for(var W=Y,U=0;Y<Q;){var G=$.charCodeAt(Y);if(G===t0)U++;else if(G===e0){if(U===0)break;U--}else{if(G===P||G===N||G===g)break;G===A0&&Y+1<Q&&Y++}Y++}if(q=$.slice(W,Y),!q)return null}for(;Y<Q&&($.charCodeAt(Y)===P||$.charCodeAt(Y)===N);)Y++;var D=$.indexOf(`
`,Y),A=D<0?Q:D,B,k=!1,I=Y,v=Y;if(Y===A&&Y<Q)for(v=Y+1;v<Q&&($.charCodeAt(v)===P||$.charCodeAt(v)===N);)v++;if(v<Q){var S=$.charCodeAt(v);if(S===W9||S===D9||S===t0){for(var y=S===t0?41:S,R=v+1,b=R;R<Q;){var w=$.charCodeAt(R);if(w===y){for(var L=R+1;L<Q&&($.charCodeAt(L)===P||$.charCodeAt(L)===N);)L++;(L>=Q||$.charCodeAt(L)===g)&&(B=$.slice(b,R),k=!0,I=L<Q?L+1:Q);break}if(w===A0&&R+1<Q){R+=2;continue}if(w===g&&R+1<Q&&$.charCodeAt(R+1)===g)break;R++}if(!k&&v===Y)return null}}if(k)return Z[V]||(Z[V]={target:Z$(q),title:B!==void 0?Z$(B):B}),I;for(;Y<A&&($.charCodeAt(Y)===P||$.charCodeAt(Y)===N);)Y++;return Y<A?null:(Z[V]||(Z[V]={target:Z$(q),title:B}),D<0?Q:D+1)}var J$=1,L6=2,Z0=4,E6=8,lZ=16,V9=32,x9=64,d=new Uint8Array(128);d[P]=J$,d[N]=J$,d[g]=J$|L6,d[Y9]=J$|L6,d[K9]=V9|Z0,d[u]=V9|Z0,d[p]=V9|x9|Z0,d[j9]=V9|Z0,d[O0]=V9|x9|Z0,d[H0]=V9|x9|Z0,d[e]=V9|x9|Z0,d[_0]=V9|x9|Z0,d[V0]=V9|x9|Z0,d[z0]=x9|Z0,d[g0]=x9|Z0,d[P0]=V9|Z0;for(let $=n;$<=s;$++)d[$]=lZ|V9;for(let $=c;$<=a;$++)d[$]=E6;for(let $=U0;$<=D0;$++)d[$]=E6;d[A0]=Z0,d[c0]=Z0,d[t0]=Z0,d[e0]=Z0,d[x0]=Z0,d[W9]=Z0,d[D9]=Z0,d[D$]=Z0,d[d0]=Z0,d[q6]=Z0,d[a9]=Z0,d[C$]=Z0,d[s0]=Z0,d[j0]=Z0,d[B$]=Z0,d[d9]=Z0,d[n9]=Z0,d[r0]=Z0,d[B9]=Z0,d[V$]=Z0;function v6($){if($.indexOf("[")<0&&$.indexOf("]")<0)return!1;for(var J=0;J<$.length;J++){if($.charCodeAt(J)===A0){J++;continue}if($.charCodeAt(J)===z0||$.charCodeAt(J)===c0)return!0}return!1}function N$($){var J=$.replace(/\s+/g," ").trim();return J.indexOf("\u1E9E")!==-1?J.replace(/\u1E9E/g,"ss").toLowerCase():J.toLowerCase()}function J6($){return $<l0?d[$]:$===z6?J$:0}function Z$($){return $.replace(/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,"$1")}function X0($,J){var Z=$.indexOf(`
`,J);return Z<0?$.length:Z}function r($,J){let Z=X0($,J);return Z<$.length?Z+1:Z}function q$($,J,Z){for(;J<Z;){let Q=$.charCodeAt(J);if(Q!==P&&Q!==N)break;J++}return J}function _6($,J){let Z=r($,J);for(;Z<$.length;){let Q=X0($,Z);if($9($,Z,Q))return Z;Z=r($,Z)}return $.length}function _9($,J,Z,Q){let X=0;for(;J+X<Z&&$.charCodeAt(J+X)===Q;)X++;return X}var Q0=0,$0=0;function v0($,J,Z){for(Q0=0,$0=0;J+$0<Z;){let Q=$.charCodeAt(J+$0);if(Q===N)Q0+=4-Q0%4;else if(Q===P)Q0++;else break;$0++}}function $9($,J,Z){return q$($,J,Z)>=Z}function g6($,J,Z,Q){let X=X0($,J);if(v0($,J,X),Q0>3)return null;let Y=J+$0;if($.charCodeAt(Y)!==K9)return null;let G=_9($,Y,X,35);if(G<1||G>6||(Y+=G,Y<X&&$.charCodeAt(Y)!==P&&$.charCodeAt(Y)!==N))return null;Y=q$($,Y,X);for(var F=X;F>Y&&$.charCodeAt(F-1)===P;)F--;for(var V=F;F>Y&&$.charCodeAt(F-1)===K9;)F--;if(F<V)if(F===Y||$.charCodeAt(F-1)===P)for(;F>Y&&$.charCodeAt(F-1)===P;)F--;else F=V;let K=$.slice(Y,F),q=u0(K,0,K.length,Z,Q),H=(Q?.slugify||i0)(K);return{node:{type:_.heading,level:G,children:q,id:H},end:r($,X)}}function g9($,J){let Z=X0($,J);if(v0($,J,Z),Q0>3)return null;let Q=J+$0,X=$.charCodeAt(Q);if(X!==p&&X!==O0&&X!==H0)return null;let Y=0;for(;Q<Z;){let G=$.charCodeAt(Q);if(G===X)Y++;else if(G!==P&&G!==N)return null;Q++}return Y<3?null:{node:{type:_.breakThematic},end:r($,Z)}}function oZ($,J,Z){let Q=X0($,J);if(v0($,J,Q),Q0>3)return null;let X=Q0,Y=$0,G=J+$0,F=$.charCodeAt(G);if(F!==e&&F!==_0)return null;let V=_9($,G,Q,F);if(V<3)return null;G+=V;let K=q$($,G,Q),q=Q;if(F===e){for(let R=K;R<Q;R++)if($.charCodeAt(R)===e)return null}for(;q>K&&($.charCodeAt(q-1)===P||$.charCodeAt(q-1)===N);)q--;let W=$.slice(K,q),H="",z="",j=W.indexOf(" ");j===-1?H=W:(H=W.slice(0,j),z=W.slice(j+1).trim()),H=Z$(H);var O=void 0;if(z){A6.lastIndex=0;for(var U;(U=A6.exec(z))!==null;)O||(O={}),O[U[1]]=U[2]!==void 0?U[2]:U[3]}let D=r($,Q),A=D,B=$.length;for(;A<$.length;){let R=X0($,A);if(v0($,A,R),Q0<4){let b=A+$0;var k=_9($,b,R,F);if(k>=V){let w=b+k;if($9($,w,R)){B=r($,R);break}}}A=r($,R)}var I;if(X===0)I=A>D&&$.charCodeAt(A-1)===g?$.slice(D,A-1):$.slice(D,A);else{I="";for(var v=D;v<A;){var S=X0($,v);v0($,v,S);var y=Math.min($0,X);I+=$.slice(v+y,S)+`
`,v=r($,S)}I.length>0&&I.charCodeAt(I.length-1)===g&&(I=I.slice(0,-1))}return{node:{type:_.codeBlock,lang:H||void 0,text:I,infoString:z||void 0,attrs:O},end:B}}function rZ($,J){let Z=X0($,J);if(v0($,J,Z),Q0<4)return null;let Q="",X=J;for(;X<$.length;){let z=X0($,X);if(v0($,X,z),$9($,X,z)){for(var Y=0,G=r($,z);G<$.length;){var F=X0($,G);if($9($,G,F)){Y++,G=r($,F);continue}if(v0($,G,F),Q0>=4){for(var V=0;V<=Y;V++)Q+=`
`;X=G;break}break}if(X!==G)break;continue}if(Q0<4)break;let j=0,O=0;var K=0;for(let U=X;U<z&&O<4;U++){if($.charCodeAt(U)===N){var q=4-O%4;O+q>4&&(K=O+q-4),O+=q}else O++;j++}var W="";if(K>0)for(var H=0;H<K;H++)W+=" ";W+=$.slice(X+j,z),Q+=W+`
`,X=r($,z)}for(;Q.length>0&&Q.charCodeAt(Q.length-1)===g;)Q=Q.slice(0,-1);for(;Q.length>0&&Q.charCodeAt(Q.length-1)===g;)Q=Q.slice(0,-1);return Q?{node:{type:_.codeBlock,text:Q},end:X}:null}function iZ($,J,Z,Q){let X=X0($,J);if(v0($,J,X),Q0>3)return null;let Y=J+$0;if($.charCodeAt(Y)!==u)return null;let G="",F=J,V,K=!1,q=!1,W=!1;for(;F<$.length;){let h=X0($,F);v0($,F,h);let R0=F+$0;if($.charCodeAt(R0)===u){let m=R0+1;var H=Q0+1,z=!1;if(m<h){var j=$.charCodeAt(m);j===P?(m++,H++,z=!0):j===N&&(z=!0)}for(var O="",U=!1,D=m;D<h;D++)if($.charCodeAt(D)===N){U=!0;break}if(U){var A=H;if(z&&m<h&&$.charCodeAt(m)===N){for(var B=4-A%4,k=0;k<B-1;k++)O+=" ";A+=B,m++}for(var I=m;I<h;I++)if($.charCodeAt(I)===N){for(var v=4-A%4,S=0;S<v;S++)O+=" ";A+=v}else O+=$[I],A++}else O=$.slice(m,h);if(!G&&!V){let F0=O.match(/^\[!([A-Z]+)\]\s*$/);if(F0){V=F0[1],F=r($,h);continue}}G+=O+`
`;var y=O.trimStart();y.startsWith("```")||y.startsWith("~~~")?W=!W:O.startsWith("    ")||O.startsWith("	")?W=!0:y.length>0&&!W&&(W=!1),q=y.length>0,F=r($,h)}else if(G&&!$9($,F,h)&&q){if(Q0<4){var R=F+$0,b=R<h?$.charCodeAt(R):0;if(b===K9||b===u||b===e||b===_0||b===V0||(b===p||b===O0||b===H0)&&g9($,F)||(b===p||b===O0||b===j9)&&R+1<h&&($.charCodeAt(R+1)===P||$.charCodeAt(R+1)===N))break;if(b>=n&&b<=s){for(var w=R;w<h&&$.charCodeAt(w)>=n&&$.charCodeAt(w)<=s;)w++;if(w<h&&($.charCodeAt(w)===s0||$.charCodeAt(w)===e0))break}}if(W)break;G+=$.slice(F,h)+`
`,K=!0,F=r($,h)}else break}if(!G&&!V)return null;var{inBlockQuote:L,f:E}=Z;Z.inBlockQuote=!0,K&&(Z.f=!0);let x=v9(G||"",Z,Q);Z.inBlockQuote=L,Z.f=E;let T={type:_.blockQuote,children:x};return V&&(T.alert=V),{node:T,end:F}}function x6($,J,Z){for(var Q=0,X=J;X<Z;X++)$.charCodeAt(X)===N?Q+=4-Q%4:Q++;return Q}function L9($,J,Z){if(v0($,J,Z),Q0>3)return null;var Q=J+$0;if(Q>=Z)return null;var X=$.charCodeAt(Q),Y=Q0,G=Q;if(X===p||X===O0||X===j9){if(G=Q+1,G<Z&&$.charCodeAt(G)!==P&&$.charCodeAt(G)!==N&&$.charCodeAt(G)!==g)return null}else if(X>=n&&X<=s){for(var F=Q;F<Z&&F-Q<9;){var V=$.charCodeAt(F);if(V<n||V>s)break;F++}if(F>Q&&F<Z){var K=$.charCodeAt(F);if(K===s0||K===e0){if(G=F+1,G<Z&&$.charCodeAt(G)!==P&&$.charCodeAt(G)!==N&&$.charCodeAt(G)!==g)return null}else return null}else return null}else return null;var q=G,W=x6($,J,G),H=0,z=q,j=W;if(q>=Z)return{ordered:X>=n&&X<=s,marker:X>=n&&X<=s?$[F]:$[Q],start:X>=n&&X<=s?parseInt($.slice(Q,F),10):void 0,contentStart:q,contentCol:W+1,markerCol:Y,isEmpty:!0};for(;z<Z&&($.charCodeAt(z)===P||$.charCodeAt(z)===N);){if($.charCodeAt(z)===N){var O=4-j%4;j+=O}else j++;z++,H++}var U=z>=Z,D=j-W;return U||D>4?(j=W+1,z=q+1,H=1):H===0&&(j=W+1,z=q,H=1),{ordered:X>=n&&X<=s,marker:X>=n&&X<=s?$[F]:$[Q],start:X>=n&&X<=s?parseInt($.slice(Q,F),10):void 0,contentStart:z,contentCol:j,markerCol:Y,isEmpty:U}}var b$=0;function aZ($,J,Z,Q){var X=0,Y=J;for(b$=0;Y<Z&&X<Q;){var G=$.charCodeAt(Y);if(G===N){var F=4-X%4;if(X+F>Q){b$=X+F-Q,Y++,X=Q;break}X+=F}else if(G===P)X++;else break;Y++}return Y}function I6($,J,Z,Q){var X=X0($,J),Y=L9($,J,X);if(!Y)return null;var G=[],F=J,V=Y.contentCol,K="",q=Y.isEmpty,W=!1,H=!1;if(!Y.isEmpty){for(var z=!1,j=Y.contentStart;j<X;j++)if($.charCodeAt(j)===N){z=!0;break}if(z){var O="",U=x6($,J,Y.contentStart),D=U-Y.contentCol;if(D>0)for(var A=0;A<D;A++)O+=" ";for(var B=Y.contentStart;B<X;B++)if($.charCodeAt(B)===N){for(var k=4-U%4,I=0;I<k;I++)O+=" ";U+=k}else O+=$[B],U++;K=O+`
`}else K=$.slice(Y.contentStart,X)+`
`}for(F=r($,X);F<$.length;){var v=X0($,F);v0($,F,v);var S=$.charCodeAt(F+$0);if(Q0<V&&(S===p||S===O0||S===H0)&&Q0<=3&&g9($,F))break;var y=L9($,F,v);if(y&&y.ordered===Y.ordered&&y.marker===Y.marker&&y.markerCol<V){G.push({contentCol:V,raw:K,hasBlankAfter:W,isEmpty:q}),W&&(H=!0),V=y.contentCol,q=y.isEmpty,W=!1,K=y.isEmpty?"":$.slice(y.contentStart,v)+`
`,F=r($,v);continue}if($9($,F,v)){K+=`
`,F=r($,v);for(var R=!1,b=0;b<K.length;b++){var w=K.charCodeAt(b);if(w!==g&&w!==Y9&&w!==P&&w!==N){R=!0;break}}if(q&&!R)if(F<$.length){var L=X0($,F),E=L9($,F,L);if(!E||E.ordered!==Y.ordered||E.marker!==Y.marker)break;W=!0}else break;if(F<$.length){var x=X0($,F);v0($,F,x);var T=$.charCodeAt(F+$0);if((T===p||T===O0||T===H0)&&Q0<=3&&g9($,F))break;var h=L9($,F,x);if(h&&h.ordered===Y.ordered&&h.marker===Y.marker&&h.markerCol<V){W=!0;continue}if(!$9($,F,x)&&Q0<V)break}continue}if(Q0>=V){var R0=aZ($,F,v,V);if(b$>0){for(var m="",F0=V,W0=0;W0<b$;W0++)m+=" ",F0++;for(var l=R0;l<v;l++)if($.charCodeAt(l)===N){for(var I0=4-F0%4,q0=0;q0<I0;q0++)m+=" ";F0+=I0}else m+=$[l],F0++;K+=m+`
`}else K+=$.slice(R0,v)+`
`;F=r($,v);continue}for(var N0=!1,J0=0;J0<K.length;J0++){var B0=K.charCodeAt(J0);if(B0!==g&&B0!==Y9&&B0!==P&&B0!==N){N0=!0;break}}if(!W&&N0&&!q){var Y0=F+$0,i=$.charCodeAt(Y0),C=i===K9||i===u||i===V0||i===e||i===_0||(i===p||i===O0||i===H0||i===j9)&&(g9($,F)!==null||L9($,F,v)!==null)||i>=n&&i<=s&&L9($,F,v)!==null;if(!C){K+=""+$.slice(Y0,v)+`
`,F=r($,v);continue}}break}if(G.push({contentCol:V,raw:K,hasBlankAfter:W,isEmpty:q}),G.length===0)return null;var M0=H;if(!M0)for(var k0=0;k0<G.length;k0++){if(G[k0].hasBlankAfter&&k0<G.length-1){M0=!0;break}if(!G[k0].isEmpty){for(var M=G[k0].raw,f=M.length,K0=0,w0=!1,t=!1,y0=!1,o=!1,T0=0,h0=0,p0=-1;K0<f;){var G0=M.indexOf(`
`,K0);if(G0<0&&(G0=f),o){v0(M,K0,G0);for(var f9=M.slice(K0+$0,G0),T9=0;T9<f9.length&&f9.charCodeAt(T9)===T0;)T9++;T9>=h0&&f9.slice(T9).trim()===""&&(o=!1),K0=G0<f?G0+1:f;continue}if($9(M,K0,G0)){p0>=0?y0=!0:w0&&(t=!0),K0=G0<f?G0+1:f;continue}if(v0(M,K0,G0),p0>=0){if(Q0>=p0){K0=G0<f?G0+1:f;continue}var h9=L9(M,K0,G0);if(h9&&h9.markerCol<p0&&h9.contentCol<=p0){K0=G0<f?G0+1:f;continue}if(h9){K0=G0<f?G0+1:f;continue}p0=-1,y0&&(t=!0,y0=!1)}var F9=M.slice(K0+$0,G0),m9=F9.charCodeAt(0);if((m9===e||m9===_0)&&Q0<=3){for(var I9=0;I9<F9.length&&F9.charCodeAt(I9)===m9;)I9++;if(I9>=3){if(t&&w0){M0=!0;break}o=!0,T0=m9,h0=I9,w0=!0,K0=G0<f?G0+1:f;continue}}var r9=Q0<=3?L9(M,K0,G0):null;if(r9&&w0){if(t){M0=!0;break}p0=r9.contentCol,y0=!1,K0=G0<f?G0+1:f,w0=!0;continue}if(t){M0=!0;break}w0=!0,K0=G0<f?G0+1:f}if(M0)break}}for(var O9=[],Q$=0;Q$<G.length;Q$++){for(var q9=G[Q$],Z9=q9.raw,X9=Z9.length;X9>0&&Z9.charCodeAt(X9-1)===g;)X9--;var m0=X9<Z9.length?Z9.slice(0,X9):Z9,J9=null;if(m0.length>=3&&m0.charCodeAt(0)===z0){var a0=m0[1];(a0===" "||a0==="x"||a0==="X")&&m0.charCodeAt(2)===c0&&(J9={type:_.gfmTask,completed:a0==="x"||a0==="X"},m0=m0.slice(3))}var L0;if(q9.isEmpty&&m0.trim()==="")L0=[];else if(M0){var X$=Z.inList;Z.inList=!0,L0=v9(m0,Z,Q),Z.inList=X$}else{var H9=Z.inList;if(Z.inList=!0,L0=v9(m0,Z,Q),Z.inList=H9,L0.length===1&&L0[0].type===_.paragraph)L0=L0[0].children;else{for(var Y$=[],C9=0;C9<L0.length;C9++)if(L0[C9].type===_.paragraph)for(var P9=L0[C9].children,Q9=0;Q9<P9.length;Q9++)Y$.push(P9[Q9]);else Y$.push(L0[C9]);L0=Y$}}J9?O9.push([J9,{type:_.text,text:" "},...L0]):O9.push(L0)}return{node:{type:Y.ordered?_.orderedList:_.unorderedList,start:Y.ordered?Y.start:void 0,items:O9},end:F}}var R$=new Set(["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]);function E9($,J,Z){let Q={};for(let[G,F]of Object.entries($)){let V=G,K=G.toLowerCase();if(K==="style"&&typeof F=="string"){let q={},W=[],H=0,z=0;for(let O=0;O<F.length;O++){let U=F.charCodeAt(O);U===t0?H++:U===e0?H--:U===B$&&H===0&&(W.push(F.slice(z,O)),z=O+1)}z<F.length&&W.push(F.slice(z));let j=!1;W.forEach(O=>{let U=O.indexOf(":");if(U===-1)return;let D=O.slice(0,U).trim(),A=O.slice(U+1).trim();if(D&&A){if(/url\s*\(\s*(javascript|vbscript|data:(?!image\/))/i.test(A)){j=!0;return}let B=D.indexOf("-")!==-1?D.replace(/-([a-z])/g,(k,I)=>I.toUpperCase()):D;q[B]=A}}),!j&&Object.keys(q).length>0&&(Q[V]=q)}else if((K==="href"||K==="src")&&Z?.sanitizer){let q=Z.sanitizer(F,J,K);q!==null&&(Q[V]=q)}else if(F==="")Q[V]=!0;else if(F.length>=2&&F.charCodeAt(0)===B9&&F.charCodeAt(F.length-1)===V$){var X=F.slice(1,-1);if(X.length>0){var Y=X.charCodeAt(0);if(Y===z0||Y===B9)try{Q[V]=JSON.parse(X);continue}catch{}}if(X==="true"){Q[V]=!0;continue}if(X==="false"){Q[V]=!1;continue}if(Z?.evalUnserializableExpressions)try{Q[V]=(0,eval)("("+X+")");continue}catch{}Q[V]=X}else Q[V]=F}return Q}function A9($,J,Z){let Q=J.length;var X=J.charCodeAt(0);X>=c&&X<=a&&(X+=G9);for(let G=Z;G<=$.length-Q;G++){var Y=$.charCodeAt(G);if(Y>=c&&Y<=a&&(Y+=G9),Y!==X)continue;let F=!0;for(let V=1;V<Q;V++){let K=$.charCodeAt(G+V),q=J.charCodeAt(V);if(K>=c&&K<=a&&(K+=G9),q>=c&&q<=a&&(q+=G9),K!==q){F=!1;break}}if(F)return G}return-1}function nZ($,J,Z){let Q=J.length;var X=J.charCodeAt(0);X>=c&&X<=a&&(X+=G9);for(let G=Math.min(Z,$.length-Q);G>=0;G--){var Y=$.charCodeAt(G);if(Y>=c&&Y<=a&&(Y+=G9),Y!==X)continue;let F=!0;for(let V=1;V<Q;V++){let K=$.charCodeAt(G+V),q=J.charCodeAt(V);if(K>=c&&K<=a&&(K+=G9),q>=c&&q<=a&&(q+=G9),K!==q){F=!1;break}}if(F)return G}return-1}var e$=-1;function f6($,J,Z){let Q=Z.toLowerCase(),X="<"+Q,Y="</"+Q,G=1,F=J,V=$.length;for(e$=-1;F<V&&G>0;){let W=A9($,X,F),H=A9($,Y,F);if(H===-1)return-1;if(W!==-1&&W<H){let z=M9($,W);z?(z.tag.toLowerCase()===Q&&!z.isClosing&&!z.selfClosing&&!e9(z.tag)&&G++,F=z.end):F=W+1}else{var K=H+Y.length,q=K<V?$.charCodeAt(K):62;if((q===u||q===P||q===N||q===g)&&(G--,G===0)){e$=H;let z=H+Y.length;for(;z<V&&$.charCodeAt(z)!==u;)z++;return z+1}F=H+1}}return-1}function T6($,J,Z,Q){if(Q.ignoreHTMLBlocks||Q.disableParsingRawHTML)return null;var X=X0($,J);if(v0($,J,X),Q0>3&&!Z.inHTML)return null;var Y=J+$0;if($.charCodeAt(Y)!==V0)return null;var G=$.indexOf(">",Y+1);if(G!==-1&&G<X){var F=$.slice(Y+1,G);if(/^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(F)||/^[^\s@]+@[^\s@]+$/.test(F))return null}var V=sZ($,Y);if(V>=1&&V<=5){var K=$.length;if(V===1){for(var q=$.length,W=0;W<t$.length;W++){var H=A9($,"</"+t$[W]+">",Y);H>=0&&H<q&&(q=H)}if(q<$.length){var z=$.indexOf(">",q);K=z>=0?r($,z+1):$.length}}else{var j=V===2?"-->":V===3?"?>":V===4?">":"]]>",O=$.indexOf(j,Y);O>=0&&(K=r($,O+j.length))}var U=$.slice(Y,K);if(V>=2)return{node:{type:_.htmlComment,text:U,raw:!0,endPos:K},end:K};var D="div",A=U.match(/^<\/?([a-zA-Z][a-zA-Z0-9-]*)/);A&&(D=A[1]);var B=M9($,Y),k={},I;B&&!B.isClosing&&(k=E9(B.attrs,D,Q),I=B.whitespaceBeforeAttrs+B.rawAttrs);var v=[],S=D.toLowerCase(),y="</"+S,R=A9(U,y,0),b=U,w="";if(B&&B.isClosing)for(b=U.slice(B.end-Y);b.length>0&&b.charCodeAt(b.length-1)===g;)b=b.slice(0,-1);else if(B&&!B.isClosing){var L=B.end-Y;if(R!==-1)for(b=U.slice(L),b.charCodeAt(0)===g&&(b=b.slice(1));b.length>0&&b.charCodeAt(b.length-1)===g;)b=b.slice(0,-1);else for(b=U;b.length>0&&b.charCodeAt(b.length-1)===g;)b=b.slice(0,-1);if(R!==-1){var E=U.slice(L,R);if(w=E.trim(),w){var{inline:x,inHTML:T}=Z;Z.inline=!0,Z.inHTML=!0,v=u0(w,0,w.length,Z,Q),Z.inline=x,Z.inHTML=T}}}var h=B?B.isClosing:!1;return{node:{type:_.htmlBlock,tag:D,attrs:k,e:I,children:v,a:b,text:w,d:!0,c:h,endPos:K,canInterruptParagraph:!0},end:K}}if(V===6||V===7){var R0=_6($,J),m=R0<$.length?R0:$.length,F0=$.slice(Y,m),W0=R0<$.length?r($,R0):$.length,l=M9($,Y);if(l){var I0=l.tag,q0=I0.toLowerCase(),N0=l.isClosing;if(N0){var J0=$.slice(l.end,m);return{node:{type:_.htmlBlock,tag:I0,attrs:{},children:[],a:J0,text:J0,d:!0,c:!0,endPos:m,canInterruptParagraph:V===6},end:W0}}var B0=Z.b||0,Y0=$.slice(Y,m),i=-1,C=-1;if(!l.selfClosing&&!e9(I0)&&B0<10){for(var M0="</"+q0,k0=l.end-Y,M=1,f=k0;f<Y0.length&&M>0;){var K0=A9(Y0,"<"+q0,f),w0=A9(Y0,M0,f);if(w0===-1)break;if(K0!==-1&&K0<w0){var t=K0+q0.length+1;if(t<Y0.length){var y0=Y0.charCodeAt(t);(y0===P||y0===N||y0===g||y0===u||y0===j0)&&M++}f=K0+1}else{var o=w0+M0.length;if(o<Y0.length){var T0=Y0.charCodeAt(o);if((T0===u||T0===P||T0===N||T0===g)&&(M--,M===0)){i=w0;for(var h0=o;h0<Y0.length&&Y0.charCodeAt(h0)!==u;)h0++;C=h0+1;break}}else if(M--,M===0){i=w0,C=Y0.length;break}f=w0+1}}var p0=!1;if(i===-1&&V===6&&!l.isClosing&&!cZ.has(q0)){var G0=$.slice(l.end),f9=A9(G0,M0,0);if(f9!==-1){var T9=G0.slice(0,f9);if(T9.indexOf(`

`)!==-1){for(var h9=l.end+f9,F9=h9+M0.length;F9<$.length&&$.charCodeAt(F9)!==u;)F9++;if(F9<$.length&&$.charCodeAt(F9)===u){var m9=F9+1,I9=X0($,m9);m=I9,W0=r($,I9),Y0=$.slice(Y,m),F0=$.slice(Y,m),i=h9-Y,C=m9-Y,p0=!0}}}}}var r9=l.rawAttrs.indexOf(`
`)!==-1||l.whitespaceBeforeAttrs.indexOf(`
`)!==-1,O9=!1;if(i!==-1){var Q$=Y0.slice(C).trim();O9=Q$.length===0}var q9=!1,Z9=m,X9=W0;if(i!==-1){var m0=Y+C,J9=X0($,m0-1);if(m0<J9){for(var a0=m0;a0<J9&&($.charCodeAt(a0)===P||$.charCodeAt(a0)===N);)a0++;if(a0<J9&&$.charCodeAt(a0)===V0){var L0=M9($,a0);L0&&!L0.isClosing&&(q9=!0,Z9=m0,X9=m0,O9=!0)}}if(!q9){var X$=r($,J9);if(X$<m){for(var H9=X$;H9<m&&($.charCodeAt(H9)===P||$.charCodeAt(H9)===N);)H9++;if(H9<m&&$.charCodeAt(H9)===V0){var Y$=M9($,H9);Y$&&(q9=!0,Z9=J9,X9=X$,O9=!0)}}}if(!q9&&Z.inHTML){q9=!0,Z9=J9,X9=r($,J9);var C9=$.slice(m0,J9).trim();O9=C9.length===0}}var P9=[],Q9="";if(i!==-1){Q9=Y0.slice(l.end-Y,i);var u9=Q9.trim();if(u9){var{inline:p6,inHTML:d6,b:c6}=Z;Z.inHTML=!0,Z.b=B0+1;var l6=q0==="p";if(l6)Z.inline=!0,P9=u0(u9,0,u9.length,Z,Q);else{var o6=Q9.indexOf(`

`)!==-1,r6=/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m.test(u9),Q6=/^<([a-z][^ >/\n\r]*) ?([^>]*?)>/im.test(u9),i6=o6||r6||Z.inHTML&&Q6;i6||Q6?(Z.inline=!1,P9=v9(Q9,Z,Q)):(Z.inline=!0,P9=u0(u9,0,u9.length,Z,Q))}Z.inline=p6,Z.inHTML=d6,Z.b=c6}}var X6=!1;if(V===6&&i!==-1&&!Z.inHTML&&!r9){var L$=Q9,a6=/<[a-zA-Z][^>]*>/.test(L$),n6=/\n\n/.test(L$)||/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m.test(L$);a6&&!n6&&(X6=!0)}var s6=Z.inHTML||V===7||r9||!O9||X6;if(s6){var n0;if(i!==-1&&q9){var Y6=!1;if(Z.inHTML&&C<Y0.length){for(var z$=C;z$<Y0.length&&Y0.charCodeAt(z$)!==g;)z$++;var E$=Y0.slice(C,z$).trim();Y6=E$.length>1&&E$.charCodeAt(0)===V0&&E$.charCodeAt(1)!==j0}n0=Y6?Y0.slice(l.end-Y):Q9}else(V===7||Z.inHTML)&&i!==-1?(n0=Y0.slice(l.end-Y),n0.charCodeAt(0)===g&&(n0=n0.slice(1))):q9?n0=$.slice(Y,Z9):r9?n0=F0:(n0=Y0.slice(l.end-Y),n0.charCodeAt(0)===g&&(n0=n0.slice(1)));return{node:{type:_.htmlBlock,tag:I0,attrs:E9(l.attrs,I0,Q),e:l.whitespaceBeforeAttrs+l.rawAttrs,children:P9,a:n0,text:n0,d:!0,c:!1,endPos:Z9,canInterruptParagraph:V===6},end:X9}}return{node:{type:_.htmlBlock,tag:I0,attrs:E9(l.attrs,I0,Q),e:l.whitespaceBeforeAttrs+l.rawAttrs,children:P9,a:p0?"":Q9,text:Q9,d:!1,c:!1,endPos:Z9,canInterruptParagraph:V===6},end:X9}}var U$=F0.match(/^<(\/?)([a-zA-Z][a-zA-Z0-9-]*)/),t6=U$?U$[2]:"div",K6=U$?U$[1]==="/":!1,g$=F0;if(K6){var G6=F0.indexOf(">");G6!==-1&&(g$=F0.slice(G6+1))}return{node:{type:_.htmlBlock,tag:t6,attrs:{},children:[],a:g$,text:g$,d:!0,c:K6,endPos:m,canInterruptParagraph:V===6},end:W0}}var E0=M9($,Y);if(!E0)return null;var N9=E0.tag,x$=N9.toLowerCase(),V6=N9.charCodeAt(0),O$=V6>=c&&V6<=a;if(!O$&&!R$.has(x$)&&!W$.has(x$)&&!x$.includes("-"))return null;if(E0.isClosing)return{node:{type:_.htmlSelfClosing,tag:N9,attrs:{},endPos:E0.end,c:!0,a:$.slice(Y,E0.end)},end:E0.end};var NJ=!0,p9=f6($,E0.end,N9),K$=[];if(p9!==-1){var e6=e$,H$=$.slice(E0.end,e6),G$=H$.trim();if(G$){var $Z=H$.indexOf(`

`)!==-1,ZZ=/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m.test(G$),JZ=/^<([a-z][^ >/\n\r]*) ?([^>]*?)>/im.test(G$),QZ=Z.inline,XZ=Z.inHTML,YZ=Z.b;Z.inHTML=!0,Z.b=(Z.b||0)+1,$Z||ZZ||JZ?(Z.inline=!1,K$=v9(H$,Z,Q)):(Z.inline=!0,K$=u0(G$,0,G$.length,Z,Q)),Z.inline=QZ,Z.inHTML=XZ,Z.b=YZ}var KZ=X0($,p9),GZ=$.slice(p9,KZ).trim(),f$=GZ?p9:r($,p9),F6=O$?$.slice(Y,p9):$.slice(Y,f$),VZ=O$?p9:f$;return{node:{type:_.htmlBlock,tag:N9,attrs:E9(E0.attrs,N9,Q),e:E0.whitespaceBeforeAttrs+E0.rawAttrs,children:K$,a:F6,text:O$?H$:F6,d:!0,c:!1,endPos:VZ,canInterruptParagraph:!1},end:f$}}var i9=_6($,E0.end),FZ=i9<$.length?r($,i9):i9,T$=$.slice(E0.end,i9);if(T$.trim()){var{inline:qZ,inHTML:WZ,b:zZ}=Z;Z.inline=!1,Z.inHTML=!0,Z.b=(Z.b||0)+1,K$=v9(T$,Z,Q),Z.inline=qZ,Z.inHTML=WZ,Z.b=zZ}var UZ=$.slice(E0.end,i9);return{node:{type:_.htmlBlock,tag:N9,attrs:E9(E0.attrs,N9,Q),e:E0.whitespaceBeforeAttrs+E0.rawAttrs,children:K$,a:UZ,text:T$,d:!0,c:!1,endPos:i9,canInterruptParagraph:!1},end:FZ}}function sZ($,J){if($.charCodeAt(J)!==V0)return 0;var Z=J+1,Q=$.length;if($.charCodeAt(Z)===g0&&$.charCodeAt(Z+1)===p&&$.charCodeAt(Z+2)===p)return 2;if($.charCodeAt(Z)===d9)return 3;if($.charCodeAt(Z)===g0){var X=$.charCodeAt(Z+1);if(X>=c&&X<=a)return 4;if($.slice(Z+1,Z+8)==="[CDATA[")return 5}for(var Y=$.charCodeAt(Z)===j0,G=Y?Z+1:Z,F=G;F<Q;){var V=$.charCodeAt(F);if(V>=c&&V<=a||V>=U0&&V<=D0||V>=n&&V<=s||V===p)F++;else break}if(F===G)return 0;var K=$.slice(G,F);if(W$.has(K.toLowerCase())){if(Y)return 0;var q=$.charCodeAt(F);return q===P||q===N||q===u||q===g||F>=Q?1:0}if(R$.has(K.toLowerCase())){if(Y){for(var W=F;W<Q&&($.charCodeAt(W)===P||$.charCodeAt(W)===N);)W++;return W<Q&&$.charCodeAt(W)===u?6:0}var H=F<Q?$.charCodeAt(F):-1;return H===P||H===N||H===u||H===g||H===j0||H===-1?6:0}if(Y){for(var U=F;U<Q&&($.charCodeAt(U)===P||$.charCodeAt(U)===N);)U++;if(U<Q&&$.charCodeAt(U)===u){var D=X0($,J),A=$.slice(U+1,D).trim();if(A==="")return 7}}else{var z=X0($,J),j=M9($,J);if(j&&j.end<=z){var O=$.slice(j.end,z).trim();if(O==="")return 7}}return 0}function P6($,J,Z){for(var Q=0,X=$.length;Q<X&&($.charCodeAt(Q)===P||$.charCodeAt(Q)===N);)Q++;for(;X>Q&&($.charCodeAt(X-1)===P||$.charCodeAt(X-1)===N);)X--;Q<X&&$.charCodeAt(Q)===P0&&Q++,X>Q&&$.charCodeAt(X-1)===P0&&(X-2<Q||$.charCodeAt(X-2)!==A0)&&X--;for(var Y=[],G=Q,F=!1,V=[],K=Q;K<X;){var q=$.charCodeAt(K);if(q===A0&&K+1<X){$.charCodeAt(K+1)===P0?(F||(F=!0,V=[]),V.push($.slice(G,K)),V.push("|"),K+=2,G=K):K+=2;continue}if(q===e){for(var W=0;K<X&&$.charCodeAt(K)===e;)W++,K++;for(var H=!1;K<X&&!H;){for(var z=0;K<X&&$.charCodeAt(K)===e;)z++,K++;z===W?H=!0:z===0&&K++}continue}if(q===P0){var j=F?(V.push($.slice(G,K)),V.join("")):$.slice(G,K);Y.push(j.trim()),K++,G=K,F=!1,V=[];continue}K++}var O=F?(V.push($.slice(G,X)),V.join("")):$.slice(G,X);return Y.push(O.trim()),Y.map(function(U){var D=U.indexOf("\\|")!==-1?U.replace(/\\\|/g,"|"):U;return u0(D,0,D.length,J,Z)})}function N6($,J,Z,Q){let X=X0($,J);var Y=$.indexOf("|",J);if(Y<0||Y>=X)return null;let G=r($,X);if(G>=$.length)return null;let F=X0($,G);if(!S6($,G,F))return null;let V=$.slice(J,X),K=$.slice(G,F);for(var q=[],W=0,H=K.length;W<H&&(K.charCodeAt(W)===P||K.charCodeAt(W)===N);)W++;for(W<H&&K.charCodeAt(W)===P0&&W++;W<H;){for(;W<H&&(K.charCodeAt(W)===P||K.charCodeAt(W)===N);)W++;if(W>=H||K.charCodeAt(W)===P0)break;var z=K.charCodeAt(W)===x0;for(z&&W++;W<H&&K.charCodeAt(W)===p;)W++;var j=W<H&&K.charCodeAt(W)===x0;for(j&&W++,q.push(z&&j?"center":j?"right":z?"left":null);W<H&&(K.charCodeAt(W)===P||K.charCodeAt(W)===N);)W++;W<H&&K.charCodeAt(W)===P0&&W++}let O=P6(V,Z,Q);if(q.length!==O.length)return null;let U=[],D=r($,F);for(;D<$.length;){let S=X0($,D),y=$.slice(D,S);if($9($,D,S))break;if(v0($,D,S),Q0<4){var A=$.charCodeAt(D+$0);if(A===u||A===K9||(A===p||A===O0||A===H0)&&g9($,D))break;if(A===e||A===_0){for(var B=D+$0,k=0;B<S&&$.charCodeAt(B)===A;)k++,B++;if(k>=3)break}}U.push(P6(y,Z,Q)),D=r($,S)}if((Q.streaming||Q.optimizeForStreaming)&&U.length===0)return null;for(var I=O.length,v=0;v<U.length;v++)if(U[v].length<I)for(;U[v].length<I;)U[v].push([]);else U[v].length>I&&(U[v].length=I);return{node:{type:_.table,header:O,cells:U,align:q},end:D}}function tZ($,J,Z){var Q=X0($,J);if(v0($,J,Q),Q0>3)return null;var X=J+$0;if($.charCodeAt(X)!==z0)return null;if(X+1<$.length&&$.charCodeAt(X+1)===r0){var Y=eZ($,X,Z);return Y||null}Z.refs||(Z.refs={});var G=k6($,X,Z.refs);return G===null?null:{node:{type:_.refCollection},end:G}}function eZ($,J,Z){var Q=$.length;if($.charCodeAt(J)!==z0||J+1>=Q||$.charCodeAt(J+1)!==r0)return null;for(var X=J+2,Y=X;X<Q&&$.charCodeAt(X)!==c0;){if($.charCodeAt(X)===g)return null;X++}if(X>=Q)return null;var G=("^"+$.slice(Y,X)).toLowerCase();if(X++,X>=Q||$.charCodeAt(X)!==x0)return null;for(X++;X<Q&&($.charCodeAt(X)===P||$.charCodeAt(X)===N);)X++;if(X<Q&&$.charCodeAt(X)===g)for(X++;X<Q&&($.charCodeAt(X)===P||$.charCodeAt(X)===N);)X++;var F=$.indexOf(`
`,X);F<0&&(F=Q);for(var V=$.slice(X,F).trim(),K=F<Q?F+1:Q;K<Q;){var q=X0($,K);if(v0($,K,q),Q0>=2&&!$9($,K,q))V+=`
`+$.slice(K,q),K=r($,q);else if($9($,K,q)){var W=r($,q);if(W<Q){var H=X0($,W);if(v0($,W,H),Q0>=2){V+=`
`,K=r($,q);continue}}break}else break}return Z.refs[G]||(Z.refs[G]={target:V,title:void 0}),{node:{type:_.footnote},end:K}}function $J($,J,Z,Q){let X=J,Y=0,G=0,F=-1;for(;X<$.length;){let w=F>=0?F:X0($,X);if(F=-1,$9($,X,w))break;if(v0($,X,w),Q0<4&&G>0&&!Z.f){let E=$.charCodeAt(X+$0);if(E===d0||E===p){let x=X+$0;for(;x<w&&$.charCodeAt(x)===E;)x++;for(;x<w&&($.charCodeAt(x)===P||$.charCodeAt(x)===N);)x++;if(x>=w){Y=E===d0?1:2,X=r($,w);break}}}G=w;let L=r($,w);if(L<$.length){if($.charCodeAt(L)===t9){var V=X0($,L);X=r($,V),G=V;continue}let E=X0($,L);if(F=E,v0($,L,E),Q0<4){let x=$.charCodeAt(L+$0);if(x===u){X=L;break}if(x===K9&&g6($,L,Z,Q)){X=L;break}if(x===e||x===_0){for(var K=L+$0,q=0;K<E&&$.charCodeAt(K)===x;)q++,K++;if(q>=3){X=L;break}}if(x===V0){var W=L+$0+1,H=W<E?$.charCodeAt(W):0,z=H===g0||H===d9;if(!z&&H===j0){for(var j=W+1,O=j;O<E&&($.charCodeAt(O)>=c&&$.charCodeAt(O)<=a||$.charCodeAt(O)>=U0&&$.charCodeAt(O)<=D0||$.charCodeAt(O)>=n&&$.charCodeAt(O)<=s||$.charCodeAt(O)===p);)O++;O>j&&(z=R$.has($.slice(j,O).toLowerCase()))}else if(!z){for(var U=W;U<E&&($.charCodeAt(U)>=c&&$.charCodeAt(U)<=a||$.charCodeAt(U)>=U0&&$.charCodeAt(U)<=D0||$.charCodeAt(U)>=n&&$.charCodeAt(U)<=s||$.charCodeAt(U)===p);)U++;if(U>W){var D=$.slice(W,U).toLowerCase();z=R$.has(D)||W$.has(D)}}if(z&&T6($,L,Z,Q)){X=L;break}}if(x===p||x===O0||x===j9){let T=L+$0+1;if(T<E&&($.charCodeAt(T)===P||$.charCodeAt(T)===N)){var A=q$($,T,E);if(A<E&&!g9($,L)){X=L;break}}}if(x>=n&&x<=s){let T=L+$0;for(;T<E&&$.charCodeAt(T)>=n&&$.charCodeAt(T)<=s;)T++;if(T<E&&($.charCodeAt(T)===s0||$.charCodeAt(T)===e0)&&T-(L+$0)===1&&$.charCodeAt(L+$0)===49){var B=T+1;if(B<E&&($.charCodeAt(B)===P||$.charCodeAt(B)===N)){var k=q$($,B,E);if(k<E){X=L;break}}}}if(x===P0){let T=r($,E);if(T<$.length){let h=X0($,T);if(S6($,T,h)){X=L;break}}}if((x===p||x===O0||x===H0)&&g9($,L)){if(x!==p){X=L;break}let T=0,h=L+$0;for(;h<E&&$.charCodeAt(h)===p;)T++,h++;for(;h<E&&($.charCodeAt(h)===P||$.charCodeAt(h)===N);)h++;if(h<E){X=L;break}}}}X=r($,w)}for(var I=Y?G:X;I>J&&($.charCodeAt(I-1)===g||$.charCodeAt(I-1)===Y9||$.charCodeAt(I-1)===P||$.charCodeAt(I-1)===N);)I--;for(var v=J;v<I&&($.charCodeAt(v)===P||$.charCodeAt(v)===N);)v++;if(v>=I)return null;for(var S=!1,y=v;y<I;y++)if($.charCodeAt(y)===t9){S=!0;break}var R=S?$.slice(v,I).replace(/\u001E/g,""):$.slice(v,I);if(!R)return null;let b=ZJ(R,0,R.length,Z,Q);if(Y){let L=(Q?.slugify||i0)(R);return{node:{type:_.heading,level:Y,children:b,id:L},end:X}}return{node:{type:_.paragraph,children:b},end:X}}function ZJ($,J,Z,Q,X){var Y=$.indexOf(`
`,J);if(Y<0||Y>=Z)return u0($,J,Z,Q,X);for(var G="",F=J,V=J;V<Z;){var K=$.charCodeAt(V);if(K===e){var q=S$($,V,Z);if(q>V){for(var W=!1,H=V;H<q;H++)if($.charCodeAt(H)===g){W=!0;break}W&&(G+=$.slice(F,V),G+=$.slice(V,q).replace(/\n/g," "),F=q),V=q;continue}}if(K===V0){var z=h6($,V,Z);if(z>V){V=z;continue}}if(K===g){var j=!1,O=0;if(V>J&&$.charCodeAt(V-1)===A0)j=!0,O=1;else{for(var U=0,D=V-1;D>=J&&$.charCodeAt(D)===P;)U++,D--;U>=2&&(j=!0,O=U)}for(j?(G+=$.slice(F,V-O),G+=""):G+=$.slice(F,V+1),V++;V<Z&&$.charCodeAt(V)===P;)V++;F=V;continue}V++}return F<Z&&(G+=$.slice(F,Z)),u0(G,0,G.length,Q,X)}function JJ($,J,Z){if($.charCodeAt(J)!==e)return null;let Q=_9($,J,Z,96),X=J+Q;for(;X<Z;){let Y=$.indexOf("`",X);if(Y<0||Y>=Z)return null;let G=_9($,Y,Z,96);if(G===Q){let F=$.slice(J+Q,Y);return F=F.replace(/\n/g," "),F.length>0&&F[0]===" "&&F[F.length-1]===" "&&F.trim().length>0&&(F=F.slice(1,-1)),{node:{type:_.codeInline,text:F},end:Y+G}}X=Y+G}return null}function S$($,J,Z){if($.charCodeAt(J)!==e)return J;let Q=_9($,J,Z,96),X=J+Q;for(;X<Z;){let Y=$.indexOf("`",X);if(Y<0||Y>=Z)return J;let G=_9($,Y,Z,96);if(G===Q)return Y+G;X=Y+G}return J}function h6($,J,Z){if($.charCodeAt(J)!==V0)return J;if(J+1<Z&&$.charCodeAt(J+1)===j0){let K=J+2;for(;K<Z&&$.charCodeAt(K)!==u;)K++;return K<Z?K+1:J}if(J+3<Z&&$.charCodeAt(J+1)===g0&&$.charCodeAt(J+2)===p&&$.charCodeAt(J+3)===p){let K=$.indexOf("-->",J+4);return K>=0?K+3:J}let Q=J+1,X=Q;for(;Q<Z;){let K=$.charCodeAt(Q);if(K>=c&&K<=a||K>=U0&&K<=D0||K>=n&&K<=s||K===p)Q++;else break}if(Q===X)return J;let Y=$.slice(X,Q).toLowerCase(),G=!1;for(;Q<Z;){let K=$.charCodeAt(Q);if(K===u){Q++;break}if(K===j0&&Q+1<Z&&$.charCodeAt(Q+1)===u){Q+=2,G=!0;break}if(K===W9||K===D9){var F=K;for(Q++;Q<Z&&$.charCodeAt(Q)!==F;)Q++;Q<Z&&Q++;continue}if(K===g)return J;Q++}if(G||e9(Y))return Q;let V=1;for(;Q<Z&&V>0;)if($.charCodeAt(Q)===V0)if(Q+1<Z&&$.charCodeAt(Q+1)===j0){let K=Q+2,q=K;for(;q<Z&&($.charCodeAt(q)>=c&&$.charCodeAt(q)<=a||$.charCodeAt(q)>=U0&&$.charCodeAt(q)<=D0);)q++;if($.slice(K,q).toLowerCase()===Y){for(;q<Z&&$.charCodeAt(q)!==u;)q++;if(q<Z&&q++,V--,V===0)return q}Q=q}else{let K=Q+1,q=K;for(;q<Z&&($.charCodeAt(q)>=c&&$.charCodeAt(q)<=a||$.charCodeAt(q)>=U0&&$.charCodeAt(q)<=D0);)q++;$.slice(K,q).toLowerCase()===Y&&V++,Q++}else Q++;return Q}function QJ($,J,Z,Q,X){if($.charCodeAt(J)!==_0||J+1>=Z||$.charCodeAt(J+1)!==_0)return null;let Y=J+2;for(;Y+1<Z;){let G=$.charCodeAt(Y);if(G===e){let F=S$($,Y,Z);if(F>Y){Y=F;continue}}if(G===_0&&$.charCodeAt(Y+1)===_0){let F=$.slice(J+2,Y),V=u0(F,0,F.length,Q,X);return{node:{type:_.textFormatted,tag:"del",children:V},end:Y+2}}G===A0&&Y+1<Z&&Y++,Y++}return null}function XJ($,J,Z,Q,X){if($.charCodeAt(J)!==d0||J+1>=Z||$.charCodeAt(J+1)!==d0)return null;let Y=J+2;for(;Y+1<Z;){let G=$.charCodeAt(Y);if(G===e){let F=S$($,Y,Z);if(F>Y){Y=F;continue}}if(G===d0&&$.charCodeAt(Y+1)===d0&&Y>J+2){let F=$.slice(J+2,Y),V=u0(F,0,F.length,Q,X);return{node:{type:_.textFormatted,tag:"mark",children:V},end:Y+2}}G===A0&&Y+1<Z&&Y++,Y++}return null}var YJ=/[\p{P}\p{S}]/u;function b6($,J,Z){return $<l0?!!(J6($)&Z0):YJ.test(J[Z])}function R6($,J,Z){return $<l0?!!(J6($)&J$):/\p{Zs}/u.test(J[Z])}function KJ($,J,Z){var Q=$.charCodeAt(J);if(Q!==O0&&Q!==H0)return null;var X=_9($,J,Z,Q);if(X===0)return null;var Y=J>0?$.charCodeAt(J-1):32,G=J+X<Z?$.charCodeAt(J+X):32,F=R6(Y,$,J-1),V=R6(G,$,J+X),K=J>0?b6(Y,$,J-1):!1,q=J+X<Z?b6(G,$,J+X):!1,W=!V&&(!q||F||K),H=!F&&(!K||V||q),z,j;return Q===O0?(z=W,j=H):(z=W&&(!H||K),j=H&&(!W||q)),{len:X,canOpen:z,canClose:j}}function GJ($,J,Z,Q){if(J.length!==0){for(var X=[],Y=0;Y<12;Y++)X[Y]=-1;for(var G=0;G<J.length;){var F=J[G];if(!F.active||!F.canClose){G++;continue}for(var V=F.ch===O0?0:1,K=V*6+F.len%3*2+(F.canOpen?1:0),q=X[K]!==void 0?X[K]:-1,W=-1,H=G-1;H>q;H--){var z=J[H];if(!(!z.active||z.ch!==F.ch||!z.canOpen)&&!((F.canOpen||z.canClose)&&(z.len+F.len)%3===0&&z.len%3!==0)){W=H;break}}if(W<0){X[K]=G-1,!F.canOpen&&(F.active=!1),G++;continue}var j=J[W],O=j.len>=2&&F.len>=2,U=O?2:1;j.len-=U,F.len-=U;var D=$[j.idx],A=$[F.idx];D.text=D.text.slice(0,D.text.length-U),A.text=A.text.slice(U);var B=j.idx+1,k=F.idx,I=$.slice(B,k),v={type:_.textFormatted,tag:O?"strong":"em",children:I};$.splice(B,k-B,v);for(var S=k-B-1,y=0;y<J.length;y++)J[y].idx>j.idx&&(J[y].idx-=S);for(var R=W+1;R<G;R++)J[R].active=!1;if(j.len===0&&(j.active=!1,D.text==="")){$.splice(j.idx,1);for(var b=0;b<J.length;b++)J[b].idx>j.idx?J[b].idx--:J[b].idx===j.idx&&(J[b].idx=-1)}if(F.len===0){F.active=!1;var w=F.idx;if(A.text===""){$.splice(w,1);for(var L=0;L<J.length;L++)J[L].idx>w?J[L].idx--:J[L].idx===w&&(J[L].idx=-1)}}else continue;G++}for(var E=0,x=0;x<$.length;x++){var T=$[x];if(T.type===_.text){var h=T;if(h.text==="")continue;if(E>0&&$[E-1].type===_.text){$[E-1].text+=h.text;continue}}$[E++]=T}$.length=E}}function w6($,J,Z,Q,X){let Y=$.charCodeAt(J)===g0,G=Y?J+1:J;if($.charCodeAt(G)!==z0)return null;var F=$.indexOf("]",G+1);if(F<0||F>=Z)return null;for(var V=G+1,K=-1,q=1;V<Z&&q>0;){var W=$.charCodeAt(V);if(W===A0&&V+1<Z){V+=2;continue}if(W===e){var H=S$($,V,Z);if(H>V){V=H;continue}}if(W===V0){var z=m6($,V,Z);if(z){V=z.end;continue}var j=h6($,V,Z);if(j>V){V=j;continue}}W===z0?q++:W===c0&&q--,V++}if(q!==0)return null;var O=V-1,U=$.slice(G+1,O),D=V<Z?$.charCodeAt(V):0,A=!1;if(D===t0){var B=!0;for(V++;V<Z&&($.charCodeAt(V)===P||$.charCodeAt(V)===g);)V++;var k="",I=V;if(V<Z&&$.charCodeAt(V)===V0){for(V++,I=V;I<Z&&$.charCodeAt(I)!==u;){if($.charCodeAt(I)===A0&&I+1<Z){I+=2;continue}if($.charCodeAt(I)===g){B=!1;break}I++}B&&(I>=Z||$.charCodeAt(I)!==u)&&(B=!1),B&&(k=$.slice(V,I),I++)}else if(B){for(var v=0;I<Z;){var S=$.charCodeAt(I);if(S===A0&&I+1<Z){I+=2;continue}if(S===t0)v++;else if(S===e0){if(v===0)break;v--}else if(S===P||S===g)break;I++}k=$.slice(V,I)}if(B){for(V=I;V<Z&&($.charCodeAt(V)===P||$.charCodeAt(V)===g);)V++;var y;if(V<Z){var R=$.charCodeAt(V);if(R===W9||R===D9||R===t0){var b=R===t0?41:R;V++;for(var w=V;V<Z&&$.charCodeAt(V)!==b;)$.charCodeAt(V)===A0&&V+1<Z&&V++,V++;V>=Z?B=!1:(y=$.slice(w,V),V++)}}if(B){for(;V<Z&&($.charCodeAt(V)===P||$.charCodeAt(V)===g);)V++;(V>=Z||$.charCodeAt(V)!==e0)&&(B=!1)}}if(B){V++,k=Z$(k),y!==void 0&&(y=Z$(y));var L=X?.sanitizer||k9,E=L(k,Y?"img":"a",Y?"src":"href"),x=E===null?null:k;if(Y){var T=u0(U,0,U.length,Q,X),h=w$(T);return{node:{type:_.image,target:x,alt:h,title:y},end:V}}else{var R0=Q.inAnchor;Q.inAnchor=!0;var m=R0?[{type:_.text,text:U}]:u0(U,0,U.length,Q,X);return Q.inAnchor=R0,!Q.inAnchor&&$6(m)?null:{node:{type:_.link,target:x,title:y,children:m},end:V}}}else V=O+1,A=!0}var F0="",W0=V;if(!A&&D===z0){var l=V+1;W0=l;for(var I0=!1;W0<Z&&$.charCodeAt(W0)!==c0;){if($.charCodeAt(W0)===A0&&W0+1<Z){W0+=2;continue}if($.charCodeAt(W0)===z0){I0=!0;break}W0++}if(I0||W0>=Z)return null;var q0=$.slice(l,W0);if(q0.trim())F0=N$(q0);else{if(v6(U))return null;F0=N$(U)}W0=W0+1}else{if(v6(U))return null;F0=N$(U)}var N0=Q.refs[F0];if(!N0)return null;if(Y)return{node:{type:_.image,target:N0.target,alt:w$(u0(U,0,U.length,Q,X)),title:N0.title},end:W0};var J0=Q.inAnchor;Q.inAnchor=!0;var m=J0?[{type:_.text,text:U}]:u0(U,0,U.length,Q,X);return Q.inAnchor=J0,!Q.inAnchor&&$6(m)?null:{node:{type:_.link,target:N0.target,title:N0.title,children:m},end:W0}}function m6($,J,Z){if($.charCodeAt(J)!==V0)return null;for(var Q=J+1;Q<Z;){var X=$.charCodeAt(Q);if(X===u)break;if(X===P||X===g||X===Y9||X===V0)return null;Q++}if(Q>=Z||$.charCodeAt(Q)!==u)return null;var Y=$.slice(J+1,Q),G=Y.match(/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^\x00-\x20]*)$/);return G?{node:{type:_.link,target:Y,children:[{type:_.text,text:Y}]},end:Q+1}:Y.indexOf("@")!==-1&&/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(Y)?{node:{type:_.link,target:"mailto:"+Y,children:[{type:_.text,text:Y}]},end:Q+1}:null}function VJ($,J,Z,Q){if($.charCodeAt(J)!==z0||J+1>=Z||$.charCodeAt(J+1)!==r0)return null;let X=J+2;for(;X<Z&&$.charCodeAt(X)!==c0&&$.charCodeAt(X)!==g;)X++;if(X>=Z||$.charCodeAt(X)!==c0)return null;let Y=$.slice(J+2,X);return Y?{node:{type:_.footnoteReference,target:"#"+i0(Y),text:Y},end:X+1}:null}function FJ($,J,Z,Q){if(Q.disableBareUrls)return null;var X="",Y=!1,G=$.charCodeAt(J);if(G===s9||G===72?J+8<=Z&&$.charCodeAt(J+1)===j$&&$.charCodeAt(J+2)===j$&&$.charCodeAt(J+3)===m$&&($.charCodeAt(J+4)===W6&&$.charCodeAt(J+5)===x0&&$.charCodeAt(J+6)===j0&&$.charCodeAt(J+7)===j0?X="https://":$.charCodeAt(J+4)===x0&&$.charCodeAt(J+5)===j0&&$.charCodeAt(J+6)===j0&&(X="http://")):G===b9||G===70?J+6<=Z&&$.charCodeAt(J+1)===j$&&$.charCodeAt(J+2)===m$&&$.charCodeAt(J+3)===x0&&$.charCodeAt(J+4)===j0&&$.charCodeAt(J+5)===j0&&(X="ftp://"):(G===R9||G===87)&&J+4<=Z&&$.charCodeAt(J+1)===R9&&$.charCodeAt(J+2)===R9&&$.charCodeAt(J+3)===s0&&(X="www.",Y=!0),!X)return null;let F=J+X.length;for(;F<Z;){let v=$.charCodeAt(F);if(v===P||v===g||v===N||v===Y9||v===V0||v===u)break;F++}for(var V=0,K=0,q=J;q<F;q++){var W=$.charCodeAt(q);W===t0?V++:W===e0&&K++}let H=F;for(;H>J+X.length;){let v=$.charCodeAt(H-1);if(v===s0||v===C$||v===x0||v===g0||v===d9||v===e0){if(v===e0){if(V>=K)break;K--}H--}else if(v===B$){for(var z=H-2;z>J&&($.charCodeAt(z)>=c&&$.charCodeAt(z)<=a||$.charCodeAt(z)>=U0&&$.charCodeAt(z)<=D0||$.charCodeAt(z)>=n&&$.charCodeAt(z)<=s);)z--;z>=J&&$.charCodeAt(z)===D$?H=z:H--}else break}if(H<=J+X.length)return null;var j=J+(Y?4:X.length),O=$.indexOf("/",j);if((O<0||O>H)&&(O=H),Y&&$.indexOf(".",j)===-1)return null;for(var U=-1,D=-1,A=O-1;A>=j;A--)if($.charCodeAt(A)===s0)if(U<0)U=A;else{D=A;break}for(var B=D>=0?D+1:j,A=B;A<O;A++)if($.charCodeAt(A)===H0)return null;var k=$.slice(J,H),I=Y?"http://"+k:k;return{node:{type:_.link,target:I,children:[{type:_.text,text:k}]},end:H}}function qJ($,J,Z,Q){if(Q.disableBareUrls)return null;for(var X=J,Y=X;X<Z;){var G=$.charCodeAt(X);if(G>=c&&G<=a||G>=U0&&G<=D0||G>=n&&G<=s||G===s0||G===g0||G===K9||G===36||G===a9||G===D$||G===D9||G===O0||G===j9||G===j0||G===d0||G===d9||G===r0||G===H0||G===e||G===B9||G===P0||G===V$||G===_0||G===p)X++;else break}if(X===Y||X>=Z||$.charCodeAt(X)!==n9)return null;X++;for(var F=X,V=-1;X<Z;){var G=$.charCodeAt(X);if(G>=c&&G<=a||G>=U0&&G<=D0||G>=n&&G<=s)X++;else if((G===p||G===H0)&&X>F)X++;else if(G===s0){if(X===F)break;var K=$.charCodeAt(X-1);if(K===p||K===H0)break;if(X+1<Z){var q=$.charCodeAt(X+1);if(q>=c&&q<=a||q>=U0&&q<=D0||q>=n&&q<=s)V=X,X++;else break}else break}else break}if(V<0)return null;var W=$.charCodeAt(X-1);if(!(W>=c&&W<=a||W>=U0&&W<=D0||W>=n&&W<=s)||X<=V+1)return null;for(var H=-1,z=V-1;z>=F;z--)if($.charCodeAt(z)===s0){H=z;break}for(var j=H>=0?H+1:F,z=j;z<X;z++)if($.charCodeAt(z)===H0)return null;var O=$.slice(J,X);return{node:{type:_.link,target:"mailto:"+O,children:[{type:_.text,text:O}]},end:X}}function $6($){for(var J=0;J<$.length;J++)if($[J].type===_.link||"children"in $[J]&&Array.isArray($[J].children)&&$6($[J].children))return!0;return!1}function w$($){for(var J="",Z=0;Z<$.length;Z++){var Q=$[Z];Q.type===_.text?J+=Q.text:Q.type===_.breakLine?J+=" ":Q.type===_.codeInline?J+=Q.text:"children"in Q&&Array.isArray(Q.children)?J+=w$(Q.children):Q.type===_.image?J+=Q.alt||"":Q.type===_.link&&(J+=w$(Q.children))}return J}function o9($){let J=$.includes("&")?a$($):$;return{type:_.text,text:J}}function WJ($,J,Z,Q,X){if($.charCodeAt(J)!==V0)return null;var Y=J+1;if(Y>=Z)return null;var G=$.charCodeAt(Y);if(G===g0&&Y+1<Z&&$.charCodeAt(Y+1)===p&&Y+2<Z&&$.charCodeAt(Y+2)===p){var F=Y+3;if(F<Z&&$.charCodeAt(F)===u)return{node:{type:_.htmlComment,text:"",endsWithGreaterThan:!0},end:F+1};if(F+1<Z&&$.charCodeAt(F)===p&&$.charCodeAt(F+1)===u)return{node:{type:_.htmlComment,text:"-",endsWithGreaterThan:!0},end:F+2};var V=$.indexOf("-->",F);return V!==-1&&V<=Z-3?{node:{type:_.htmlComment,text:$.slice(J+4,V)},end:V+3}:null}if(G===d9){var K=$.indexOf("?>",Y+1);return K!==-1&&K<Z?{node:{type:_.htmlSelfClosing,tag:"?",attrs:{},a:$.slice(J,K+2)},end:K+2}:null}if(G===g0&&Y+1<Z){var q=$.charCodeAt(Y+1);if(q===z0&&$.slice(Y+1,Y+8)==="[CDATA["){var W=$.indexOf("]]>",Y+8);return W!==-1&&W<Z?{node:{type:_.htmlSelfClosing,tag:"![CDATA[",attrs:{},a:$.slice(J,W+3)},end:W+3}:null}if(q>=c&&q<=a){var H=$.indexOf(">",Y+2);return H!==-1&&H<Z?{node:{type:_.htmlSelfClosing,tag:"!"+$.slice(Y+1,H),attrs:{},a:$.slice(J,H+1)},end:H+1}:null}}if(G===j0){var z=Y+1;if(z>=Z)return null;var j=$.charCodeAt(z);if(!(j>=c&&j<=a||j>=U0&&j<=D0))return null;for(z++;z<Z;){var O=$.charCodeAt(z);if(O>=c&&O<=a||O>=U0&&O<=D0||O>=n&&O<=s||O===p)z++;else break}for(;z<Z&&($.charCodeAt(z)===P||$.charCodeAt(z)===N||$.charCodeAt(z)===g);)z++;if(z<Z&&$.charCodeAt(z)===u){var U=$.slice(Y+1,z).trim();return{node:{type:_.htmlSelfClosing,tag:U,attrs:{},a:$.slice(J,z+1),c:!0},end:z+1}}return null}if(!(G>=c&&G<=a||G>=U0&&G<=D0))return null;var D=M9($,J);if(!D)return null;var A=D.tag,B=A.toLowerCase(),k=D.selfClosing;if(k||e9(A))return{node:{type:_.htmlSelfClosing,tag:A,attrs:E9(D.attrs,A,X),a:$.slice(J,D.end)},end:D.end};var I=W$.has(B),v=f6($.slice(0,Z),D.end,A);if(v===-1)return{node:{type:_.htmlSelfClosing,tag:A,attrs:E9(D.attrs,A,X),a:$.slice(J,D.end)},end:D.end};var S=nZ($,"</"+B,v),y=$.slice(D.end,S),R=[];if(I)y.trim()&&(R=[{type:_.text,text:y}]);else{var b=y.trim();if(b){var{inAnchor:w,inline:L}=Q;B==="a"&&(Q.inAnchor=!0);var E=b.indexOf(`

`)!==-1||/^#{1,6}\s/.test(b);E?(Q.inline=!1,R=v9(b,Q,X)):R=u0(b,0,b.length,Q,X),Q.inAnchor=w,Q.inline=L}}return{node:{type:_.htmlBlock,tag:A,attrs:E9(D.attrs,A,X),e:D.rawAttrs,children:R,text:y,d:!1},end:v}}var zJ=200,$$=0;function u0($,J,Z,Q,X){if($$++,$$>zJ)return $$--,[{type:_.text,text:$.slice(J,Z)}];let Y=Q;if(X.streaming||X.optimizeForStreaming){let t=function(o,T0){for(var h0=1,p0=T0+1;p0<o.length;p0++){var G0=o.charCodeAt(p0);if(G0===z0)h0++;else if(G0===c0&&(h0--,h0===0))return p0}return-1},M=$.slice(J,Z),f=M;for(var G=0,F=0,V=0,K=0,q=0,W=-1,H=-1,z=-1,j=-1,O=-1,U=0;U<M.length;U++){var D=M.charCodeAt(U);D===O0?U+1<M.length&&M.charCodeAt(U+1)===O0?(G++,W=U,U++):(F++,H=U):D===H0?U+1<M.length&&M.charCodeAt(U+1)===H0?(V++,z=U,U++):(K++,j=U):D===_0&&U+1<M.length&&M.charCodeAt(U+1)===_0&&(q++,O=U,U++)}var A=[];q%2===1&&O>=0&&A.push([O,2]),V%2===1&&z>=0&&A.push([z,2]),K%2===1&&j>=0&&A.push([j,1]),G%2===1&&W>=0&&A.push([W,2]),F%2===1&&H>=0&&A.push([H,1]),A.sort(function(o,T0){return T0[0]-o[0]});for(var B=0;B<A.length;B++){var k=A[B][0],I=A[B][1];M=M.slice(0,k)+M.slice(k+I)}let K0=0,w0=-1;for(let o=0;o<M.length;o++)M.charCodeAt(o)===e&&(K0++,w0=o);if(K0%2===1&&w0!==-1){let o=!1,T0=-1,h0=0;for(;h0<M.length;)M.charCodeAt(h0)===e&&(o?(o=!1,T0=-1):(T0=h0,o=!0)),h0++;o&&T0!==-1&&(M=M.slice(0,T0))}for(var v=!0;v;){v=!1;for(var S=-1,y=-1,R=-1,b=!1,w=0;w<M.length;w++){var L=M.charCodeAt(w);if(L===z0&&(w===0||M.charCodeAt(w-1)!==A0)){var E=w>0&&M.charCodeAt(w-1)===g0,x=E?w-1:w,T=t(M,w);if(T===-1)S=x,b=E,y=w+1,R=M.length;else{var h=T+1;if(h>=M.length)S=x,b=E,y=w+1,R=T;else if(M.charCodeAt(h)===t0){var R0=M.indexOf(")",h+1);R0===-1?(S=x,b=E,y=w+1,R=T,w=M.length):w=R0}else if(M.charCodeAt(h)===z0){var m=M.indexOf("]",h+1);m===-1?(S=x,b=E,y=w+1,R=T,w=M.length):w=m}else w=T}}}if(S>=0){var F0=b?"":M.slice(y,R);M=M.slice(0,S)+F0,v=!0}}let y0=M.match(/<([A-Z][A-Za-z0-9]*)(?:\s[^>]*)?>([^<]*)$/);if(y0&&y0.index!==void 0){for(var W0=!1,l=0,I0=0;I0<y0.index;I0++)M.charCodeAt(I0)===e&&l++;if(W0=l%2===1,!W0){let o=y0[1];A9(M,"</"+o,0)===-1&&(M=M.replace(/<[A-Z][A-Za-z0-9]*(?:\s[^>]*)?>([^<]*)$/,"$1"))}}M!==f&&($=$.slice(0,J)+M,Z=J+M.length)}let q0=[];var N0=[];let J0=J;var B0=X.disableAutoLink||X.disableBareUrls||Y.inAnchor?-1:$.indexOf("@",J);for(B0>=Z&&(B0=-1);J<Z;){let M=$.charCodeAt(J),f=null;if(M===e){if(f=JJ($,J,Z),!f){var Y0=_9($,J,Z,e);J+=Y0-1}}else if(M===O0||M===H0){var i=KJ($,J,Z);if(i){if(i.canOpen||i.canClose){J>J0&&q0.push(o9($.slice(J0,J)));var C=$.slice(J,J+i.len),M0=o9(C);N0.push({idx:q0.length,ch:M,len:i.len,canOpen:i.canOpen,canClose:i.canClose,active:!0}),q0.push(M0),J+=i.len,J0=J;continue}J+=i.len-1}}else M===_0?f=QJ($,J,Z,Y,X):M===d0?f=XJ($,J,Z,Y,X):M===z0?(J+1<Z&&$.charCodeAt(J+1)===r0&&(f=VJ($,J,Z,Y)),f||(f=w6($,J,Z,Y,X))):M===g0&&J+1<Z&&$.charCodeAt(J+1)===z0?f=w6($,J,Z,Y,X):M===V0?(f=m6($,J,Z),!f&&!X.disableParsingRawHTML&&!X.ignoreHTMLBlocks&&(f=WJ($,J,Z,Y,X))):(M===s9||M===R9||M===b9)&&!Y.inAnchor&&!X.disableAutoLink&&(J===0||$.charCodeAt(J-1)!==V0)&&(f=FJ($,J,Z,X));if(!f&&B0>=0&&B0-J<=64&&!Y.inAnchor&&!X.disableAutoLink&&!X.disableBareUrls&&(M>=c&&M<=a||M>=U0&&M<=D0||M>=n&&M<=s)&&(f=qJ($,J,Z,X),!f&&J>=B0&&(B0=$.indexOf("@",J+1),B0>=Z&&(B0=-1))),M===u$){J>J0&&q0.push(o9($.slice(J0,J))),q0.push({type:_.breakLine}),J++,J0=J;continue}if(f)J>J0&&q0.push(o9($.slice(J0,J))),q0.push(f.node),J=f.end,J0=J;else{if(M===A0&&J+1<Z){let K0=$.charCodeAt(J+1);if(J6(K0)&Z0){J>J0&&q0.push(o9($.slice(J0,J))),q0.push(o9($[J+1])),J+=2,J0=J;continue}}if(J++,B0<0||B0-J>64)for(;J<Z;){var k0=$.charCodeAt(J);if(k0<l0&&!y6[k0])J++;else break}}}if(Z>J0){let M=$.slice(J0,Z);(X.streaming||X.optimizeForStreaming)&&(M=M.replace(/\*\*([^*]+)$/,"$1"),M.match(/\*[^*]+$/)&&(M=M.replace(/\*([^*]+)$/,"$1")),M=M.replace(/__([^_]+)$/,"$1"),M.match(/_[^_]+$/)&&(M=M.replace(/_([^_]+)$/,"$1")),M=M.replace(/~~([^~]+)$/,"$1"),M=M.replace(/\[([^\]]+)$/,"$1"),M=M.replace(/\[([^\]]+)\]\([^)]*$/,"$1")),M&&q0.push(o9(M))}return N0.length>0&&GJ(q0,N0,Q,X),$$--,q0}var UJ=500;function v9($,J,Z){var Q=J.g||0;if(Q>UJ)return[{type:_.text,text:$}];J.g=Q+1;let X=J;if(Z.streaming||Z.optimizeForStreaming){var Y=$.length;Y>0&&$.charCodeAt(Y-1)===g&&Y--;for(var G=Y;G>0&&$.charCodeAt(G-1)!==g;)G--;if(G>0&&$.charCodeAt(G)===P0){for(var F=!0,V=G;V<Y;V++){var K=$.charCodeAt(V);if(K!==P&&K!==N&&K!==p&&K!==x0&&K!==P0){F=!1;break}}if(F){for(var q=G-1;q>0&&$.charCodeAt(q-1)!==g;)q--;$.charCodeAt(q)===P0&&($=$.slice(0,q).trimEnd())}}var W=$.trim(),H=W.lastIndexOf(`
`),z=H===-1?W:W.slice(H+1);if(z.length>0&&z.charCodeAt(0)===P0){for(var j=!1,O=!1,U=1;U<z.length;U++){var D=z.charCodeAt(U);D===P0&&(j=!0),D===p&&(O=!0)}j&&O&&($=H===-1?"":$.slice(0,$.lastIndexOf(z)).trimEnd())}for(var A=-1,B=-1,k=-1,I=$.length-1;I>=0;I--)if($.charCodeAt(I)===V0){var v=I+1<$.length?$.charCodeAt(I+1):0;if(v>=c&&v<=a||v>=U0&&v<=D0){for(var S=I+2;S<$.length;){var y=$.charCodeAt(S);if(y>=c&&y<=a||y>=U0&&y<=D0||y>=n&&y<=s)S++;else break}for(var R=S;R<$.length&&$.charCodeAt(R)!==u;)R++;if(R<$.length){for(var b=!1,w=R+1;w<$.length;w++)if($.charCodeAt(w)===V0){b=!0;break}b||(A=I,B=S,k=R+1)}}break}if(A>=0){for(var L=0,E=0;E<A;E++)$.charCodeAt(E)===e&&L++;if(L%2===0){var x=$.slice(A+1,B);A9($,"</"+x,0)===-1&&($=$.slice(0,A)+$.slice(k))}}var T=$.length;if(T>0){for(var h=$.lastIndexOf(`
`),R0=h===-1?0:h+1,m=T,F0=R0,W0=0;F0<m&&$.charCodeAt(F0)===P&&W0<3;)F0++,W0++;if(F0<m){var l=$.charCodeAt(F0),I0=!1;if(l===O0||l===p||l===j9){var q0=F0+1;if(q0>=m||$.charCodeAt(q0)===P||$.charCodeAt(q0)===N){for(var N0=q0;N0<m&&($.charCodeAt(N0)===P||$.charCodeAt(N0)===N);)N0++;N0>=m&&(I0=!0)}}else if(l>=n&&l<=s){for(var J0=F0;J0<m&&$.charCodeAt(J0)>=n&&$.charCodeAt(J0)<=s;)J0++;if(J0<m&&($.charCodeAt(J0)===s0||$.charCodeAt(J0)===e0)){var B0=J0+1;if(B0>=m||$.charCodeAt(B0)===P||$.charCodeAt(B0)===N){for(var Y0=B0;Y0<m&&($.charCodeAt(Y0)===P||$.charCodeAt(Y0)===N);)Y0++;Y0>=m&&(I0=!0)}}}I0&&($=$.slice(0,R0).trimEnd())}}}if(J.inline)return u0($,0,$.length,J,Z);let i=[],C=0,M0=$.length;if(C===0&&$.startsWith("---")){let t=r$($);if(t&&t.hasValidYaml){if(Z.preserveFrontmatter!==!1){let y0=$.slice(0,t.endPos).trimEnd();i.push({type:_.frontmatter,text:y0})}C=t.endPos}}for(;C<M0;){for(var k0=$.indexOf(`
`,C),M=k0<0?M0:k0;C<M0&&$9($,C,M);)C=M<M0?M+1:M,C<M0&&(k0=$.indexOf(`
`,C),M=k0<0?M0:k0);if(C>=M0)break;$.charCodeAt(C),v0($,C,M);let t=null;if($.charCodeAt(C)!==t9&&Q0>=4&&!J.inHTML)t=rZ($,C);else if($.charCodeAt(C)!==t9){let y0=C+$0,o=$.charCodeAt(y0);o===K9?t=g6($,C,J,Z):o===u?t=iZ($,C,J,Z):o===e||o===_0?t=oZ($,C,J):o===p||o===O0||o===H0?(t=g9($,C),!t&&(t=I6($,C,J,Z))):o===j9||o>=n&&o<=s?t=I6($,C,J,Z):o===V0?t=T6($,C,J,Z):o===P0?t=N6($,C,J,Z):o===z0&&(t=tZ($,C,J))}if(!t){for(var f=!1,K0=C;K0<M;K0++)if($.charCodeAt(K0)===P0){f=!0;break}f&&(t=N6($,C,J,Z))}if(t||(t=$J($,C,J,Z)),t)t.node.type!==_.refCollection&&i.push(t.node),C=t.end;else{var w0=$.indexOf(`
`,C);C=w0<0?M0:w0+1}}return J.g=Q,i}function OJ($,J){$$=0,$.charCodeAt(0)===65279&&($=$.slice(1)),$=_$($);let Z={inline:!1,inAnchor:!1,inHTML:!1,inList:!1,inBlockQuote:!1,refs:{}},Q={...J,slugify:J?.slugify?Y=>J.slugify(Y,i0):i0,sanitizer:J?.sanitizer||k9,tagfilter:J?.tagfilter!==!1};y$($,Z.refs,Q);let X=v9($,Z,Q);return Z.refs&&Object.keys(Z.refs).length>0?[{type:_.refCollection,refs:Z.refs},...X]:X}function EJ($,J,Z,Q){var X=M9($,J);return X?{tagName:X.tag,tagLower:X.tag.toLowerCase(),attrs:X.rawAttrs,whitespaceBeforeAttrs:X.whitespaceBeforeAttrs,isSelfClosing:X.selfClosing,hasSpaceBeforeSlash:X.hasSpaceBeforeSlash,isClosing:X.isClosing,hasNewline:X.whitespaceBeforeAttrs.includes(`
`)||X.rawAttrs.includes(`
`),endPos:X.end}:null}function k$($,J,Z){$$=0,$=_$($),!J.refs&&(J.refs={}),y$($,J.refs,Z);let Q=v9($,J,Z);return J.refs&&Object.keys(J.refs).length>0?[{type:_.refCollection,refs:J.refs},...Q]:Q}var jJ=/^\n+/,u6=U9.createContext(void 0);function BJ($,J,Z,Q,X,Y,G,F){let V=F.styles||{};switch($.type){case _.blockQuote:{let K=$;return Q(S0,{key:Z.key,style:V.blockquote},J(K.children,Z))}case _.breakLine:return`
`;case _.breakThematic:return Q(S0,{key:Z.key,style:V.thematicBreak});case _.frontmatter:if(F.preserveFrontmatter){let K=$;return Q(f0,{key:Z.key,style:V.codeBlock},K.text)}return null;case _.codeBlock:{let K=$;return Q(S0,{key:Z.key,style:V.codeBlock},Q(f0,{style:V.codeInline},K.text))}case _.codeInline:{let K=$;return Q(f0,{key:Z.key,style:V.codeInline},K.text)}case _.footnoteReference:{let K=$,q=X(K.target,"a","href");return q?Q(f0,{key:Z.key,onPress:()=>{F.onLinkPress?F.onLinkPress(q,K.text):C6.openURL(q).catch(()=>{})},style:V.link},Q(f0,{style:{fontWeight:"bold"}},K.text)):null}case _.gfmTask:{let K=$;return Q(f0,{key:Z.key,style:V.gfmTask},K.completed?"[x]":"[ ]")}case _.heading:{let K=$,q=`heading${K.level}`,W=V[q];return Q(f0,{key:Z.key,style:W},J(K.children,Z))}case _.htmlBlock:{let K=$;if(F.tagfilter&&I$(K.tag)){let q=typeof K.a=="string"?K.a:`<${K.tag}>`;return Q(f0,{key:Z.key},q)}if(K.a&&K.d){let H=function(D){return(D.type===_.htmlSelfClosing||D.type===_.htmlBlock)&&D.c?[]:D.type===_.paragraph?D.children?.flatMap(H)||[]:D.type===_.text?D.text?.trim()?[D]:[]:D.type===_.htmlBlock&&D.children?[{...D,children:D.children?.flatMap(H)}]:[D]},q=K.tag.toLowerCase();if(Z6(q)&&!/<[a-z][^>]{0,100}>/i.test(K.a)){let D=K.a.replace(new RegExp("\\s*</"+q+">\\s*$","i"),"");return F.tagfilter&&(D=P$(D)),Q(K.tag,{key:Z.key,...S9(K.attrs||{})},D)}if(/<\/?pre\b/i.test(K.a)){let D=F.tagfilter?P$(K.a):K.a;return Q(f0,{key:Z.key,style:V.codeBlock},D)}if(K.children&&K.children.length>0)return Q(K.tag,{key:Z.key,...S9(K.attrs||{})},J(K.children.flatMap(H),Z));let z=K.a.replace(/>\s+</g,"><").replace(/\n+/g," ").trim();if(new RegExp(`^<${K.tag}(\\s[^>]*)?>(\\s*</${K.tag}>)?$`,"i").test(z))return Q(K.tag,{key:Z.key,...S9(K.attrs||{})});let U=k$(z,{inline:!1,refs:G,inHTML:!1},{slugify:D=>Y(D,i0),sanitizer:(D,A,B)=>X(D,A,B),tagfilter:!0});return Q(K.tag,{key:Z.key,...S9(K.attrs||{})},J(U.flatMap(H),Z))}return Q(K.tag,{key:Z.key,...S9(K.attrs||{})},K.children?J(K.children,Z):"")}case _.htmlSelfClosing:{let K=$;if(F.tagfilter&&I$(K.tag)){let q=typeof K.a=="string"?K.a:`<${K.tag} />`;return Q(f0,{key:Z.key},q)}return Q(K.tag,{key:Z.key,...S9(K.attrs||{})})}case _.image:{let K=$,q=X(K.target,"img","src");return q?Q("img",{key:Z.key,source:{uri:q},accessibilityLabel:K.alt||void 0,style:V.image}):null}case _.link:{let K=$,q={textDecorationLine:"underline"},W=V.link?[q,V.link]:q,H={key:Z.key,style:W};if(K.target!=null){let z=n$(K.target);H.onPress=()=>{F.onLinkPress?F.onLinkPress(z,K.title):C6.openURL(z).catch(()=>{})},F.onLinkLongPress&&(H.onLongPress=()=>F.onLinkLongPress(z,K.title))}return Q("a",H,J(K.children,Z))}case _.table:{let K=$;return Q(S0,{key:Z.key,style:V.table},Q(S0,{style:V.tableHeader},Q(S0,{style:{flexDirection:"row"}},K.header.map(function(W,H){return Q(S0,{key:H,style:[V.tableHeaderCell,K.align[H]!=null?{alignItems:K.align[H]==="center"?"center":K.align[H]==="right"?"flex-end":"flex-start"}:{}]},J(W,Z))}))),Q(S0,{},K.cells.map(function(W,H){return Q(S0,{key:H,style:{flexDirection:"row"}},W.map(function(j,O){return Q(S0,{key:O,style:[V.tableCell,K.align[O]!=null?{alignItems:K.align[O]==="center"?"center":K.align[O]==="right"?"flex-end":"flex-start"}:{}]},J(j,Z))}))})))}case _.text:return $.text;case _.textFormatted:{let K=$,W={em:{fontStyle:"italic"},strong:{fontWeight:"bold"},del:{textDecorationLine:"line-through"}}[K.tag],H=V[K.tag]||W;return Q(f0,{key:Z.key,style:H},J(K.children,Z))}case _.orderedList:case _.unorderedList:{let K=$,q=$.type===_.orderedList,W=q?V.listOrdered:V.listUnordered;return Q(S0,{key:Z.key,style:W},K.items.map((H,z)=>{let j=q&&"start"in K&&K.start!=null?K.start+z:z+1,O=q?`${j}.`:"\u2022",U=q?V.listItemNumber:V.listItemBullet;return Q(S0,{key:z,style:{flexDirection:"row"}},Q(f0,{style:U},O+" "),Q(S0,{style:V.listItem},J(H,Z)))}))}case _.paragraph:return Q("p",{key:Z.key,style:V.paragraph},J($.children,Z));case _.ref:return null;default:return null}}var MJ=($,J,Z,Q,X,Y)=>{let G=(K,q,W)=>{let H=(j,O)=>{let U=Array.isArray(j)?j:[j];return q(U,O||W)},z=()=>BJ(K,H,W,J,Z,Q,X,Y);return $?$(z,K,q,W):z()},F=K=>K.map(q=>"text"in q?q.text:""),V=(K,q={})=>{let W=Array.isArray(K)?K:[K],H=(q.renderDepth||0)+1;if(H>2500)return F(W);q.renderDepth=H;let z=q.key,j=[],O=!1;for(let U=0;U<W.length;U++){q.key=U;let D=G(W[U],V,q),A=typeof D=="string";if(A&&O)j[j.length-1]+=D;else if(D!==null)if(Array.isArray(D))for(let B=0;B<D.length;B++)j.push(D[B]);else j.push(D);O=A}return q.key=z,q.renderDepth=H-1,j.length===1?j[0]:j};return V},AJ=($,J)=>{if(!J||typeof $!="string")return $;let Z=l9(J,$,void 0);return Z?typeof Z=="function"||typeof Z=="object"&&Z!==null&&"render"in Z?Z:l9(J,`${$}.component`,$):$},vJ=$=>{let J=$.toLowerCase();return J==="img"?DJ:J==="div"||J==="section"||J==="article"||J==="aside"||J==="header"||J==="footer"||J==="main"||J==="nav"||J==="figure"||J==="figcaption"||J==="blockquote"||J==="ul"||J==="ol"||J==="li"||J==="table"||J==="thead"||J==="tbody"||J==="tr"||J==="th"||J==="td"?S0:Z6(J)?S0:f0};function _J($,J){let Z={...J||{}};Z.overrides=Z.overrides||{};let Q=Z.slugify||i0,X=Z.sanitizer||k9,Y=Z.createElement||U9.createElement;function G(O,U,...D){if(typeof O!="string")return Y(O,U,...D);let A=l9(Z.overrides||{},`${O}.props`,{}),B=AJ(O,Z.overrides||{}),k={...U,...A,style:U.style||A.style||void 0};if(typeof B=="function"||typeof B=="object"&&B!==null)return Y(B,k,...D);let I=vJ(B);return Y(I,k,...D)}let F={slugify:O=>Q(O,i0),sanitizer:(O,U,D)=>X(O,U,D),tagfilter:Z.tagfilter!==!1,disableAutoLink:Z.disableAutoLink,disableParsingRawHTML:Z.disableParsingRawHTML,enforceAtxHeadings:Z.enforceAtxHeadings},V=$[0]&&$[0].type===_.refCollection?$[0].refs:{},K=MJ(Z.renderRule,G,(O,U,D)=>X(O,U,D),Q,V,Z),q=K($,{inline:Z.forceInline,refs:V}),W=Array.isArray(q)?q:[q],H=[];for(let O in V)O.charCodeAt(0)===r0&&H.push({identifier:O,footnote:V[O].target});if(H.length&&W.push(Y(S0,{key:"footer"},H.map(function(U){let D=U.identifier.charCodeAt(0)===r0?U.identifier.slice(1):U.identifier,A=k$(U.footnote,{inline:!0,refs:V},F),B=K(A,{inline:!0,refs:V}),k=typeof B=="string"?Y(f0,{},B):B;return Y(S0,{key:U.identifier},Y(f0,{},D+": "),k)}))),Z.wrapper===null)return W;let z=Z.wrapper||(Z.forceInline?f0:S0),j;if(W.length>1||Z.forceWrapper)j=W;else if(W.length===1){let O=W[0];return typeof O=="string"?Y(f0,{key:"outer",...Z.wrapperProps},O):O}else return null;return Y(z,{key:"outer",...Z.wrapperProps},j)}function IJ($="",J={}){let Z={...J||{}};Z.overrides=Z.overrides||{};let Q=Z.slugify||i0,X=Z.sanitizer||k9;function Y(V){let K=Z.forceInline||!Z.forceBlock&&!i$.test(V),q={slugify:z=>Q(z,i0),sanitizer:(z,j,O)=>X(z,j,O),tagfilter:Z.tagfilter!==!1,disableAutoLink:Z.disableAutoLink,disableParsingRawHTML:Z.disableParsingRawHTML,enforceAtxHeadings:Z.enforceAtxHeadings};K||y$(V,G,q);let W=V;if(!K){let z=W.length;for(;z>0&&(W[z-1]===`
`||W[z-1]==="\r");)z--;W=W.slice(0,z),W=`${W.replace(jJ,"")}

`}let H=k$(K?V:W,{inline:K,refs:G},q);return _J(H,{...Z,forceInline:K})}let G={};return Y($)}var TJ=({options:$,children:J})=>U9.createElement(u6.Provider,{value:$},J),PJ=({children:$,options:J,...Z})=>{let Q=U9.useContext(u6),X=U9.useMemo(()=>{var F=Object.assign({},Q,J);return F.styles=Object.assign({},Q?.styles,J?.styles),F.overrides=Object.assign({},Q?.overrides,J?.overrides),F.wrapperProps=Object.assign({},Q?.wrapperProps,J?.wrapperProps,Z),F},[Q,J,Z]),Y=$??"";return U9.useMemo(()=>IJ(Y,X),[Y,X])},pJ=PJ;export{i0 as slugify,k9 as sanitizer,OJ as parser,pJ as default,IJ as compiler,_J as astToNative,_ as RuleType,TJ as MarkdownProvider,u6 as MarkdownContext,PJ as Markdown};
