var AZ=Object.defineProperty,vZ=($,Q)=>{for(var Z in Q)AZ($,Z,{get:Q[Z],enumerable:!0,configurable:!0,set:J=>Q[Z]=()=>J})};import{createMemo as L$,createContext as v5,useContext as _5}from"solid-js";import l6 from"solid-js/h";var I=32,w=9,V9=13,g=10,e=96,_0=126,z0=91,i0=94,u=62,Y9=35,q6=36,o9=37,p=45,p0=61,A0=92,O0=42,H0=95,G0=60,r9=64,d0=93,E0=33,O$=38,g0=58,T$=70,I9=102,i9=104,b9=119,H$=116,h$=112,F6=115,W6=160,z6=12,m$=44,D$=59,C9=63,a0=46,B0=47,O9=39,F9=34,H9=43,I0=124,D9=123,Y$=125,n0=40,s0=41,a9=30,C$=31,n=48,s=57,c=65,a=90,U0=97,D0=122,c0=128,X9=32,_Z={blockQuote:0,breakLine:1,breakThematic:2,codeBlock:3,codeInline:4,footnote:5,footnoteReference:6,frontmatter:7,gfmTask:8,heading:9,htmlBlock:10,htmlComment:11,htmlSelfClosing:12,image:13,link:14,orderedList:15,paragraph:16,ref:17,refCollection:18,table:19,text:20,textFormatted:21,unorderedList:22},_=_Z,n$={};vZ(n$,{startsWith:()=>d$,slugify:()=>m0,skipWhitespace:()=>dZ,shouldFilterTag:()=>v$,sanitizer:()=>R9,parseFrontmatterBounds:()=>o$,normalizeInput:()=>A$,isVoidElement:()=>n9,isUnicodeWhitespace:()=>CZ,isUnicodePunctuation:()=>uZ,isSpaceOrTabCode:()=>xZ,isDigitCode:()=>TZ,isAlphaCode:()=>fZ,isAlnumCode:()=>D6,isASCIIWhitespace:()=>gZ,isASCIIPunctuation:()=>EZ,inlineCharTypeTable:()=>SZ,htmlAttrsToJSXProps:()=>PZ,hasKeys:()=>cZ,getTag:()=>lZ,getOverrideProps:()=>oZ,get:()=>p9,findLineEnd:()=>pZ,extractPlainText:()=>j6,endsWith:()=>wZ,encodeUrlTarget:()=>i$,decodeEntityReferences:()=>K$,cx:()=>a$,containsTagfilterTag:()=>iZ,charClassTable:()=>W9,applyTagFilterToText:()=>_$,VOID_ELEMENTS:()=>c$,SHOULD_RENDER_AS_BLOCK_R:()=>r$,SANITIZE_R:()=>p$,NAMED_CODES_TO_UNICODE:()=>bZ,HTML_TO_JSX_MAP:()=>H6,HTML_CHAR_CODE_R:()=>O6,CC_WHITESPACE:()=>P9,CC_SPACE_TAB:()=>B$,CC_PUNCTUATION:()=>w9,CC_NEWLINE:()=>l$,CC_DIGIT:()=>M$,CC_ALPHA_UPPER:()=>B6,CC_ALPHA:()=>X$,ATTRIBUTES_TO_SANITIZE:()=>RZ});import{NAMED_CODES_TO_UNICODE as NZ,decodeEntity as IZ}from"#entities";function o$($){if(!d$($,"---"))return null;let Q=3;for(;Q<$.length&&($[Q]===" "||$[Q]==="	");)Q++;if(Q<$.length&&$[Q]==="\r"&&Q++,Q>=$.length||$[Q]!==`
`)return null;Q++;let Z=!1;for(;Q<$.length;){let J=Q;for(;Q<$.length&&$[Q]!==`
`&&$[Q]!=="\r";)Q++;if(Q>=$.length)break;let V=Q;if($[Q]==="\r"&&Q++,Q<$.length&&$[Q]===`
`&&Q++,d$($,"---",J))return{endPos:Q,hasValidYaml:Z};let Y=$.indexOf(":",J);Y!==-1&&Y<V&&(Z=!0)}return null}var bZ=NZ,O6=/&([a-zA-Z0-9]+|#[0-9]{1,7}|#x[0-9a-fA-F]{1,6});/gi,H6={class:"className",for:"htmlFor",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",classid:"classId",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",crossorigin:"crossOrigin",enctype:"encType",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",inputmode:"inputMode",keyparams:"keyParams",keytype:"keyType",marginheight:"marginHeight",marginwidth:"marginWidth",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",novalidate:"noValidate",radiogroup:"radioGroup",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",usemap:"useMap",viewbox:"viewBox"};function PZ($){var Q={};for(var Z in $){var J=Z.toLowerCase(),V=H6[J];if(V)Q[V]=$[Z];else{var Y=Z.indexOf(":");Y!==-1?Q[Z.slice(0,Y)+Z[Y+1].toUpperCase()+Z.slice(Y+2)]=$[Z]:Q[Z]=$[Z]}}return Q}var r$=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s|^<(div|p|h[1-6]|ul|ol|li|blockquote|pre|table|thead|tbody|tr|td|th|dl|dt|dd|hr|address|article|aside|details|dialog|figure|figcaption|footer|form|header|main|menu|nav|section|summary|textarea|fieldset|legend|center|dir|hgroup|marquee|search|output|template)\b)/i;function K$($){return $.indexOf("&")===-1?$:$.replace(O6,(Q,Z)=>{var J=IZ(Z);if(J)return J;if(Z[0]==="#"){var V=Z[1]==="x"||Z[1]==="X"?parseInt(Z.slice(2),16):parseInt(Z.slice(1),10);return V===0||V>=55296&&V<=57343||V>1114111?"\uFFFD":V<=65535?String.fromCharCode(V):String.fromCharCode(55296+(V-65536>>10),56320+(V-65536&1023))}return Q})}var p$=/(javascript|vbscript|data(?!:image)):/i;function R9($){if(p$.test($))return null;if($.indexOf("%")===-1)return $;try{let Q=decodeURIComponent($).replace(/[^A-Za-z0-9/:]/g,"");if(p$.test(Q))return null}catch{return null}return $}var h0={},l0,P0;for(l0=[192,193,194,195,196,197,224,225,226,227,228,229,230,198],P0=0;P0<l0.length;P0++)h0[l0[P0]]="a";for(h0[231]=h0[199]="c",h0[240]=h0[208]="d",l0=[200,201,202,203,233,232,234,235],P0=0;P0<l0.length;P0++)h0[l0[P0]]="e";for(l0=[207,239,206,238,205,237,204,236],P0=0;P0<l0.length;P0++)h0[l0[P0]]="i";for(h0[209]=h0[241]="n",l0=[248,216,339,338,213,245,212,244,211,243,210,242],P0=0;P0<l0.length;P0++)h0[l0[P0]]="o";for(l0=[220,252,219,251,218,250,217,249],P0=0;P0<l0.length;P0++)h0[l0[P0]]="u";h0[376]=h0[255]=h0[221]=h0[253]="y";function D6($){return $<c0&&(W9[$]&(X$|M$))!==0}function m0($){for(var Q=[],Z=0;Z<$.length;Z++){var J=$.charCodeAt(Z);if(D6(J))J>=c&&J<=a?Q.push(String.fromCharCode(J+X9)):Q.push($[Z]);else if(J===I||J===p)Q.push("-");else{var V=h0[J];V&&Q.push(V)}}return Q.join("")}function d$($,Q,Z){return $.startsWith(Q,Z)}function wZ($,Q,Z){return $.startsWith(Q,(Z===void 0?$.length:Z)-Q.length)}var c$=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","circle","ellipse","line","path","polygon","polyline","rect","use","stop","animate","set"]);function n9($){let Q=$.toLowerCase();if(c$.has(Q))return!0;let Z=Q.indexOf(":");return Z!==-1?(Q=Q.slice(Z+1),c$.has(Q)):!1}var RZ=["src","href","data","formAction","srcDoc","action"],P9=1,w9=2,X$=4,M$=8,l$=16,B$=32,B6=64,U6=1,yZ=2,LZ=3,kZ=4,W9=(function(){let $=new Uint8Array(128),Q;for($[w]=P9|B$,$[g]=P9|l$,$[z6]=P9,$[V9]=P9|l$,$[I]=P9|B$,Q=E0;Q<=B0;Q++)$[Q]=w9;for(Q=g0;Q<=r9;Q++)$[Q]=w9;for(Q=z0;Q<=e;Q++)$[Q]=w9;for(Q=D9;Q<=_0;Q++)$[Q]=w9;for(Q=n;Q<=s;Q++)$[Q]=M$;for(Q=c;Q<=a;Q++)$[Q]=X$|B6;for(Q=U0;Q<=D0;Q++)$[Q]=X$;return $})(),SZ=(function(){let $=new Uint8Array(128);return $[A0]=yZ,$[z0]=kZ,$[O0]=$[H0]=$[_0]=$[p0]=LZ,$[e]=$[G0]=$[r9]=$[d0]=$[g]=$[I]=$[E0]=U6,$[I9]=$[i9]=$[b9]=U6,$})();function EZ($){return $<c0&&(W9[$]&w9)!==0}function gZ($){return $<c0&&(W9[$]&P9)!==0}function xZ($){return $<c0&&(W9[$]&B$)!==0}function fZ($){return $<c0&&(W9[$]&X$)!==0}function TZ($){return $<c0&&(W9[$]&M$)!==0}var hZ=/[\p{P}\p{S}]/u,mZ=/\p{Zs}/u;function CZ($){if(!$)return!0;let Q=$.charCodeAt(0);return Q<c0?(W9[Q]&P9)!==0:mZ.test($)}function uZ($){if(typeof $=="number")return $<c0&&(W9[$]&w9)!==0;if(!$)return!1;let Q=$.charCodeAt(0);return Q<c0?(W9[Q]&w9)!==0:hZ.test($)}function pZ($,Q){let Z=$.indexOf(`
`,Q);return Z===-1?$.length:Z>0&&$.charCodeAt(Z-1)===V9?Z-1:Z}var u9=[];function A$($){var Q=$.indexOf("\r"),Z=$.indexOf("\0");if(Q===-1&&Z===-1)return $;var J=$.length;u9.length=0;var V=0,Y=0;for(Q===-1?Y=Z:Z===-1?Y=Q:Y=Q<Z?Q:Z;Y<J;Y++){var K=$.charCodeAt(Y);K===V9?(V<Y&&u9.push($.slice(V,Y)),Y+1<J&&$.charCodeAt(Y+1)===g&&Y++,u9.push(`
`),V=Y+1):K===0&&(V<Y&&u9.push($.slice(V,Y)),u9.push("\uFFFD"),V=Y+1)}return V<J&&u9.push($.slice(V)),u9.join("")}function dZ($,Q,Z){let J=Z??$.length;for(;Q<J&&($[Q]===" "||$[Q]==="	");)Q++;return Q}function cZ($){if(!$)return!1;for(var Q in $)return!0;return!1}function p9($,Q,Z){for(var J=$,V=Q.split("."),Y=0;Y<V.length&&(J=J?.[V[Y]],J!==void 0);)Y++;return J||Z}function i$($){for(var Q=!1,Z=0;Z<$.length;Z++){var J=$.charCodeAt(Z);if(J<=I||J===F9||J===o9||J===G0||J===u||J===z0||J===A0||J===d0||J===i0||J===e||J>=123){Q=!0;break}}if(!Q)return $;for(var V="",Z=0;Z<$.length;Z++){var J=$.charCodeAt(Z);if(J===o9&&Z+2<$.length){var Y=$.charCodeAt(Z+1),K=$.charCodeAt(Z+2);if((Y>=n&&Y<=s||Y>=c&&Y<=T$||Y>=U0&&Y<=I9)&&(K>=n&&K<=s||K>=c&&K<=T$||K>=U0&&K<=I9)){V+=$[Z]+$[Z+1]+$[Z+2],Z+=2;continue}}V+=encodeURI($[Z])}return V}function a$(...$){return $.filter(Boolean).join(" ")}function lZ($,Q){if(!Q)return $;let Z=p9(Q,$,void 0);return typeof Z=="string"?Z:typeof Z=="object"&&Z.component?Z.component:$}function oZ($,Q){if(!Q)return{};let Z=p9(Q,$,void 0);return typeof Z=="object"&&Z.props?Z.props:{}}function j6($,Q){for(var Z="",J=0,V=$.length;J<V;J++){var Y=$[J],K=Y.type;if(K===Q.text||K===Q.codeInline){var G=Y.text;G&&(Z+=G)}else K===Q.textFormatted||K===Q.link?Y.children&&(Z+=j6(Y.children,Q)):K===Q.image&&Y.alt&&(Z+=Y.alt)}return Z}var rZ=new Set(["title","textarea","style","xmp","iframe","noembed","noframes","script","plaintext"]),j$=/<(\/?)(title|textarea|style|xmp|iframe|noembed|noframes|script|plaintext)(\s|>|\/)/gi;function v$($){return rZ.has($.toLowerCase())}function iZ($){return j$.lastIndex=0,j$.test($)}function _$($){return j$.lastIndex=0,$.replace(j$,function(Q,Z,J,V){return"&lt;"+Z+J+V})}var R6=/^<([a-zA-Z][a-zA-Z0-9-]*)\s[^>]*>/,y6=/^<[A-Z]/,s$=["script","pre","style","textarea"],q$=new Set(s$),aZ=/<(?:pre|script|style|textarea)\b/i,nZ=new Set(["table","thead","tbody","tfoot","tr","td","th"]),L6=new Uint8Array(128);(function(){for(var $=[e,O0,H0,_0,p0,z0,E0,G0,A0,C$,i9,b9,I9],Q=0;Q<$.length;Q++)L6[$[Q]]=1})();var M6=/([a-zA-Z_][a-zA-Z0-9_-]*)=(?:"([^"]*)"|'([^']*)')/g;function k6($){return q$.has($)}function f5($){return aZ.test($)}function S6($,Q,Z){for(var J=Q,V=Z;J<V&&($.charCodeAt(J)===I||$.charCodeAt(J)===w);)J++;if(J>=V)return!1;$.charCodeAt(J)===I0&&J++;for(var Y=0;J<V;){for(;J<V&&($.charCodeAt(J)===I||$.charCodeAt(J)===w);)J++;if(J>=V)break;if($.charCodeAt(J)===I0&&Y>0){for(var K=J+1;K<V&&($.charCodeAt(K)===I||$.charCodeAt(K)===w);)K++;if(K>=V)return!0}if($.charCodeAt(J)===g0&&J++,J>=V||$.charCodeAt(J)!==p)return!1;for(;J<V&&$.charCodeAt(J)===p;)J++;for(J<V&&$.charCodeAt(J)===g0&&J++,Y++;J<V&&($.charCodeAt(J)===I||$.charCodeAt(J)===w);)J++;if(J<V)if($.charCodeAt(J)===I0)J++;else return!1}return Y>0}function B9($,Q){if($.charCodeAt(Q)!==G0)return null;let Z=Q+1,J=$.length,V=!1;$.charCodeAt(Z)===B0&&(Z++,V=!0);let Y=Z,K=$.charCodeAt(Z);if(!(K>=U0&&K<=D0||K>=c&&K<=a))return null;for(;Z<J&&($.charCodeAt(Z)>=U0&&$.charCodeAt(Z)<=D0||$.charCodeAt(Z)>=c&&$.charCodeAt(Z)<=a||$.charCodeAt(Z)>=n&&$.charCodeAt(Z)<=s||$.charCodeAt(Z)===p);)Z++;let G=$.slice(Y,Z);if(!G)return null;let X=Z;for(;Z<J&&($.charCodeAt(Z)===I||$.charCodeAt(Z)===w||$.charCodeAt(Z)===g);)Z++;let q=$.slice(X,Z);if(Z===X&&Z<J){var F=$.charCodeAt(Z);if(F!==u&&F!==B0)return null}let W=Z,O={},U=!1;for(;Z<J;){let k=$.charCodeAt(Z);if(k===u){let L=$.slice(W,Z);return{tag:G,attrs:O,selfClosing:!1,end:Z+1,rawAttrs:L,whitespaceBeforeAttrs:q,isClosing:V,hasSpaceBeforeSlash:U}}if(k===I||k===w||k===g){Z++;continue}if(k===B0&&Z+1<J&&$.charCodeAt(Z+1)===u){let L=$.slice(W,Z);return U=Z>W&&$.charCodeAt(Z-1)===I,{tag:G,attrs:O,selfClosing:!0,end:Z+2,rawAttrs:L,whitespaceBeforeAttrs:q,isClosing:V,hasSpaceBeforeSlash:U}}var B=Z,H=$.charCodeAt(Z);if(!(H>=U0&&H<=D0||H>=c&&H<=a||H===H0||H===g0))return null;for(Z++;Z<J;){var z=$.charCodeAt(Z);if(z>=U0&&z<=D0||z>=c&&z<=a||z>=n&&z<=s||z===H0||z===a0||z===g0||z===p)Z++;else break}for(var j=$.slice(B,Z);Z<J&&($.charCodeAt(Z)===I||$.charCodeAt(Z)===w);)Z++;if($.charCodeAt(Z)!==p0){O[j]="";continue}for(Z++;Z<J&&($.charCodeAt(Z)===I||$.charCodeAt(Z)===w);)Z++;var M=$.charCodeAt(Z);if(M===F9||M===O9){Z++;for(var D=Z;Z<J&&$.charCodeAt(Z)!==M;)Z++;if(Z>=J)return null;if(O[j]=$.slice(D,Z),Z++,Z<J){var R=$.charCodeAt(Z);if(R!==I&&R!==w&&R!==g&&R!==u&&R!==B0)return null}}else if(M===D9){var N=1,D=Z;for(Z++;Z<J&&N>0;){var z=$.charCodeAt(Z);z===D9?N++:z===Y$&&N--,Z++}O[j]=$.slice(D,Z)}else{for(var D=Z;Z<J;){var A=$.charCodeAt(Z);if(A===I||A===w||A===u||A===g||A===F9||A===O9||A===p0||A===G0||A===e)break;Z++}if(Z===D)return null;O[j]=$.slice(D,Z)}}return null}function w$($,Q,Z){for(var J=0,V=$.length,Y=!1;J<V;){for(var K=$.indexOf(`
`,J),G=K<0?V:K,X=J,q=0;X<G&&q<4;)if($.charCodeAt(X)===I)q++,X++;else if($.charCodeAt(X)===w)q+=4,X++;else break;if(X>=G){Y=!1,J=K<0?V:K+1;continue}if(q<4){var F=$.charCodeAt(X);if(F===e||F===_0){for(var W=F,O=0,U=X;U<G&&$.charCodeAt(U)===W;)O++,U++;if(O>=3){Y=!1;for(var B=K<0?V:K+1;B<V;){for(var H=B,z=0;H<V&&z<4;){var j=$.charCodeAt(H);if(j===I)z++,H++;else if(j===w)z+=4,H++;else break}if(z<4&&H<V&&$.charCodeAt(H)===W){for(var M=0;H<V&&$.charCodeAt(H)===W;)M++,H++;if(M>=O){for(;H<V&&($.charCodeAt(H)===I||$.charCodeAt(H)===w);)H++;if(H>=V||$.charCodeAt(H)===g){J=H>=V?V:H+1;break}}}for(;B<V&&$.charCodeAt(B)!==g;)B++;B<V&&B++}B>=V&&(J=V);continue}}}for(var D=X;D<G&&$.charCodeAt(D)===u;){D++,D<G&&$.charCodeAt(D)===I&&D++;for(var R=0;D<G&&R<4;)if($.charCodeAt(D)===I)R++,D++;else if($.charCodeAt(D)===w)R+=4,D++;else break;if(R>=4)break;Y=!1}if(!Y&&q<4&&D<G&&$.charCodeAt(D)===z0&&!(D+1<V&&$.charCodeAt(D+1)===i0)){var N=E6($,D,Q);if(N){J=N,Y=!1;continue}}var A=$.charCodeAt(X);if(A===Y9&&q<4)Y=!1;else if(q<4&&(A===p||A===O0||A===H0)){for(var k=X,L=0;k<G;){var b=$.charCodeAt(k);if(b===A)L++;else if(b!==I&&b!==w)break;k++}Y=!(L>=3&&k>=G)}else Y=!0;J=K<0?V:K+1}}function E6($,Q,Z){let J=$.length;if($.charCodeAt(Q)!==z0)return null;let V=Q+1<J&&$.charCodeAt(Q+1)===i0,Y=Q+1;for(;Y<J;){var K=$.charCodeAt(Y);if(K===d0){Y++;break}if(K===z0)return null;K===A0&&Y+1<J&&Y++,Y++}if(Y>J||$.charCodeAt(Y-1)!==d0)return null;let G=$.slice(Q+1,Y-1);if(G.length>999)return null;let X=N$(G);if(!X||Y>=J||$.charCodeAt(Y)!==g0)return null;Y++;let q=!1;for(;Y<J;){let E=$.charCodeAt(Y);if(E===I||E===w)Y++;else if(E===g&&!q)q=!0,Y++;else break}if(V){let E=$.indexOf(`
`,Y),x=E<0?J:E,T=$.slice(Y,x).trim();return Z[X]={target:T,title:void 0},E<0?J:E+1}var F;if(Y<J&&$.charCodeAt(Y)===G0){Y++;for(var W=Y;Y<J&&$.charCodeAt(Y)!==u&&$.charCodeAt(Y)!==g;)$.charCodeAt(Y)===A0&&Y+1<J&&Y++,Y++;if(Y>=J||$.charCodeAt(Y)!==u)return null;F=$.slice(W,Y),Y++;for(var O=$.indexOf(`
`,Y),U=O<0?J:O,B=Y;B<U&&($.charCodeAt(B)===I||$.charCodeAt(B)===w);)B++;if(B<U){if(B===Y)return null;var H=$.charCodeAt(B);if(H!==F9&&H!==O9&&H!==n0)return null}}else{for(var W=Y,z=0;Y<J;){var K=$.charCodeAt(Y);if(K===n0)z++;else if(K===s0){if(z===0)break;z--}else{if(K===I||K===w||K===g)break;K===A0&&Y+1<J&&Y++}Y++}if(F=$.slice(W,Y),!F)return null}for(;Y<J&&($.charCodeAt(Y)===I||$.charCodeAt(Y)===w);)Y++;var j=$.indexOf(`
`,Y),M=j<0?J:j,D,R=!1,N=Y,A=Y;if(Y===M&&Y<J)for(A=Y+1;A<J&&($.charCodeAt(A)===I||$.charCodeAt(A)===w);)A++;if(A<J){var k=$.charCodeAt(A);if(k===F9||k===O9||k===n0){for(var L=k===n0?41:k,b=A+1,P=b;b<J;){var y=$.charCodeAt(b);if(y===L){for(var S=b+1;S<J&&($.charCodeAt(S)===I||$.charCodeAt(S)===w);)S++;(S>=J||$.charCodeAt(S)===g)&&(D=$.slice(P,b),R=!0,N=S<J?S+1:J);break}if(y===A0&&b+1<J){b+=2;continue}if(y===g&&b+1<J&&$.charCodeAt(b+1)===g)break;b++}if(!R&&A===Y)return null}}if(R)return Z[X]||(Z[X]={target:t9(F),title:D!==void 0?t9(D):D}),N;for(;Y<M&&($.charCodeAt(Y)===I||$.charCodeAt(Y)===w);)Y++;return Y<M?null:(Z[X]||(Z[X]={target:t9(F),title:D}),j<0?J:j+1)}var e9=1,g6=2,Z0=4,x6=8,sZ=16,K9=32,S9=64,d=new Uint8Array(128);d[I]=e9,d[w]=e9,d[g]=e9|g6,d[V9]=e9|g6,d[Y9]=K9|Z0,d[u]=K9|Z0,d[p]=K9|S9|Z0,d[H9]=K9|Z0,d[O0]=K9|S9|Z0,d[H0]=K9|S9|Z0,d[e]=K9|S9|Z0,d[_0]=K9|S9|Z0,d[G0]=K9|S9|Z0,d[z0]=S9|Z0,d[E0]=S9|Z0,d[I0]=K9|Z0;for(let $=n;$<=s;$++)d[$]=sZ|K9;for(let $=c;$<=a;$++)d[$]=x6;for(let $=U0;$<=D0;$++)d[$]=x6;d[A0]=Z0,d[d0]=Z0,d[n0]=Z0,d[s0]=Z0,d[g0]=Z0,d[F9]=Z0,d[O9]=Z0,d[O$]=Z0,d[p0]=Z0,d[q6]=Z0,d[o9]=Z0,d[m$]=Z0,d[a0]=Z0,d[B0]=Z0,d[D$]=Z0,d[C9]=Z0,d[r9]=Z0,d[i0]=Z0,d[D9]=Z0,d[Y$]=Z0;function A6($){if($.indexOf("[")<0&&$.indexOf("]")<0)return!1;for(var Q=0;Q<$.length;Q++){if($.charCodeAt(Q)===A0){Q++;continue}if($.charCodeAt(Q)===z0||$.charCodeAt(Q)===d0)return!0}return!1}function N$($){var Q=$.replace(/\s+/g," ").trim();return Q.indexOf("\u1E9E")!==-1?Q.replace(/\u1E9E/g,"ss").toLowerCase():Q.toLowerCase()}function $6($){return $<c0?d[$]:$===W6?e9:0}function t9($){return $.replace(/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,"$1")}function V0($,Q){var Z=$.indexOf(`
`,Q);return Z<0?$.length:Z}function r($,Q){let Z=V0($,Q);return Z<$.length?Z+1:Z}function G$($,Q,Z){for(;Q<Z;){let J=$.charCodeAt(Q);if(J!==I&&J!==w)break;Q++}return Q}function v6($,Q){let Z=r($,Q);for(;Z<$.length;){let J=V0($,Z);if(t0($,Z,J))return Z;Z=r($,Z)}return $.length}function A9($,Q,Z,J){let V=0;for(;Q+V<Z&&$.charCodeAt(Q+V)===J;)V++;return V}var J0=0,$0=0;function v0($,Q,Z){for(J0=0,$0=0;Q+$0<Z;){let J=$.charCodeAt(Q+$0);if(J===w)J0+=4-J0%4;else if(J===I)J0++;else break;$0++}}function t0($,Q,Z){return G$($,Q,Z)>=Z}function f6($,Q,Z,J){let V=V0($,Q);if(v0($,Q,V),J0>3)return null;let Y=Q+$0;if($.charCodeAt(Y)!==Y9)return null;let K=A9($,Y,V,35);if(K<1||K>6||(Y+=K,Y<V&&$.charCodeAt(Y)!==I&&$.charCodeAt(Y)!==w))return null;Y=G$($,Y,V);for(var G=V;G>Y&&$.charCodeAt(G-1)===I;)G--;for(var X=G;G>Y&&$.charCodeAt(G-1)===Y9;)G--;if(G<X)if(G===Y||$.charCodeAt(G-1)===I)for(;G>Y&&$.charCodeAt(G-1)===I;)G--;else G=X;let q=$.slice(Y,G),F=C0(q,0,q.length,Z,J),O=(J?.slugify||m0)(q);return{node:{type:_.heading,level:K,children:F,id:O},end:r($,V)}}function k9($,Q){let Z=V0($,Q);if(v0($,Q,Z),J0>3)return null;let J=Q+$0,V=$.charCodeAt(J);if(V!==p&&V!==O0&&V!==H0)return null;let Y=0;for(;J<Z;){let K=$.charCodeAt(J);if(K===V)Y++;else if(K!==I&&K!==w)return null;J++}return Y<3?null:{node:{type:_.breakThematic},end:r($,Z)}}function tZ($,Q,Z){let J=V0($,Q);if(v0($,Q,J),J0>3)return null;let V=J0,Y=$0,K=Q+$0,G=$.charCodeAt(K);if(G!==e&&G!==_0)return null;let X=A9($,K,J,G);if(X<3)return null;K+=X;let q=G$($,K,J),F=J;if(G===e){for(let b=q;b<J;b++)if($.charCodeAt(b)===e)return null}for(;F>q&&($.charCodeAt(F-1)===I||$.charCodeAt(F-1)===w);)F--;let W=$.slice(q,F),O="",U="",B=W.indexOf(" ");B===-1?O=W:(O=W.slice(0,B),U=W.slice(B+1).trim()),O=t9(O);var H=void 0;if(U){M6.lastIndex=0;for(var z;(z=M6.exec(U))!==null;)H||(H={}),H[z[1]]=z[2]!==void 0?z[2]:z[3]}let j=r($,J),M=j,D=$.length;for(;M<$.length;){let b=V0($,M);if(v0($,M,b),J0<4){let P=M+$0;var R=A9($,P,b,G);if(R>=X){let y=P+R;if(t0($,y,b)){D=r($,b);break}}}M=r($,b)}var N;if(V===0)N=M>j&&$.charCodeAt(M-1)===g?$.slice(j,M-1):$.slice(j,M);else{N="";for(var A=j;A<M;){var k=V0($,A);v0($,A,k);var L=Math.min($0,V);N+=$.slice(A+L,k)+`
`,A=r($,k)}N.length>0&&N.charCodeAt(N.length-1)===g&&(N=N.slice(0,-1))}return{node:{type:_.codeBlock,lang:O||void 0,text:N,infoString:U||void 0,attrs:H},end:D}}function eZ($,Q){let Z=V0($,Q);if(v0($,Q,Z),J0<4)return null;let J="",V=Q;for(;V<$.length;){let U=V0($,V);if(v0($,V,U),t0($,V,U)){for(var Y=0,K=r($,U);K<$.length;){var G=V0($,K);if(t0($,K,G)){Y++,K=r($,G);continue}if(v0($,K,G),J0>=4){for(var X=0;X<=Y;X++)J+=`
`;V=K;break}break}if(V!==K)break;continue}if(J0<4)break;let B=0,H=0;var q=0;for(let z=V;z<U&&H<4;z++){if($.charCodeAt(z)===w){var F=4-H%4;H+F>4&&(q=H+F-4),H+=F}else H++;B++}var W="";if(q>0)for(var O=0;O<q;O++)W+=" ";W+=$.slice(V+B,U),J+=W+`
`,V=r($,U)}for(;J.length>0&&J.charCodeAt(J.length-1)===g;)J=J.slice(0,-1);for(;J.length>0&&J.charCodeAt(J.length-1)===g;)J=J.slice(0,-1);return J?{node:{type:_.codeBlock,text:J},end:V}:null}function $5($,Q,Z,J){let V=V0($,Q);if(v0($,Q,V),J0>3)return null;let Y=Q+$0;if($.charCodeAt(Y)!==u)return null;let K="",G=Q,X,q=!1,F=!1,W=!1;for(;G<$.length;){let h=V0($,G);v0($,G,h);let w0=G+$0;if($.charCodeAt(w0)===u){let m=w0+1;var O=J0+1,U=!1;if(m<h){var B=$.charCodeAt(m);B===I?(m++,O++,U=!0):B===w&&(U=!0)}for(var H="",z=!1,j=m;j<h;j++)if($.charCodeAt(j)===w){z=!0;break}if(z){var M=O;if(U&&m<h&&$.charCodeAt(m)===w){for(var D=4-M%4,R=0;R<D-1;R++)H+=" ";M+=D,m++}for(var N=m;N<h;N++)if($.charCodeAt(N)===w){for(var A=4-M%4,k=0;k<A;k++)H+=" ";M+=A}else H+=$[N],M++}else H=$.slice(m,h);if(!K&&!X){let q0=H.match(/^\[!([A-Z]+)\]\s*$/);if(q0){X=q0[1],G=r($,h);continue}}K+=H+`
`;var L=H.trimStart();L.startsWith("```")||L.startsWith("~~~")?W=!W:H.startsWith("    ")||H.startsWith("	")?W=!0:L.length>0&&!W&&(W=!1),F=L.length>0,G=r($,h)}else if(K&&!t0($,G,h)&&F){if(J0<4){var b=G+$0,P=b<h?$.charCodeAt(b):0;if(P===Y9||P===u||P===e||P===_0||P===G0||(P===p||P===O0||P===H0)&&k9($,G)||(P===p||P===O0||P===H9)&&b+1<h&&($.charCodeAt(b+1)===I||$.charCodeAt(b+1)===w))break;if(P>=n&&P<=s){for(var y=b;y<h&&$.charCodeAt(y)>=n&&$.charCodeAt(y)<=s;)y++;if(y<h&&($.charCodeAt(y)===a0||$.charCodeAt(y)===s0))break}}if(W)break;K+=$.slice(G,h)+`
`,q=!0,G=r($,h)}else break}if(!K&&!X)return null;var{inBlockQuote:S,f:E}=Z;Z.inBlockQuote=!0,q&&(Z.f=!0);let x=M9(K||"",Z,J);Z.inBlockQuote=S,Z.f=E;let T={type:_.blockQuote,children:x};return X&&(T.alert=X),{node:T,end:G}}function T6($,Q,Z){for(var J=0,V=Q;V<Z;V++)$.charCodeAt(V)===w?J+=4-J%4:J++;return J}function y9($,Q,Z){if(v0($,Q,Z),J0>3)return null;var J=Q+$0;if(J>=Z)return null;var V=$.charCodeAt(J),Y=J0,K=J;if(V===p||V===O0||V===H9){if(K=J+1,K<Z&&$.charCodeAt(K)!==I&&$.charCodeAt(K)!==w&&$.charCodeAt(K)!==g)return null}else if(V>=n&&V<=s){for(var G=J;G<Z&&G-J<9;){var X=$.charCodeAt(G);if(X<n||X>s)break;G++}if(G>J&&G<Z){var q=$.charCodeAt(G);if(q===a0||q===s0){if(K=G+1,K<Z&&$.charCodeAt(K)!==I&&$.charCodeAt(K)!==w&&$.charCodeAt(K)!==g)return null}else return null}else return null}else return null;var F=K,W=T6($,Q,K),O=0,U=F,B=W;if(F>=Z)return{ordered:V>=n&&V<=s,marker:V>=n&&V<=s?$[G]:$[J],start:V>=n&&V<=s?parseInt($.slice(J,G),10):void 0,contentStart:F,contentCol:W+1,markerCol:Y,isEmpty:!0};for(;U<Z&&($.charCodeAt(U)===I||$.charCodeAt(U)===w);){if($.charCodeAt(U)===w){var H=4-B%4;B+=H}else B++;U++,O++}var z=U>=Z,j=B-W;return z||j>4?(B=W+1,U=F+1,O=1):O===0&&(B=W+1,U=F,O=1),{ordered:V>=n&&V<=s,marker:V>=n&&V<=s?$[G]:$[J],start:V>=n&&V<=s?parseInt($.slice(J,G),10):void 0,contentStart:U,contentCol:B,markerCol:Y,isEmpty:z}}var I$=0;function Z5($,Q,Z,J){var V=0,Y=Q;for(I$=0;Y<Z&&V<J;){var K=$.charCodeAt(Y);if(K===w){var G=4-V%4;if(V+G>J){I$=V+G-J,Y++,V=J;break}V+=G}else if(K===I)V++;else break;Y++}return Y}function _6($,Q,Z,J){var V=V0($,Q),Y=y9($,Q,V);if(!Y)return null;var K=[],G=Q,X=Y.contentCol,q="",F=Y.isEmpty,W=!1,O=!1;if(!Y.isEmpty){for(var U=!1,B=Y.contentStart;B<V;B++)if($.charCodeAt(B)===w){U=!0;break}if(U){var H="",z=T6($,Q,Y.contentStart),j=z-Y.contentCol;if(j>0)for(var M=0;M<j;M++)H+=" ";for(var D=Y.contentStart;D<V;D++)if($.charCodeAt(D)===w){for(var R=4-z%4,N=0;N<R;N++)H+=" ";z+=R}else H+=$[D],z++;q=H+`
`}else q=$.slice(Y.contentStart,V)+`
`}for(G=r($,V);G<$.length;){var A=V0($,G);v0($,G,A);var k=$.charCodeAt(G+$0);if(J0<X&&(k===p||k===O0||k===H0)&&J0<=3&&k9($,G))break;var L=y9($,G,A);if(L&&L.ordered===Y.ordered&&L.marker===Y.marker&&L.markerCol<X){K.push({contentCol:X,raw:q,hasBlankAfter:W,isEmpty:F}),W&&(O=!0),X=L.contentCol,F=L.isEmpty,W=!1,q=L.isEmpty?"":$.slice(L.contentStart,A)+`
`,G=r($,A);continue}if(t0($,G,A)){q+=`
`,G=r($,A);for(var b=!1,P=0;P<q.length;P++){var y=q.charCodeAt(P);if(y!==g&&y!==V9&&y!==I&&y!==w){b=!0;break}}if(F&&!b)if(G<$.length){var S=V0($,G),E=y9($,G,S);if(!E||E.ordered!==Y.ordered||E.marker!==Y.marker)break;W=!0}else break;if(G<$.length){var x=V0($,G);v0($,G,x);var T=$.charCodeAt(G+$0);if((T===p||T===O0||T===H0)&&J0<=3&&k9($,G))break;var h=y9($,G,x);if(h&&h.ordered===Y.ordered&&h.marker===Y.marker&&h.markerCol<X){W=!0;continue}if(!t0($,G,x)&&J0<X)break}continue}if(J0>=X){var w0=Z5($,G,A,X);if(I$>0){for(var m="",q0=X,W0=0;W0<I$;W0++)m+=" ",q0++;for(var l=w0;l<A;l++)if($.charCodeAt(l)===w){for(var N0=4-q0%4,F0=0;F0<N0;F0++)m+=" ";q0+=N0}else m+=$[l],q0++;q+=m+`
`}else q+=$.slice(w0,A)+`
`;G=r($,A);continue}for(var b0=!1,Q0=0;Q0<q.length;Q0++){var j0=q.charCodeAt(Q0);if(j0!==g&&j0!==V9&&j0!==I&&j0!==w){b0=!0;break}}if(!W&&b0&&!F){var Y0=G+$0,i=$.charCodeAt(Y0),C=i===Y9||i===u||i===G0||i===e||i===_0||(i===p||i===O0||i===H0||i===H9)&&(k9($,G)!==null||y9($,G,A)!==null)||i>=n&&i<=s&&y9($,G,A)!==null;if(!C){q+=""+$.slice(Y0,A)+`
`,G=r($,A);continue}}break}if(K.push({contentCol:X,raw:q,hasBlankAfter:W,isEmpty:F}),K.length===0)return null;var M0=O;if(!M0)for(var L0=0;L0<K.length;L0++){if(K[L0].hasBlankAfter&&L0<K.length-1){M0=!0;break}if(!K[L0].isEmpty){for(var v=K[L0].raw,f=v.length,X0=0,R0=!1,t=!1,y0=!1,o=!1,x0=0,f0=0,u0=-1;X0<f;){var K0=v.indexOf(`
`,X0);if(K0<0&&(K0=f),o){v0(v,X0,K0);for(var E9=v.slice(X0+$0,K0),g9=0;g9<E9.length&&E9.charCodeAt(g9)===x0;)g9++;g9>=f0&&E9.slice(g9).trim()===""&&(o=!1),X0=K0<f?K0+1:f;continue}if(t0(v,X0,K0)){u0>=0?y0=!0:R0&&(t=!0),X0=K0<f?K0+1:f;continue}if(v0(v,X0,K0),u0>=0){if(J0>=u0){X0=K0<f?K0+1:f;continue}var x9=y9(v,X0,K0);if(x9&&x9.markerCol<u0&&x9.contentCol<=u0){X0=K0<f?K0+1:f;continue}if(x9){X0=K0<f?K0+1:f;continue}u0=-1,y0&&(t=!0,y0=!1)}var G9=v.slice(X0+$0,K0),f9=G9.charCodeAt(0);if((f9===e||f9===_0)&&J0<=3){for(var v9=0;v9<G9.length&&G9.charCodeAt(v9)===f9;)v9++;if(v9>=3){if(t&&R0){M0=!0;break}o=!0,x0=f9,f0=v9,R0=!0,X0=K0<f?K0+1:f;continue}}var c9=J0<=3?y9(v,X0,K0):null;if(c9&&R0){if(t){M0=!0;break}u0=c9.contentCol,y0=!1,X0=K0<f?K0+1:f,R0=!0;continue}if(t){M0=!0;break}R0=!0,X0=K0<f?K0+1:f}if(M0)break}}for(var z9=[],$$=0;$$<K.length;$$++){for(var q9=K[$$],e0=q9.raw,J9=e0.length;J9>0&&e0.charCodeAt(J9-1)===g;)J9--;var T0=J9<e0.length?e0.slice(0,J9):e0,$9=null;if(T0.length>=3&&T0.charCodeAt(0)===z0){var o0=T0[1];(o0===" "||o0==="x"||o0==="X")&&T0.charCodeAt(2)===d0&&($9={type:_.gfmTask,completed:o0==="x"||o0==="X"},T0=T0.slice(3))}var k0;if(q9.isEmpty&&T0.trim()==="")k0=[];else if(M0){var Z$=Z.inList;Z.inList=!0,k0=M9(T0,Z,J),Z.inList=Z$}else{var U9=Z.inList;if(Z.inList=!0,k0=M9(T0,Z,J),Z.inList=U9,k0.length===1&&k0[0].type===_.paragraph)k0=k0[0].children;else{for(var Q$=[],T9=0;T9<k0.length;T9++)if(k0[T9].type===_.paragraph)for(var _9=k0[T9].children,Z9=0;Z9<_9.length;Z9++)Q$.push(_9[Z9]);else Q$.push(k0[T9]);k0=Q$}}$9?z9.push([$9,{type:_.text,text:" "},...k0]):z9.push(k0)}return{node:{type:Y.ordered?_.orderedList:_.unorderedList,start:Y.ordered?Y.start:void 0,items:z9},end:G}}var b$=new Set(["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]);function L9($,Q,Z){let J={};for(let[K,G]of Object.entries($)){let X=K,q=K.toLowerCase();if(q==="style"&&typeof G=="string"){let F={},W=[],O=0,U=0;for(let H=0;H<G.length;H++){let z=G.charCodeAt(H);z===n0?O++:z===s0?O--:z===D$&&O===0&&(W.push(G.slice(U,H)),U=H+1)}U<G.length&&W.push(G.slice(U));let B=!1;W.forEach(H=>{let z=H.indexOf(":");if(z===-1)return;let j=H.slice(0,z).trim(),M=H.slice(z+1).trim();if(j&&M){if(/url\s*\(\s*(javascript|vbscript|data:(?!image\/))/i.test(M)){B=!0;return}let D=j.indexOf("-")!==-1?j.replace(/-([a-z])/g,(R,N)=>N.toUpperCase()):j;F[D]=M}}),!B&&Object.keys(F).length>0&&(J[X]=F)}else if((q==="href"||q==="src")&&Z?.sanitizer){let F=Z.sanitizer(G,Q,q);F!==null&&(J[X]=F)}else if(G==="")J[X]=!0;else if(G.length>=2&&G.charCodeAt(0)===D9&&G.charCodeAt(G.length-1)===Y$){var V=G.slice(1,-1);if(V.length>0){var Y=V.charCodeAt(0);if(Y===z0||Y===D9)try{J[X]=JSON.parse(V);continue}catch{}}if(V==="true"){J[X]=!0;continue}if(V==="false"){J[X]=!1;continue}if(Z?.evalUnserializableExpressions)try{J[X]=(0,eval)("("+V+")");continue}catch{}J[X]=V}else J[X]=G}return J}function j9($,Q,Z){let J=Q.length;var V=Q.charCodeAt(0);V>=c&&V<=a&&(V+=X9);for(let K=Z;K<=$.length-J;K++){var Y=$.charCodeAt(K);if(Y>=c&&Y<=a&&(Y+=X9),Y!==V)continue;let G=!0;for(let X=1;X<J;X++){let q=$.charCodeAt(K+X),F=Q.charCodeAt(X);if(q>=c&&q<=a&&(q+=X9),F>=c&&F<=a&&(F+=X9),q!==F){G=!1;break}}if(G)return K}return-1}function Q5($,Q,Z){let J=Q.length;var V=Q.charCodeAt(0);V>=c&&V<=a&&(V+=X9);for(let K=Math.min(Z,$.length-J);K>=0;K--){var Y=$.charCodeAt(K);if(Y>=c&&Y<=a&&(Y+=X9),Y!==V)continue;let G=!0;for(let X=1;X<J;X++){let q=$.charCodeAt(K+X),F=Q.charCodeAt(X);if(q>=c&&q<=a&&(q+=X9),F>=c&&F<=a&&(F+=X9),q!==F){G=!1;break}}if(G)return K}return-1}var t$=-1;function h6($,Q,Z){let J=Z.toLowerCase(),V="<"+J,Y="</"+J,K=1,G=Q,X=$.length;for(t$=-1;G<X&&K>0;){let W=j9($,V,G),O=j9($,Y,G);if(O===-1)return-1;if(W!==-1&&W<O){let U=B9($,W);U?(U.tag.toLowerCase()===J&&!U.isClosing&&!U.selfClosing&&!n9(U.tag)&&K++,G=U.end):G=W+1}else{var q=O+Y.length,F=q<X?$.charCodeAt(q):62;if((F===u||F===I||F===w||F===g)&&(K--,K===0)){t$=O;let U=O+Y.length;for(;U<X&&$.charCodeAt(U)!==u;)U++;return U+1}G=O+1}}return-1}function m6($,Q,Z,J){if(J.ignoreHTMLBlocks||J.disableParsingRawHTML)return null;var V=V0($,Q);if(v0($,Q,V),J0>3&&!Z.inHTML)return null;var Y=Q+$0;if($.charCodeAt(Y)!==G0)return null;var K=$.indexOf(">",Y+1);if(K!==-1&&K<V){var G=$.slice(Y+1,K);if(/^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(G)||/^[^\s@]+@[^\s@]+$/.test(G))return null}var X=J5($,Y);if(X>=1&&X<=5){var q=$.length;if(X===1){for(var F=$.length,W=0;W<s$.length;W++){var O=j9($,"</"+s$[W]+">",Y);O>=0&&O<F&&(F=O)}if(F<$.length){var U=$.indexOf(">",F);q=U>=0?r($,U+1):$.length}}else{var B=X===2?"-->":X===3?"?>":X===4?">":"]]>",H=$.indexOf(B,Y);H>=0&&(q=r($,H+B.length))}var z=$.slice(Y,q);if(X>=2)return{node:{type:_.htmlComment,text:z,raw:!0,endPos:q},end:q};var j="div",M=z.match(/^<\/?([a-zA-Z][a-zA-Z0-9-]*)/);M&&(j=M[1]);var D=B9($,Y),R={},N;D&&!D.isClosing&&(R=L9(D.attrs,j,J),N=D.whitespaceBeforeAttrs+D.rawAttrs);var A=[],k=j.toLowerCase(),L="</"+k,b=j9(z,L,0),P=z,y="";if(D&&D.isClosing)for(P=z.slice(D.end-Y);P.length>0&&P.charCodeAt(P.length-1)===g;)P=P.slice(0,-1);else if(D&&!D.isClosing){var S=D.end-Y;if(b!==-1)for(P=z.slice(S),P.charCodeAt(0)===g&&(P=P.slice(1));P.length>0&&P.charCodeAt(P.length-1)===g;)P=P.slice(0,-1);else for(P=z;P.length>0&&P.charCodeAt(P.length-1)===g;)P=P.slice(0,-1);if(b!==-1){var E=z.slice(S,b);if(y=E.trim(),y){var{inline:x,inHTML:T}=Z;Z.inline=!0,Z.inHTML=!0,A=C0(y,0,y.length,Z,J),Z.inline=x,Z.inHTML=T}}}var h=D?D.isClosing:!1;return{node:{type:_.htmlBlock,tag:j,attrs:R,e:N,children:A,a:P,text:y,c:!0,d:h,endPos:q,canInterruptParagraph:!0},end:q}}if(X===6||X===7){var w0=v6($,Q),m=w0<$.length?w0:$.length,q0=$.slice(Y,m),W0=w0<$.length?r($,w0):$.length,l=B9($,Y);if(l){var N0=l.tag,F0=N0.toLowerCase(),b0=l.isClosing;if(b0){var Q0=$.slice(l.end,m);return{node:{type:_.htmlBlock,tag:N0,attrs:{},children:[],a:Q0,text:Q0,c:!0,d:!0,endPos:m,canInterruptParagraph:X===6},end:W0}}var j0=Z.b||0,Y0=$.slice(Y,m),i=-1,C=-1;if(!l.selfClosing&&!n9(N0)&&j0<10){for(var M0="</"+F0,L0=l.end-Y,v=1,f=L0;f<Y0.length&&v>0;){var X0=j9(Y0,"<"+F0,f),R0=j9(Y0,M0,f);if(R0===-1)break;if(X0!==-1&&X0<R0){var t=X0+F0.length+1;if(t<Y0.length){var y0=Y0.charCodeAt(t);(y0===I||y0===w||y0===g||y0===u||y0===B0)&&v++}f=X0+1}else{var o=R0+M0.length;if(o<Y0.length){var x0=Y0.charCodeAt(o);if((x0===u||x0===I||x0===w||x0===g)&&(v--,v===0)){i=R0;for(var f0=o;f0<Y0.length&&Y0.charCodeAt(f0)!==u;)f0++;C=f0+1;break}}else if(v--,v===0){i=R0,C=Y0.length;break}f=R0+1}}var u0=!1;if(i===-1&&X===6&&!l.isClosing&&!nZ.has(F0)){var K0=$.slice(l.end),E9=j9(K0,M0,0);if(E9!==-1){var g9=K0.slice(0,E9);if(g9.indexOf(`

`)!==-1){for(var x9=l.end+E9,G9=x9+M0.length;G9<$.length&&$.charCodeAt(G9)!==u;)G9++;if(G9<$.length&&$.charCodeAt(G9)===u){var f9=G9+1,v9=V0($,f9);m=v9,W0=r($,v9),Y0=$.slice(Y,m),q0=$.slice(Y,m),i=x9-Y,C=f9-Y,u0=!0}}}}}var c9=l.rawAttrs.indexOf(`
`)!==-1||l.whitespaceBeforeAttrs.indexOf(`
`)!==-1,z9=!1;if(i!==-1){var $$=Y0.slice(C).trim();z9=$$.length===0}var q9=!1,e0=m,J9=W0;if(i!==-1){var T0=Y+C,$9=V0($,T0-1);if(T0<$9){for(var o0=T0;o0<$9&&($.charCodeAt(o0)===I||$.charCodeAt(o0)===w);)o0++;if(o0<$9&&$.charCodeAt(o0)===G0){var k0=B9($,o0);k0&&!k0.isClosing&&(q9=!0,e0=T0,J9=T0,z9=!0)}}if(!q9){var Z$=r($,$9);if(Z$<m){for(var U9=Z$;U9<m&&($.charCodeAt(U9)===I||$.charCodeAt(U9)===w);)U9++;if(U9<m&&$.charCodeAt(U9)===G0){var Q$=B9($,U9);Q$&&(q9=!0,e0=$9,J9=Z$,z9=!0)}}}if(!q9&&Z.inHTML){q9=!0,e0=$9,J9=r($,$9);var T9=$.slice(T0,$9).trim();z9=T9.length===0}}var _9=[],Z9="";if(i!==-1){Z9=Y0.slice(l.end-Y,i);var h9=Z9.trim();if(h9){var{inline:i6,inHTML:a6,b:n6}=Z;Z.inHTML=!0,Z.b=j0+1;var s6=F0==="p";if(s6)Z.inline=!0,_9=C0(h9,0,h9.length,Z,J);else{var t6=Z9.indexOf(`

`)!==-1,e6=/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m.test(h9),Q6=/^<([a-z][^ >/\n\r]*) ?([^>]*?)>/im.test(h9),$Z=t6||e6||Z.inHTML&&Q6;$Z||Q6?(Z.inline=!1,_9=M9(Z9,Z,J)):(Z.inline=!0,_9=C0(h9,0,h9.length,Z,J))}Z.inline=i6,Z.inHTML=a6,Z.b=n6}}var J6=!1;if(X===6&&i!==-1&&!Z.inHTML&&!c9){var k$=Z9,ZZ=/<[a-zA-Z][^>]*>/.test(k$),QZ=/\n\n/.test(k$)||/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m.test(k$);ZZ&&!QZ&&(J6=!0)}var JZ=Z.inHTML||X===7||c9||!z9||J6;if(JZ){var r0;if(i!==-1&&q9){var V6=!1;if(Z.inHTML&&C<Y0.length){for(var F$=C;F$<Y0.length&&Y0.charCodeAt(F$)!==g;)F$++;var S$=Y0.slice(C,F$).trim();V6=S$.length>1&&S$.charCodeAt(0)===G0&&S$.charCodeAt(1)!==B0}r0=V6?Y0.slice(l.end-Y):Z9}else(X===7||Z.inHTML)&&i!==-1?(r0=Y0.slice(l.end-Y),r0.charCodeAt(0)===g&&(r0=r0.slice(1))):q9?r0=$.slice(Y,e0):c9?r0=q0:(r0=Y0.slice(l.end-Y),r0.charCodeAt(0)===g&&(r0=r0.slice(1)));return{node:{type:_.htmlBlock,tag:N0,attrs:L9(l.attrs,N0,J),e:l.whitespaceBeforeAttrs+l.rawAttrs,children:_9,a:r0,text:r0,c:!0,d:!1,endPos:e0,canInterruptParagraph:X===6},end:J9}}return{node:{type:_.htmlBlock,tag:N0,attrs:L9(l.attrs,N0,J),e:l.whitespaceBeforeAttrs+l.rawAttrs,children:_9,a:u0?"":Z9,text:Z9,c:!1,d:!1,endPos:e0,canInterruptParagraph:X===6},end:J9}}var W$=q0.match(/^<(\/?)([a-zA-Z][a-zA-Z0-9-]*)/),VZ=W$?W$[2]:"div",Y6=W$?W$[1]==="/":!1,E$=q0;if(Y6){var X6=q0.indexOf(">");X6!==-1&&(E$=q0.slice(X6+1))}return{node:{type:_.htmlBlock,tag:VZ,attrs:{},children:[],a:E$,text:E$,c:!0,d:Y6,endPos:m,canInterruptParagraph:X===6},end:W0}}var S0=B9($,Y);if(!S0)return null;var N9=S0.tag,g$=N9.toLowerCase(),K6=N9.charCodeAt(0),z$=K6>=c&&K6<=a;if(!z$&&!b$.has(g$)&&!q$.has(g$)&&!g$.includes("-"))return null;if(S0.isClosing)return{node:{type:_.htmlSelfClosing,tag:N9,attrs:{},endPos:S0.end,d:!0,a:$.slice(Y,S0.end)},end:S0.end};var k5=!0,m9=h6($,S0.end,N9),J$=[];if(m9!==-1){var YZ=t$,U$=$.slice(S0.end,YZ),V$=U$.trim();if(V$){var XZ=U$.indexOf(`

`)!==-1,KZ=/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m.test(V$),GZ=/^<([a-z][^ >/\n\r]*) ?([^>]*?)>/im.test(V$),qZ=Z.inline,FZ=Z.inHTML,WZ=Z.b;Z.inHTML=!0,Z.b=(Z.b||0)+1,XZ||KZ||GZ?(Z.inline=!1,J$=M9(U$,Z,J)):(Z.inline=!0,J$=C0(V$,0,V$.length,Z,J)),Z.inline=qZ,Z.inHTML=FZ,Z.b=WZ}var zZ=V0($,m9),UZ=$.slice(m9,zZ).trim(),x$=UZ?m9:r($,m9),G6=z$?$.slice(Y,m9):$.slice(Y,x$),OZ=z$?m9:x$;return{node:{type:_.htmlBlock,tag:N9,attrs:L9(S0.attrs,N9,J),e:S0.whitespaceBeforeAttrs+S0.rawAttrs,children:J$,a:G6,text:z$?U$:G6,c:!0,d:!1,endPos:OZ,canInterruptParagraph:!1},end:x$}}var l9=v6($,S0.end),HZ=l9<$.length?r($,l9):l9,f$=$.slice(S0.end,l9);if(f$.trim()){var{inline:DZ,inHTML:BZ,b:jZ}=Z;Z.inline=!1,Z.inHTML=!0,Z.b=(Z.b||0)+1,J$=M9(f$,Z,J),Z.inline=DZ,Z.inHTML=BZ,Z.b=jZ}var MZ=$.slice(S0.end,l9);return{node:{type:_.htmlBlock,tag:N9,attrs:L9(S0.attrs,N9,J),e:S0.whitespaceBeforeAttrs+S0.rawAttrs,children:J$,a:MZ,text:f$,c:!0,d:!1,endPos:l9,canInterruptParagraph:!1},end:HZ}}function J5($,Q){if($.charCodeAt(Q)!==G0)return 0;var Z=Q+1,J=$.length;if($.charCodeAt(Z)===E0&&$.charCodeAt(Z+1)===p&&$.charCodeAt(Z+2)===p)return 2;if($.charCodeAt(Z)===C9)return 3;if($.charCodeAt(Z)===E0){var V=$.charCodeAt(Z+1);if(V>=c&&V<=a)return 4;if($.slice(Z+1,Z+8)==="[CDATA[")return 5}for(var Y=$.charCodeAt(Z)===B0,K=Y?Z+1:Z,G=K;G<J;){var X=$.charCodeAt(G);if(X>=c&&X<=a||X>=U0&&X<=D0||X>=n&&X<=s||X===p)G++;else break}if(G===K)return 0;var q=$.slice(K,G);if(q$.has(q.toLowerCase())){if(Y)return 0;var F=$.charCodeAt(G);return F===I||F===w||F===u||F===g||G>=J?1:0}if(b$.has(q.toLowerCase())){if(Y){for(var W=G;W<J&&($.charCodeAt(W)===I||$.charCodeAt(W)===w);)W++;return W<J&&$.charCodeAt(W)===u?6:0}var O=G<J?$.charCodeAt(G):-1;return O===I||O===w||O===u||O===g||O===B0||O===-1?6:0}if(Y){for(var z=G;z<J&&($.charCodeAt(z)===I||$.charCodeAt(z)===w);)z++;if(z<J&&$.charCodeAt(z)===u){var j=V0($,Q),M=$.slice(z+1,j).trim();if(M==="")return 7}}else{var U=V0($,Q),B=B9($,Q);if(B&&B.end<=U){var H=$.slice(B.end,U).trim();if(H==="")return 7}}return 0}function N6($,Q,Z){for(var J=0,V=$.length;J<V&&($.charCodeAt(J)===I||$.charCodeAt(J)===w);)J++;for(;V>J&&($.charCodeAt(V-1)===I||$.charCodeAt(V-1)===w);)V--;J<V&&$.charCodeAt(J)===I0&&J++,V>J&&$.charCodeAt(V-1)===I0&&(V-2<J||$.charCodeAt(V-2)!==A0)&&V--;for(var Y=[],K=J,G=!1,X=[],q=J;q<V;){var F=$.charCodeAt(q);if(F===A0&&q+1<V){$.charCodeAt(q+1)===I0?(G||(G=!0,X=[]),X.push($.slice(K,q)),X.push("|"),q+=2,K=q):q+=2;continue}if(F===e){for(var W=0;q<V&&$.charCodeAt(q)===e;)W++,q++;for(var O=!1;q<V&&!O;){for(var U=0;q<V&&$.charCodeAt(q)===e;)U++,q++;U===W?O=!0:U===0&&q++}continue}if(F===I0){var B=G?(X.push($.slice(K,q)),X.join("")):$.slice(K,q);Y.push(B.trim()),q++,K=q,G=!1,X=[];continue}q++}var H=G?(X.push($.slice(K,V)),X.join("")):$.slice(K,V);return Y.push(H.trim()),Y.map(function(z){var j=z.indexOf("\\|")!==-1?z.replace(/\\\|/g,"|"):z;return C0(j,0,j.length,Q,Z)})}function I6($,Q,Z,J){let V=V0($,Q);var Y=$.indexOf("|",Q);if(Y<0||Y>=V)return null;let K=r($,V);if(K>=$.length)return null;let G=V0($,K);if(!S6($,K,G))return null;let X=$.slice(Q,V),q=$.slice(K,G);for(var F=[],W=0,O=q.length;W<O&&(q.charCodeAt(W)===I||q.charCodeAt(W)===w);)W++;for(W<O&&q.charCodeAt(W)===I0&&W++;W<O;){for(;W<O&&(q.charCodeAt(W)===I||q.charCodeAt(W)===w);)W++;if(W>=O||q.charCodeAt(W)===I0)break;var U=q.charCodeAt(W)===g0;for(U&&W++;W<O&&q.charCodeAt(W)===p;)W++;var B=W<O&&q.charCodeAt(W)===g0;for(B&&W++,F.push(U&&B?"center":B?"right":U?"left":null);W<O&&(q.charCodeAt(W)===I||q.charCodeAt(W)===w);)W++;W<O&&q.charCodeAt(W)===I0&&W++}let H=N6(X,Z,J);if(F.length!==H.length)return null;let z=[],j=r($,G);for(;j<$.length;){let k=V0($,j),L=$.slice(j,k);if(t0($,j,k))break;if(v0($,j,k),J0<4){var M=$.charCodeAt(j+$0);if(M===u||M===Y9||(M===p||M===O0||M===H0)&&k9($,j))break;if(M===e||M===_0){for(var D=j+$0,R=0;D<k&&$.charCodeAt(D)===M;)R++,D++;if(R>=3)break}}z.push(N6(L,Z,J)),j=r($,k)}if((J.streaming||J.optimizeForStreaming)&&z.length===0)return null;for(var N=H.length,A=0;A<z.length;A++)if(z[A].length<N)for(;z[A].length<N;)z[A].push([]);else z[A].length>N&&(z[A].length=N);return{node:{type:_.table,header:H,cells:z,align:F},end:j}}function V5($,Q,Z){var J=V0($,Q);if(v0($,Q,J),J0>3)return null;var V=Q+$0;if($.charCodeAt(V)!==z0)return null;if(V+1<$.length&&$.charCodeAt(V+1)===i0){var Y=Y5($,V,Z);return Y||null}Z.refs||(Z.refs={});var K=E6($,V,Z.refs);return K===null?null:{node:{type:_.refCollection},end:K}}function Y5($,Q,Z){var J=$.length;if($.charCodeAt(Q)!==z0||Q+1>=J||$.charCodeAt(Q+1)!==i0)return null;for(var V=Q+2,Y=V;V<J&&$.charCodeAt(V)!==d0;){if($.charCodeAt(V)===g)return null;V++}if(V>=J)return null;var K=("^"+$.slice(Y,V)).toLowerCase();if(V++,V>=J||$.charCodeAt(V)!==g0)return null;for(V++;V<J&&($.charCodeAt(V)===I||$.charCodeAt(V)===w);)V++;if(V<J&&$.charCodeAt(V)===g)for(V++;V<J&&($.charCodeAt(V)===I||$.charCodeAt(V)===w);)V++;var G=$.indexOf(`
`,V);G<0&&(G=J);for(var X=$.slice(V,G).trim(),q=G<J?G+1:J;q<J;){var F=V0($,q);if(v0($,q,F),J0>=2&&!t0($,q,F))X+=`
`+$.slice(q,F),q=r($,F);else if(t0($,q,F)){var W=r($,F);if(W<J){var O=V0($,W);if(v0($,W,O),J0>=2){X+=`
`,q=r($,F);continue}}break}else break}return Z.refs[K]||(Z.refs[K]={target:X,title:void 0}),{node:{type:_.footnote},end:q}}function X5($,Q,Z,J){let V=Q,Y=0,K=0,G=-1;for(;V<$.length;){let y=G>=0?G:V0($,V);if(G=-1,t0($,V,y))break;if(v0($,V,y),J0<4&&K>0&&!Z.f){let E=$.charCodeAt(V+$0);if(E===p0||E===p){let x=V+$0;for(;x<y&&$.charCodeAt(x)===E;)x++;for(;x<y&&($.charCodeAt(x)===I||$.charCodeAt(x)===w);)x++;if(x>=y){Y=E===p0?1:2,V=r($,y);break}}}K=y;let S=r($,y);if(S<$.length){if($.charCodeAt(S)===a9){var X=V0($,S);V=r($,X),K=X;continue}let E=V0($,S);if(G=E,v0($,S,E),J0<4){let x=$.charCodeAt(S+$0);if(x===u){V=S;break}if(x===Y9&&f6($,S,Z,J)){V=S;break}if(x===e||x===_0){for(var q=S+$0,F=0;q<E&&$.charCodeAt(q)===x;)F++,q++;if(F>=3){V=S;break}}if(x===G0){var W=S+$0+1,O=W<E?$.charCodeAt(W):0,U=O===E0||O===C9;if(!U&&O===B0){for(var B=W+1,H=B;H<E&&($.charCodeAt(H)>=c&&$.charCodeAt(H)<=a||$.charCodeAt(H)>=U0&&$.charCodeAt(H)<=D0||$.charCodeAt(H)>=n&&$.charCodeAt(H)<=s||$.charCodeAt(H)===p);)H++;H>B&&(U=b$.has($.slice(B,H).toLowerCase()))}else if(!U){for(var z=W;z<E&&($.charCodeAt(z)>=c&&$.charCodeAt(z)<=a||$.charCodeAt(z)>=U0&&$.charCodeAt(z)<=D0||$.charCodeAt(z)>=n&&$.charCodeAt(z)<=s||$.charCodeAt(z)===p);)z++;if(z>W){var j=$.slice(W,z).toLowerCase();U=b$.has(j)||q$.has(j)}}if(U&&m6($,S,Z,J)){V=S;break}}if(x===p||x===O0||x===H9){let T=S+$0+1;if(T<E&&($.charCodeAt(T)===I||$.charCodeAt(T)===w)){var M=G$($,T,E);if(M<E&&!k9($,S)){V=S;break}}}if(x>=n&&x<=s){let T=S+$0;for(;T<E&&$.charCodeAt(T)>=n&&$.charCodeAt(T)<=s;)T++;if(T<E&&($.charCodeAt(T)===a0||$.charCodeAt(T)===s0)&&T-(S+$0)===1&&$.charCodeAt(S+$0)===49){var D=T+1;if(D<E&&($.charCodeAt(D)===I||$.charCodeAt(D)===w)){var R=G$($,D,E);if(R<E){V=S;break}}}}if(x===I0){let T=r($,E);if(T<$.length){let h=V0($,T);if(S6($,T,h)){V=S;break}}}if((x===p||x===O0||x===H0)&&k9($,S)){if(x!==p){V=S;break}let T=0,h=S+$0;for(;h<E&&$.charCodeAt(h)===p;)T++,h++;for(;h<E&&($.charCodeAt(h)===I||$.charCodeAt(h)===w);)h++;if(h<E){V=S;break}}}}V=r($,y)}for(var N=Y?K:V;N>Q&&($.charCodeAt(N-1)===g||$.charCodeAt(N-1)===V9||$.charCodeAt(N-1)===I||$.charCodeAt(N-1)===w);)N--;for(var A=Q;A<N&&($.charCodeAt(A)===I||$.charCodeAt(A)===w);)A++;if(A>=N)return null;for(var k=!1,L=A;L<N;L++)if($.charCodeAt(L)===a9){k=!0;break}var b=k?$.slice(A,N).replace(/\u001E/g,""):$.slice(A,N);if(!b)return null;let P=K5(b,0,b.length,Z,J);if(Y){let S=(J?.slugify||m0)(b);return{node:{type:_.heading,level:Y,children:P,id:S},end:V}}return{node:{type:_.paragraph,children:P},end:V}}function K5($,Q,Z,J,V){var Y=$.indexOf(`
`,Q);if(Y<0||Y>=Z)return C0($,Q,Z,J,V);for(var K="",G=Q,X=Q;X<Z;){var q=$.charCodeAt(X);if(q===e){var F=R$($,X,Z);if(F>X){for(var W=!1,O=X;O<F;O++)if($.charCodeAt(O)===g){W=!0;break}W&&(K+=$.slice(G,X),K+=$.slice(X,F).replace(/\n/g," "),G=F),X=F;continue}}if(q===G0){var U=C6($,X,Z);if(U>X){X=U;continue}}if(q===g){var B=!1,H=0;if(X>Q&&$.charCodeAt(X-1)===A0)B=!0,H=1;else{for(var z=0,j=X-1;j>=Q&&$.charCodeAt(j)===I;)z++,j--;z>=2&&(B=!0,H=z)}for(B?(K+=$.slice(G,X-H),K+=""):K+=$.slice(G,X+1),X++;X<Z&&$.charCodeAt(X)===I;)X++;G=X;continue}X++}return G<Z&&(K+=$.slice(G,Z)),C0(K,0,K.length,J,V)}function G5($,Q,Z){if($.charCodeAt(Q)!==e)return null;let J=A9($,Q,Z,96),V=Q+J;for(;V<Z;){let Y=$.indexOf("`",V);if(Y<0||Y>=Z)return null;let K=A9($,Y,Z,96);if(K===J){let G=$.slice(Q+J,Y);return G=G.replace(/\n/g," "),G.length>0&&G[0]===" "&&G[G.length-1]===" "&&G.trim().length>0&&(G=G.slice(1,-1)),{node:{type:_.codeInline,text:G},end:Y+K}}V=Y+K}return null}function R$($,Q,Z){if($.charCodeAt(Q)!==e)return Q;let J=A9($,Q,Z,96),V=Q+J;for(;V<Z;){let Y=$.indexOf("`",V);if(Y<0||Y>=Z)return Q;let K=A9($,Y,Z,96);if(K===J)return Y+K;V=Y+K}return Q}function C6($,Q,Z){if($.charCodeAt(Q)!==G0)return Q;if(Q+1<Z&&$.charCodeAt(Q+1)===B0){let q=Q+2;for(;q<Z&&$.charCodeAt(q)!==u;)q++;return q<Z?q+1:Q}if(Q+3<Z&&$.charCodeAt(Q+1)===E0&&$.charCodeAt(Q+2)===p&&$.charCodeAt(Q+3)===p){let q=$.indexOf("-->",Q+4);return q>=0?q+3:Q}let J=Q+1,V=J;for(;J<Z;){let q=$.charCodeAt(J);if(q>=c&&q<=a||q>=U0&&q<=D0||q>=n&&q<=s||q===p)J++;else break}if(J===V)return Q;let Y=$.slice(V,J).toLowerCase(),K=!1;for(;J<Z;){let q=$.charCodeAt(J);if(q===u){J++;break}if(q===B0&&J+1<Z&&$.charCodeAt(J+1)===u){J+=2,K=!0;break}if(q===F9||q===O9){var G=q;for(J++;J<Z&&$.charCodeAt(J)!==G;)J++;J<Z&&J++;continue}if(q===g)return Q;J++}if(K||n9(Y))return J;let X=1;for(;J<Z&&X>0;)if($.charCodeAt(J)===G0)if(J+1<Z&&$.charCodeAt(J+1)===B0){let q=J+2,F=q;for(;F<Z&&($.charCodeAt(F)>=c&&$.charCodeAt(F)<=a||$.charCodeAt(F)>=U0&&$.charCodeAt(F)<=D0);)F++;if($.slice(q,F).toLowerCase()===Y){for(;F<Z&&$.charCodeAt(F)!==u;)F++;if(F<Z&&F++,X--,X===0)return F}J=F}else{let q=J+1,F=q;for(;F<Z&&($.charCodeAt(F)>=c&&$.charCodeAt(F)<=a||$.charCodeAt(F)>=U0&&$.charCodeAt(F)<=D0);)F++;$.slice(q,F).toLowerCase()===Y&&X++,J++}else J++;return J}function q5($,Q,Z,J,V){if($.charCodeAt(Q)!==_0||Q+1>=Z||$.charCodeAt(Q+1)!==_0)return null;let Y=Q+2;for(;Y+1<Z;){let K=$.charCodeAt(Y);if(K===e){let G=R$($,Y,Z);if(G>Y){Y=G;continue}}if(K===_0&&$.charCodeAt(Y+1)===_0){let G=$.slice(Q+2,Y),X=C0(G,0,G.length,J,V);return{node:{type:_.textFormatted,tag:"del",children:X},end:Y+2}}K===A0&&Y+1<Z&&Y++,Y++}return null}function F5($,Q,Z,J,V){if($.charCodeAt(Q)!==p0||Q+1>=Z||$.charCodeAt(Q+1)!==p0)return null;let Y=Q+2;for(;Y+1<Z;){let K=$.charCodeAt(Y);if(K===e){let G=R$($,Y,Z);if(G>Y){Y=G;continue}}if(K===p0&&$.charCodeAt(Y+1)===p0&&Y>Q+2){let G=$.slice(Q+2,Y),X=C0(G,0,G.length,J,V);return{node:{type:_.textFormatted,tag:"mark",children:X},end:Y+2}}K===A0&&Y+1<Z&&Y++,Y++}return null}var W5=/[\p{P}\p{S}]/u;function b6($,Q,Z){return $<c0?!!($6($)&Z0):W5.test(Q[Z])}function P6($,Q,Z){return $<c0?!!($6($)&e9):/\p{Zs}/u.test(Q[Z])}function z5($,Q,Z){var J=$.charCodeAt(Q);if(J!==O0&&J!==H0)return null;var V=A9($,Q,Z,J);if(V===0)return null;var Y=Q>0?$.charCodeAt(Q-1):32,K=Q+V<Z?$.charCodeAt(Q+V):32,G=P6(Y,$,Q-1),X=P6(K,$,Q+V),q=Q>0?b6(Y,$,Q-1):!1,F=Q+V<Z?b6(K,$,Q+V):!1,W=!X&&(!F||G||q),O=!G&&(!q||X||F),U,B;return J===O0?(U=W,B=O):(U=W&&(!O||q),B=O&&(!W||F)),{len:V,canOpen:U,canClose:B}}function U5($,Q,Z,J){if(Q.length!==0){for(var V=[],Y=0;Y<12;Y++)V[Y]=-1;for(var K=0;K<Q.length;){var G=Q[K];if(!G.active||!G.canClose){K++;continue}for(var X=G.ch===O0?0:1,q=X*6+G.len%3*2+(G.canOpen?1:0),F=V[q]!==void 0?V[q]:-1,W=-1,O=K-1;O>F;O--){var U=Q[O];if(!(!U.active||U.ch!==G.ch||!U.canOpen)&&!((G.canOpen||U.canClose)&&(U.len+G.len)%3===0&&U.len%3!==0)){W=O;break}}if(W<0){V[q]=K-1,!G.canOpen&&(G.active=!1),K++;continue}var B=Q[W],H=B.len>=2&&G.len>=2,z=H?2:1;B.len-=z,G.len-=z;var j=$[B.idx],M=$[G.idx];j.text=j.text.slice(0,j.text.length-z),M.text=M.text.slice(z);var D=B.idx+1,R=G.idx,N=$.slice(D,R),A={type:_.textFormatted,tag:H?"strong":"em",children:N};$.splice(D,R-D,A);for(var k=R-D-1,L=0;L<Q.length;L++)Q[L].idx>B.idx&&(Q[L].idx-=k);for(var b=W+1;b<K;b++)Q[b].active=!1;if(B.len===0&&(B.active=!1,j.text==="")){$.splice(B.idx,1);for(var P=0;P<Q.length;P++)Q[P].idx>B.idx?Q[P].idx--:Q[P].idx===B.idx&&(Q[P].idx=-1)}if(G.len===0){G.active=!1;var y=G.idx;if(M.text===""){$.splice(y,1);for(var S=0;S<Q.length;S++)Q[S].idx>y?Q[S].idx--:Q[S].idx===y&&(Q[S].idx=-1)}}else continue;K++}for(var E=0,x=0;x<$.length;x++){var T=$[x];if(T.type===_.text){var h=T;if(h.text==="")continue;if(E>0&&$[E-1].type===_.text){$[E-1].text+=h.text;continue}}$[E++]=T}$.length=E}}function w6($,Q,Z,J,V){let Y=$.charCodeAt(Q)===E0,K=Y?Q+1:Q;if($.charCodeAt(K)!==z0)return null;var G=$.indexOf("]",K+1);if(G<0||G>=Z)return null;for(var X=K+1,q=-1,F=1;X<Z&&F>0;){var W=$.charCodeAt(X);if(W===A0&&X+1<Z){X+=2;continue}if(W===e){var O=R$($,X,Z);if(O>X){X=O;continue}}if(W===G0){var U=u6($,X,Z);if(U){X=U.end;continue}var B=C6($,X,Z);if(B>X){X=B;continue}}W===z0?F++:W===d0&&F--,X++}if(F!==0)return null;var H=X-1,z=$.slice(K+1,H),j=X<Z?$.charCodeAt(X):0,M=!1;if(j===n0){var D=!0;for(X++;X<Z&&($.charCodeAt(X)===I||$.charCodeAt(X)===g);)X++;var R="",N=X;if(X<Z&&$.charCodeAt(X)===G0){for(X++,N=X;N<Z&&$.charCodeAt(N)!==u;){if($.charCodeAt(N)===A0&&N+1<Z){N+=2;continue}if($.charCodeAt(N)===g){D=!1;break}N++}D&&(N>=Z||$.charCodeAt(N)!==u)&&(D=!1),D&&(R=$.slice(X,N),N++)}else if(D){for(var A=0;N<Z;){var k=$.charCodeAt(N);if(k===A0&&N+1<Z){N+=2;continue}if(k===n0)A++;else if(k===s0){if(A===0)break;A--}else if(k===I||k===g)break;N++}R=$.slice(X,N)}if(D){for(X=N;X<Z&&($.charCodeAt(X)===I||$.charCodeAt(X)===g);)X++;var L;if(X<Z){var b=$.charCodeAt(X);if(b===F9||b===O9||b===n0){var P=b===n0?41:b;X++;for(var y=X;X<Z&&$.charCodeAt(X)!==P;)$.charCodeAt(X)===A0&&X+1<Z&&X++,X++;X>=Z?D=!1:(L=$.slice(y,X),X++)}}if(D){for(;X<Z&&($.charCodeAt(X)===I||$.charCodeAt(X)===g);)X++;(X>=Z||$.charCodeAt(X)!==s0)&&(D=!1)}}if(D){X++,R=t9(R),L!==void 0&&(L=t9(L));var S=V?.sanitizer||R9,E=S(R,Y?"img":"a",Y?"src":"href"),x=E===null?null:R;if(Y){var T=C0(z,0,z.length,J,V),h=P$(T);return{node:{type:_.image,target:x,alt:h,title:L},end:X}}else{var w0=J.inAnchor;J.inAnchor=!0;var m=w0?[{type:_.text,text:z}]:C0(z,0,z.length,J,V);return J.inAnchor=w0,!J.inAnchor&&e$(m)?null:{node:{type:_.link,target:x,title:L,children:m},end:X}}}else X=H+1,M=!0}var q0="",W0=X;if(!M&&j===z0){var l=X+1;W0=l;for(var N0=!1;W0<Z&&$.charCodeAt(W0)!==d0;){if($.charCodeAt(W0)===A0&&W0+1<Z){W0+=2;continue}if($.charCodeAt(W0)===z0){N0=!0;break}W0++}if(N0||W0>=Z)return null;var F0=$.slice(l,W0);if(F0.trim())q0=N$(F0);else{if(A6(z))return null;q0=N$(z)}W0=W0+1}else{if(A6(z))return null;q0=N$(z)}var b0=J.refs[q0];if(!b0)return null;if(Y)return{node:{type:_.image,target:b0.target,alt:P$(C0(z,0,z.length,J,V)),title:b0.title},end:W0};var Q0=J.inAnchor;J.inAnchor=!0;var m=Q0?[{type:_.text,text:z}]:C0(z,0,z.length,J,V);return J.inAnchor=Q0,!J.inAnchor&&e$(m)?null:{node:{type:_.link,target:b0.target,title:b0.title,children:m},end:W0}}function u6($,Q,Z){if($.charCodeAt(Q)!==G0)return null;for(var J=Q+1;J<Z;){var V=$.charCodeAt(J);if(V===u)break;if(V===I||V===g||V===V9||V===G0)return null;J++}if(J>=Z||$.charCodeAt(J)!==u)return null;var Y=$.slice(Q+1,J),K=Y.match(/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^\x00-\x20]*)$/);return K?{node:{type:_.link,target:Y,children:[{type:_.text,text:Y}]},end:J+1}:Y.indexOf("@")!==-1&&/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(Y)?{node:{type:_.link,target:"mailto:"+Y,children:[{type:_.text,text:Y}]},end:J+1}:null}function O5($,Q,Z,J){if($.charCodeAt(Q)!==z0||Q+1>=Z||$.charCodeAt(Q+1)!==i0)return null;let V=Q+2;for(;V<Z&&$.charCodeAt(V)!==d0&&$.charCodeAt(V)!==g;)V++;if(V>=Z||$.charCodeAt(V)!==d0)return null;let Y=$.slice(Q+2,V);return Y?{node:{type:_.footnoteReference,target:"#"+m0(Y),text:Y},end:V+1}:null}function H5($,Q,Z,J){if(J.disableBareUrls)return null;var V="",Y=!1,K=$.charCodeAt(Q);if(K===i9||K===72?Q+8<=Z&&$.charCodeAt(Q+1)===H$&&$.charCodeAt(Q+2)===H$&&$.charCodeAt(Q+3)===h$&&($.charCodeAt(Q+4)===F6&&$.charCodeAt(Q+5)===g0&&$.charCodeAt(Q+6)===B0&&$.charCodeAt(Q+7)===B0?V="https://":$.charCodeAt(Q+4)===g0&&$.charCodeAt(Q+5)===B0&&$.charCodeAt(Q+6)===B0&&(V="http://")):K===I9||K===70?Q+6<=Z&&$.charCodeAt(Q+1)===H$&&$.charCodeAt(Q+2)===h$&&$.charCodeAt(Q+3)===g0&&$.charCodeAt(Q+4)===B0&&$.charCodeAt(Q+5)===B0&&(V="ftp://"):(K===b9||K===87)&&Q+4<=Z&&$.charCodeAt(Q+1)===b9&&$.charCodeAt(Q+2)===b9&&$.charCodeAt(Q+3)===a0&&(V="www.",Y=!0),!V)return null;let G=Q+V.length;for(;G<Z;){let A=$.charCodeAt(G);if(A===I||A===g||A===w||A===V9||A===G0||A===u)break;G++}for(var X=0,q=0,F=Q;F<G;F++){var W=$.charCodeAt(F);W===n0?X++:W===s0&&q++}let O=G;for(;O>Q+V.length;){let A=$.charCodeAt(O-1);if(A===a0||A===m$||A===g0||A===E0||A===C9||A===s0){if(A===s0){if(X>=q)break;q--}O--}else if(A===D$){for(var U=O-2;U>Q&&($.charCodeAt(U)>=c&&$.charCodeAt(U)<=a||$.charCodeAt(U)>=U0&&$.charCodeAt(U)<=D0||$.charCodeAt(U)>=n&&$.charCodeAt(U)<=s);)U--;U>=Q&&$.charCodeAt(U)===O$?O=U:O--}else break}if(O<=Q+V.length)return null;var B=Q+(Y?4:V.length),H=$.indexOf("/",B);if((H<0||H>O)&&(H=O),Y&&$.indexOf(".",B)===-1)return null;for(var z=-1,j=-1,M=H-1;M>=B;M--)if($.charCodeAt(M)===a0)if(z<0)z=M;else{j=M;break}for(var D=j>=0?j+1:B,M=D;M<H;M++)if($.charCodeAt(M)===H0)return null;var R=$.slice(Q,O),N=Y?"http://"+R:R;return{node:{type:_.link,target:N,children:[{type:_.text,text:R}]},end:O}}function D5($,Q,Z,J){if(J.disableBareUrls)return null;for(var V=Q,Y=V;V<Z;){var K=$.charCodeAt(V);if(K>=c&&K<=a||K>=U0&&K<=D0||K>=n&&K<=s||K===a0||K===E0||K===Y9||K===36||K===o9||K===O$||K===O9||K===O0||K===H9||K===B0||K===p0||K===C9||K===i0||K===H0||K===e||K===D9||K===I0||K===Y$||K===_0||K===p)V++;else break}if(V===Y||V>=Z||$.charCodeAt(V)!==r9)return null;V++;for(var G=V,X=-1;V<Z;){var K=$.charCodeAt(V);if(K>=c&&K<=a||K>=U0&&K<=D0||K>=n&&K<=s)V++;else if((K===p||K===H0)&&V>G)V++;else if(K===a0){if(V===G)break;var q=$.charCodeAt(V-1);if(q===p||q===H0)break;if(V+1<Z){var F=$.charCodeAt(V+1);if(F>=c&&F<=a||F>=U0&&F<=D0||F>=n&&F<=s)X=V,V++;else break}else break}else break}if(X<0)return null;var W=$.charCodeAt(V-1);if(!(W>=c&&W<=a||W>=U0&&W<=D0||W>=n&&W<=s)||V<=X+1)return null;for(var O=-1,U=X-1;U>=G;U--)if($.charCodeAt(U)===a0){O=U;break}for(var B=O>=0?O+1:G,U=B;U<V;U++)if($.charCodeAt(U)===H0)return null;var H=$.slice(Q,V);return{node:{type:_.link,target:"mailto:"+H,children:[{type:_.text,text:H}]},end:V}}function e$($){for(var Q=0;Q<$.length;Q++)if($[Q].type===_.link||"children"in $[Q]&&Array.isArray($[Q].children)&&e$($[Q].children))return!0;return!1}function P$($){for(var Q="",Z=0;Z<$.length;Z++){var J=$[Z];J.type===_.text?Q+=J.text:J.type===_.breakLine?Q+=" ":J.type===_.codeInline?Q+=J.text:"children"in J&&Array.isArray(J.children)?Q+=P$(J.children):J.type===_.image?Q+=J.alt||"":J.type===_.link&&(Q+=P$(J.children))}return Q}function d9($){let Q=$.includes("&")?K$($):$;return{type:_.text,text:Q}}function B5($,Q,Z,J,V){if($.charCodeAt(Q)!==G0)return null;var Y=Q+1;if(Y>=Z)return null;var K=$.charCodeAt(Y);if(K===E0&&Y+1<Z&&$.charCodeAt(Y+1)===p&&Y+2<Z&&$.charCodeAt(Y+2)===p){var G=Y+3;if(G<Z&&$.charCodeAt(G)===u)return{node:{type:_.htmlComment,text:"",endsWithGreaterThan:!0},end:G+1};if(G+1<Z&&$.charCodeAt(G)===p&&$.charCodeAt(G+1)===u)return{node:{type:_.htmlComment,text:"-",endsWithGreaterThan:!0},end:G+2};var X=$.indexOf("-->",G);return X!==-1&&X<=Z-3?{node:{type:_.htmlComment,text:$.slice(Q+4,X)},end:X+3}:null}if(K===C9){var q=$.indexOf("?>",Y+1);return q!==-1&&q<Z?{node:{type:_.htmlSelfClosing,tag:"?",attrs:{},a:$.slice(Q,q+2)},end:q+2}:null}if(K===E0&&Y+1<Z){var F=$.charCodeAt(Y+1);if(F===z0&&$.slice(Y+1,Y+8)==="[CDATA["){var W=$.indexOf("]]>",Y+8);return W!==-1&&W<Z?{node:{type:_.htmlSelfClosing,tag:"![CDATA[",attrs:{},a:$.slice(Q,W+3)},end:W+3}:null}if(F>=c&&F<=a){var O=$.indexOf(">",Y+2);return O!==-1&&O<Z?{node:{type:_.htmlSelfClosing,tag:"!"+$.slice(Y+1,O),attrs:{},a:$.slice(Q,O+1)},end:O+1}:null}}if(K===B0){var U=Y+1;if(U>=Z)return null;var B=$.charCodeAt(U);if(!(B>=c&&B<=a||B>=U0&&B<=D0))return null;for(U++;U<Z;){var H=$.charCodeAt(U);if(H>=c&&H<=a||H>=U0&&H<=D0||H>=n&&H<=s||H===p)U++;else break}for(;U<Z&&($.charCodeAt(U)===I||$.charCodeAt(U)===w||$.charCodeAt(U)===g);)U++;if(U<Z&&$.charCodeAt(U)===u){var z=$.slice(Y+1,U).trim();return{node:{type:_.htmlSelfClosing,tag:z,attrs:{},a:$.slice(Q,U+1),d:!0},end:U+1}}return null}if(!(K>=c&&K<=a||K>=U0&&K<=D0))return null;var j=B9($,Q);if(!j)return null;var M=j.tag,D=M.toLowerCase(),R=j.selfClosing;if(R||n9(M))return{node:{type:_.htmlSelfClosing,tag:M,attrs:L9(j.attrs,M,V),a:$.slice(Q,j.end)},end:j.end};var N=q$.has(D),A=h6($.slice(0,Z),j.end,M);if(A===-1)return{node:{type:_.htmlSelfClosing,tag:M,attrs:L9(j.attrs,M,V),a:$.slice(Q,j.end)},end:j.end};var k=Q5($,"</"+D,A),L=$.slice(j.end,k),b=[];if(N)L.trim()&&(b=[{type:_.text,text:L}]);else{var P=L.trim();if(P){var{inAnchor:y,inline:S}=J;D==="a"&&(J.inAnchor=!0);var E=P.indexOf(`

`)!==-1||/^#{1,6}\s/.test(P);E?(J.inline=!1,b=M9(P,J,V)):b=C0(P,0,P.length,J,V),J.inAnchor=y,J.inline=S}}return{node:{type:_.htmlBlock,tag:M,attrs:L9(j.attrs,M,V),e:j.rawAttrs,children:b,text:L,c:!1},end:A}}var j5=200,s9=0;function C0($,Q,Z,J,V){if(s9++,s9>j5)return s9--,[{type:_.text,text:$.slice(Q,Z)}];let Y=J;if(V.streaming||V.optimizeForStreaming){let t=function(o,x0){for(var f0=1,u0=x0+1;u0<o.length;u0++){var K0=o.charCodeAt(u0);if(K0===z0)f0++;else if(K0===d0&&(f0--,f0===0))return u0}return-1},v=$.slice(Q,Z),f=v;for(var K=0,G=0,X=0,q=0,F=0,W=-1,O=-1,U=-1,B=-1,H=-1,z=0;z<v.length;z++){var j=v.charCodeAt(z);j===O0?z+1<v.length&&v.charCodeAt(z+1)===O0?(K++,W=z,z++):(G++,O=z):j===H0?z+1<v.length&&v.charCodeAt(z+1)===H0?(X++,U=z,z++):(q++,B=z):j===_0&&z+1<v.length&&v.charCodeAt(z+1)===_0&&(F++,H=z,z++)}var M=[];F%2===1&&H>=0&&M.push([H,2]),X%2===1&&U>=0&&M.push([U,2]),q%2===1&&B>=0&&M.push([B,1]),K%2===1&&W>=0&&M.push([W,2]),G%2===1&&O>=0&&M.push([O,1]),M.sort(function(o,x0){return x0[0]-o[0]});for(var D=0;D<M.length;D++){var R=M[D][0],N=M[D][1];v=v.slice(0,R)+v.slice(R+N)}let X0=0,R0=-1;for(let o=0;o<v.length;o++)v.charCodeAt(o)===e&&(X0++,R0=o);if(X0%2===1&&R0!==-1){let o=!1,x0=-1,f0=0;for(;f0<v.length;)v.charCodeAt(f0)===e&&(o?(o=!1,x0=-1):(x0=f0,o=!0)),f0++;o&&x0!==-1&&(v=v.slice(0,x0))}for(var A=!0;A;){A=!1;for(var k=-1,L=-1,b=-1,P=!1,y=0;y<v.length;y++){var S=v.charCodeAt(y);if(S===z0&&(y===0||v.charCodeAt(y-1)!==A0)){var E=y>0&&v.charCodeAt(y-1)===E0,x=E?y-1:y,T=t(v,y);if(T===-1)k=x,P=E,L=y+1,b=v.length;else{var h=T+1;if(h>=v.length)k=x,P=E,L=y+1,b=T;else if(v.charCodeAt(h)===n0){var w0=v.indexOf(")",h+1);w0===-1?(k=x,P=E,L=y+1,b=T,y=v.length):y=w0}else if(v.charCodeAt(h)===z0){var m=v.indexOf("]",h+1);m===-1?(k=x,P=E,L=y+1,b=T,y=v.length):y=m}else y=T}}}if(k>=0){var q0=P?"":v.slice(L,b);v=v.slice(0,k)+q0,A=!0}}let y0=v.match(/<([A-Z][A-Za-z0-9]*)(?:\s[^>]*)?>([^<]*)$/);if(y0&&y0.index!==void 0){for(var W0=!1,l=0,N0=0;N0<y0.index;N0++)v.charCodeAt(N0)===e&&l++;if(W0=l%2===1,!W0){let o=y0[1];j9(v,"</"+o,0)===-1&&(v=v.replace(/<[A-Z][A-Za-z0-9]*(?:\s[^>]*)?>([^<]*)$/,"$1"))}}v!==f&&($=$.slice(0,Q)+v,Z=Q+v.length)}let F0=[];var b0=[];let Q0=Q;var j0=V.disableAutoLink||V.disableBareUrls||Y.inAnchor?-1:$.indexOf("@",Q);for(j0>=Z&&(j0=-1);Q<Z;){let v=$.charCodeAt(Q),f=null;if(v===e){if(f=G5($,Q,Z),!f){var Y0=A9($,Q,Z,e);Q+=Y0-1}}else if(v===O0||v===H0){var i=z5($,Q,Z);if(i){if(i.canOpen||i.canClose){Q>Q0&&F0.push(d9($.slice(Q0,Q)));var C=$.slice(Q,Q+i.len),M0=d9(C);b0.push({idx:F0.length,ch:v,len:i.len,canOpen:i.canOpen,canClose:i.canClose,active:!0}),F0.push(M0),Q+=i.len,Q0=Q;continue}Q+=i.len-1}}else v===_0?f=q5($,Q,Z,Y,V):v===p0?f=F5($,Q,Z,Y,V):v===z0?(Q+1<Z&&$.charCodeAt(Q+1)===i0&&(f=O5($,Q,Z,Y)),f||(f=w6($,Q,Z,Y,V))):v===E0&&Q+1<Z&&$.charCodeAt(Q+1)===z0?f=w6($,Q,Z,Y,V):v===G0?(f=u6($,Q,Z),!f&&!V.disableParsingRawHTML&&!V.ignoreHTMLBlocks&&(f=B5($,Q,Z,Y,V))):(v===i9||v===b9||v===I9)&&!Y.inAnchor&&!V.disableAutoLink&&(Q===0||$.charCodeAt(Q-1)!==G0)&&(f=H5($,Q,Z,V));if(!f&&j0>=0&&j0-Q<=64&&!Y.inAnchor&&!V.disableAutoLink&&!V.disableBareUrls&&(v>=c&&v<=a||v>=U0&&v<=D0||v>=n&&v<=s)&&(f=D5($,Q,Z,V),!f&&Q>=j0&&(j0=$.indexOf("@",Q+1),j0>=Z&&(j0=-1))),v===C$){Q>Q0&&F0.push(d9($.slice(Q0,Q))),F0.push({type:_.breakLine}),Q++,Q0=Q;continue}if(f)Q>Q0&&F0.push(d9($.slice(Q0,Q))),F0.push(f.node),Q=f.end,Q0=Q;else{if(v===A0&&Q+1<Z){let X0=$.charCodeAt(Q+1);if($6(X0)&Z0){Q>Q0&&F0.push(d9($.slice(Q0,Q))),F0.push(d9($[Q+1])),Q+=2,Q0=Q;continue}}if(Q++,j0<0||j0-Q>64)for(;Q<Z;){var L0=$.charCodeAt(Q);if(L0<c0&&!L6[L0])Q++;else break}}}if(Z>Q0){let v=$.slice(Q0,Z);(V.streaming||V.optimizeForStreaming)&&(v=v.replace(/\*\*([^*]+)$/,"$1"),v.match(/\*[^*]+$/)&&(v=v.replace(/\*([^*]+)$/,"$1")),v=v.replace(/__([^_]+)$/,"$1"),v.match(/_[^_]+$/)&&(v=v.replace(/_([^_]+)$/,"$1")),v=v.replace(/~~([^~]+)$/,"$1"),v=v.replace(/\[([^\]]+)$/,"$1"),v=v.replace(/\[([^\]]+)\]\([^)]*$/,"$1")),v&&F0.push(d9(v))}return b0.length>0&&U5(F0,b0,J,V),s9--,F0}var M5=500;function M9($,Q,Z){var J=Q.g||0;if(J>M5)return[{type:_.text,text:$}];Q.g=J+1;let V=Q;if(Z.streaming||Z.optimizeForStreaming){var Y=$.length;Y>0&&$.charCodeAt(Y-1)===g&&Y--;for(var K=Y;K>0&&$.charCodeAt(K-1)!==g;)K--;if(K>0&&$.charCodeAt(K)===I0){for(var G=!0,X=K;X<Y;X++){var q=$.charCodeAt(X);if(q!==I&&q!==w&&q!==p&&q!==g0&&q!==I0){G=!1;break}}if(G){for(var F=K-1;F>0&&$.charCodeAt(F-1)!==g;)F--;$.charCodeAt(F)===I0&&($=$.slice(0,F).trimEnd())}}var W=$.trim(),O=W.lastIndexOf(`
`),U=O===-1?W:W.slice(O+1);if(U.length>0&&U.charCodeAt(0)===I0){for(var B=!1,H=!1,z=1;z<U.length;z++){var j=U.charCodeAt(z);j===I0&&(B=!0),j===p&&(H=!0)}B&&H&&($=O===-1?"":$.slice(0,$.lastIndexOf(U)).trimEnd())}for(var M=-1,D=-1,R=-1,N=$.length-1;N>=0;N--)if($.charCodeAt(N)===G0){var A=N+1<$.length?$.charCodeAt(N+1):0;if(A>=c&&A<=a||A>=U0&&A<=D0){for(var k=N+2;k<$.length;){var L=$.charCodeAt(k);if(L>=c&&L<=a||L>=U0&&L<=D0||L>=n&&L<=s)k++;else break}for(var b=k;b<$.length&&$.charCodeAt(b)!==u;)b++;if(b<$.length){for(var P=!1,y=b+1;y<$.length;y++)if($.charCodeAt(y)===G0){P=!0;break}P||(M=N,D=k,R=b+1)}}break}if(M>=0){for(var S=0,E=0;E<M;E++)$.charCodeAt(E)===e&&S++;if(S%2===0){var x=$.slice(M+1,D);j9($,"</"+x,0)===-1&&($=$.slice(0,M)+$.slice(R))}}var T=$.length;if(T>0){for(var h=$.lastIndexOf(`
`),w0=h===-1?0:h+1,m=T,q0=w0,W0=0;q0<m&&$.charCodeAt(q0)===I&&W0<3;)q0++,W0++;if(q0<m){var l=$.charCodeAt(q0),N0=!1;if(l===O0||l===p||l===H9){var F0=q0+1;if(F0>=m||$.charCodeAt(F0)===I||$.charCodeAt(F0)===w){for(var b0=F0;b0<m&&($.charCodeAt(b0)===I||$.charCodeAt(b0)===w);)b0++;b0>=m&&(N0=!0)}}else if(l>=n&&l<=s){for(var Q0=q0;Q0<m&&$.charCodeAt(Q0)>=n&&$.charCodeAt(Q0)<=s;)Q0++;if(Q0<m&&($.charCodeAt(Q0)===a0||$.charCodeAt(Q0)===s0)){var j0=Q0+1;if(j0>=m||$.charCodeAt(j0)===I||$.charCodeAt(j0)===w){for(var Y0=j0;Y0<m&&($.charCodeAt(Y0)===I||$.charCodeAt(Y0)===w);)Y0++;Y0>=m&&(N0=!0)}}}N0&&($=$.slice(0,w0).trimEnd())}}}if(Q.inline)return C0($,0,$.length,Q,Z);let i=[],C=0,M0=$.length;if(C===0&&$.startsWith("---")){let t=o$($);if(t&&t.hasValidYaml){if(Z.preserveFrontmatter!==!1){let y0=$.slice(0,t.endPos).trimEnd();i.push({type:_.frontmatter,text:y0})}C=t.endPos}}for(;C<M0;){for(var L0=$.indexOf(`
`,C),v=L0<0?M0:L0;C<M0&&t0($,C,v);)C=v<M0?v+1:v,C<M0&&(L0=$.indexOf(`
`,C),v=L0<0?M0:L0);if(C>=M0)break;$.charCodeAt(C),v0($,C,v);let t=null;if($.charCodeAt(C)!==a9&&J0>=4&&!Q.inHTML)t=eZ($,C);else if($.charCodeAt(C)!==a9){let y0=C+$0,o=$.charCodeAt(y0);o===Y9?t=f6($,C,Q,Z):o===u?t=$5($,C,Q,Z):o===e||o===_0?t=tZ($,C,Q):o===p||o===O0||o===H0?(t=k9($,C),!t&&(t=_6($,C,Q,Z))):o===H9||o>=n&&o<=s?t=_6($,C,Q,Z):o===G0?t=m6($,C,Q,Z):o===I0?t=I6($,C,Q,Z):o===z0&&(t=V5($,C,Q))}if(!t){for(var f=!1,X0=C;X0<v;X0++)if($.charCodeAt(X0)===I0){f=!0;break}f&&(t=I6($,C,Q,Z))}if(t||(t=X5($,C,Q,Z)),t)t.node.type!==_.refCollection&&i.push(t.node),C=t.end;else{var R0=$.indexOf(`
`,C);C=R0<0?M0:R0+1}}return Q.g=J,i}function Z6($,Q){s9=0,$.charCodeAt(0)===65279&&($=$.slice(1)),$=A$($);let Z={inline:!1,inAnchor:!1,inHTML:!1,inList:!1,inBlockQuote:!1,refs:{}},J={...Q,slugify:Q?.slugify?Y=>Q.slugify(Y,m0):m0,sanitizer:Q?.sanitizer||R9,tagfilter:Q?.tagfilter!==!1};w$($,Z.refs,J);let V=M9($,Z,J);return Z.refs&&Object.keys(Z.refs).length>0?[{type:_.refCollection,refs:Z.refs},...V]:V}function p6($,Q,Z,J){var V=B9($,Q);return V?{tagName:V.tag,tagLower:V.tag.toLowerCase(),attrs:V.rawAttrs,whitespaceBeforeAttrs:V.whitespaceBeforeAttrs,isSelfClosing:V.selfClosing,hasSpaceBeforeSlash:V.hasSpaceBeforeSlash,isClosing:V.isClosing,hasNewline:V.whitespaceBeforeAttrs.includes(`
`)||V.rawAttrs.includes(`
`),endPos:V.end}:null}function y$($,Q,Z){s9=0,$=A$($),!Q.refs&&(Q.refs={}),w$($,Q.refs,Z);let J=M9($,Q,Z);return Q.refs&&Object.keys(Q.refs).length>0?[{type:_.refCollection,refs:Q.refs},...J]:J}var N5=/^\n+/,I5=typeof document<"u",Q9=$=>Array.isArray($)?$:[$],d6=$=>typeof $=="function"||typeof $=="object"&&$!==null&&"render"in $;function c6($){if(!$)return"";let Q="";for(let[Z,J]of Object.entries($))J===!0?Q+=` ${Z}`:J!=null&&J!==!1&&(Q+=` ${Z}="${String(J)}"`);return Q}function b5($,Q,Z,J,V,Y,K,G){switch($.type){case _.blockQuote:{let X={},q=$.children;return $.alert&&(X.class="markdown-alert-"+Y($.alert.toLowerCase(),m0),q=[{attrs:{},children:[{type:_.text,text:$.alert}],c:!0,type:_.htmlBlock,tag:"header"},...q]),J("blockquote",X,...Q9(Q(q,Z)))}case _.breakLine:return J("br",{});case _.breakThematic:return J("hr",{});case _.frontmatter:return G.preserveFrontmatter?J("pre",{},$.text):null;case _.codeBlock:{let X=$.lang?K$($.lang):"",q={...$.attrs||{},class:X?`language-${X} lang-${X}`:""};return J("pre",{},J("code",q,$.text))}case _.codeInline:return J("code",{},$.text);case _.footnoteReference:return J("a",{href:V($.target,"a","href")},J("sup",{},$.text));case _.gfmTask:return J("input",{checked:$.completed,readOnly:!0,type:"checkbox"});case _.heading:return J(`h${$.level}`,{id:$.id},...Q9(Q($.children,Z)));case _.htmlBlock:{let X=$;if(G.tagfilter&&v$(X.tag)){let q=typeof X.a=="string"?X.a:`<${X.tag}${c6(X.attrs)}>`;return J("span",{},q)}if(X.a&&X.c){let U=function(D){if((D.type===_.htmlSelfClosing||D.type===_.htmlBlock)&&D.d)return[];if(D.type===_.paragraph){let R=D.children;return R?R.flatMap(U):[]}return D.type===_.text?D.text?.trim()?[D]:[]:D.type===_.htmlBlock&&D.children?[{...D,children:D.children?.flatMap(U)}]:[D]},q=X.tag.toLowerCase(),F=k6(q),W=/<[a-z][^>]{0,100}>/i.test(X.a),O=/<\/?pre\b/i.test(X.a);if(F&&!W){let D=X.a.replace(new RegExp("\\s*</"+q+">\\s*$","i"),"");return G.tagfilter&&(D=_$(D)),J($.tag,{...$.attrs},D)}if(O){let D=G.tagfilter?_$(X.a):X.a;return J($.tag,{...$.attrs,innerHTML:D})}if(X.children&&X.children.length>0)return J($.tag,{...$.attrs},Q(X.children.flatMap(U),Z));let B={slugify:D=>Y(D,m0),sanitizer:V,tagfilter:!0},H=X.a.replace(/>\s+</g,"><").replace(/\n+/g," ").trim();if(new RegExp(`^<${X.tag}(\\s[^>]*)?>(\\s*</${X.tag}>)?$`,"i").test(H))return J($.tag,{...$.attrs});let j=y$(H,{inline:!1,refs:K,inHTML:!1},B),M=Q(j.flatMap(U),Z);return J($.tag,{...$.attrs},...Q9(M))}return J($.tag,{...$.attrs},...$.children?Q9(Q($.children,Z)):[])}case _.htmlSelfClosing:{let X=$;if(G.tagfilter&&v$(X.tag)){let q=typeof X.a=="string"?X.a:`<${X.tag}${c6(X.attrs)} />`;return J("span",{},q)}return J(X.tag,{...X.attrs})}case _.image:return J("img",{alt:$.alt&&$.alt.length>0?$.alt:void 0,title:$.title||void 0,src:V($.target,"img","src")});case _.link:{let X={};return $.target!=null&&(X.href=i$($.target)),$.title&&(X.title=$.title),J("a",X,...Q9(Q($.children,Z)))}case _.table:{let X=$;return J("table",{},J("thead",{},J("tr",{},...X.header.map(function(F,W){return J("th",{style:X.align[W]==null?{}:{textAlign:X.align[W]}},...Q9(Q(F,Z)))}))),J("tbody",{},...X.cells.map(function(F,W){return J("tr",{},...F.map(function(U,B){return J("td",{style:X.align[B]==null?{}:{textAlign:X.align[B]}},...Q9(Q(U,Z)))}))})))}case _.text:return $.text;case _.textFormatted:return J($.tag,{},...Q9(Q($.children,Z)));case _.orderedList:case _.unorderedList:{let X=$.type===_.orderedList?"ol":"ul";return J(X,{start:$.type===_.orderedList?$.start:void 0},...$.items.map(function(F,W){return J("li",{},...Q9(Q(F,Z)))}))}case _.paragraph:return J("p",{},...Q9(Q($.children,Z)));case _.ref:return null;default:return null}}var P5=($,Q,Z,J,V,Y)=>{let K=(q,F,W)=>{let O=()=>b5(q,U=>F(Q9(U)),W,Q,Z,J,V,Y);return $?$(O,q,F,W):O()},G=q=>q.map(F=>"text"in F?F.text:""),X=(q,F={})=>{let W=(F.renderDepth||0)+1;if(W>2500)return G(q);let O=[],U=!1;for(let B=0;B<q.length;B++){let H=K(q[B],X,{...F,renderDepth:W}),z=typeof H=="string";if(z&&U)O[O.length-1]+=H;else if(H!==null)if(Array.isArray(H))for(let j=0;j<H.length;j++)O.push(H[j]);else O.push(H);U=z}return O};return X},w5=($,Q)=>{let Z=p9(Q,$,void 0);if(!Z)return $;if(d6(Z))return Z;let J=p9(Q,`${$}.component`,$);return d6(J),J};function o6($,Q){let Z={...Q||{}};Z.overrides=Z.overrides||{};let J=Z.slugify||m0,V=Z.sanitizer||R9,Y=z=>R5(z,{...Z,wrapper:null});function K(z,j,...M){if(!I5){let R=M.length===0?void 0:M.length===1?M[0]:M,N=R===void 0?j:{...j,children:R};return typeof z=="function"?z(N):{t:z,p:N}}let D=l6(z,j,...M);return typeof D=="function"?D():D}function G(z,j,...M){let D=p9(Z.overrides,`${z}.props`,{}),R=j||{};for(let L in R){let b=R[L];if(typeof b=="string"&&b.length>0&&b[0]==="<"&&(R6.test(b)||y6.test(b)||p6(b,0))){let P=Y(b.trim());R[L]=L==="innerHTML"&&Array.isArray(P)?P[0]:P}}let N=w5(z,Z.overrides),A=a$(R?.class,D.class||void 0)||void 0,k={...R,...D};return A&&(k.class=A),R.innerHTML&&D.innerHTML===void 0&&(k.innerHTML=R.innerHTML,delete R.innerHTML),K(N,k,...M)}let X=Z.createElement||((z,j,...M)=>K(z,j||{},...M)),q={slugify:z=>J(z,m0),sanitizer:V,tagfilter:Z.tagfilter!==!1,disableAutoLink:Z.disableAutoLink,disableParsingRawHTML:Z.disableParsingRawHTML,enforceAtxHeadings:Z.enforceAtxHeadings,forceBlock:Z.forceBlock,forceInline:Z.forceInline,preserveFrontmatter:Z.preserveFrontmatter},F=$[0]&&$[0].type===_.refCollection?$[0].refs:{},W=P5(Z.renderRule,G,V,J,F,Z),O=W($,{inline:Z.forceInline,refs:F}),U=[];for(let z in F)z.charCodeAt(0)===i0&&U.push({identifier:z,footnote:F[z].target});if(U.length&&O.push(G("footer",{},...U.map(function(j){let M=j.identifier.slice(1),D=y$(j.footnote,{inline:!0,refs:F},q),R=W(D,{inline:!0,refs:F});return G("div",{id:J(M,m0)},M+": ",...Q9(R))}))),Z.wrapper===null)return O.length===0?null:O.length===1?O[0]:O;let B=Z.wrapper||(Z.forceInline?"span":"div"),H;if(O.length>1||Z.forceWrapper)H=O;else return O.length===1?O[0]:null;return X(B,{...Z.wrapperProps},H)}function R5($="",Q={}){let Z={...Q||{}};Z.overrides=Z.overrides||{};let J=Z.slugify||m0,V=Z.sanitizer||R9;function Y(X){let q=Z.forceInline||!Z.forceBlock&&!r$.test(X),F={slugify:U=>J(U,m0),sanitizer:V,tagfilter:Z.tagfilter!==!1,disableAutoLink:Z.disableAutoLink,disableParsingRawHTML:Z.disableParsingRawHTML,enforceAtxHeadings:Z.enforceAtxHeadings,forceBlock:Z.forceBlock,forceInline:q,preserveFrontmatter:Z.preserveFrontmatter};q||w$(X,K,F);let W=X;if(!q){let U=W.length;for(;U>0&&(W[U-1]===`
`||W[U-1]==="\r");)U--;W=W.slice(0,U),W=`${W.replace(N5,"")}

`}let O=y$(q?X:W,{inline:q,refs:K},F);return o6(O,{...Z,forceInline:q})}let K={};return Y($)}var r6=v5(void 0);function y5($,Q,...Z){if(typeof document>"u"){let V=Z.length===0?void 0:Z.length===1?Z[0]:Z,Y=V===void 0?Q:{...Q,children:V};return typeof $=="function"?$(Y):{t:$,p:Y}}let J=l6($,Q,...Z);return typeof J=="function"?J():J}var o5=$=>{let Q={value:$.options};return y5(r6.Provider,Q,$.children)},L5=$=>{let Q=_5(r6),Z=L$(()=>({...Q,...$.options})),J=L$(()=>{let K=typeof $.children=="function"?$.children():$.children;return K??""}),V=L$(()=>Z6(J(),Z()));return L$(()=>o6(V(),{...Z(),wrapperProps:{...Z()?.wrapperProps,...Object.fromEntries(Object.entries($).filter(([K])=>K!=="children"&&K!=="options"))}}))()},s5=L5;export{m0 as slugify,R9 as sanitizer,Z6 as parser,s5 as default,R5 as compiler,o6 as astToJSX,_ as RuleType,o5 as MarkdownProvider,r6 as MarkdownContext,L5 as Markdown};
